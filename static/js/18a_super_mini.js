(function(a,b,c){function e(a){a=a||location.href;return"#"+a.replace(/^[^#]*#?(.*)$/,"$1")}var g="hashchange",i=document,m,h=a.event.special,o=i.documentMode,j="on"+g in b&&(o===c||o>7);a.fn[g]=function(a){return a?this.bind(g,a):this.trigger(g)};a.fn[g].delay=50;h[g]=a.extend(h[g],{setup:function(){if(j)return!1;a(m.start)},teardown:function(){if(j)return!1;a(m.stop)}});m=function(){function h(){var c=e(),j=E(q);if(c!==q)aa(q=c,j),a(b).trigger(g);else if(j!==q)location.href=location.href.replace(/#.*/, "")+j;o=setTimeout(h,a.fn[g].delay)}var m={},o,q=e(),w=function(a){return a},aa=w,E=w;m.start=function(){o||h()};m.stop=function(){o&&clearTimeout(o);o=c};a.browser.msie&&!j&&function(){var b,c;m.start=function(){if(!b)c=(c=a.fn[g].src)&&c+e(),b=a('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){c||aa(e());h()}).attr("src",c||"javascript:0").insertAfter("body")[0].contentWindow,i.onpropertychange=function(){try{if(event.propertyName==="title")b.document.title=i.title}catch(a){}}}; m.stop=w;E=function(){return e(b.location.href)};aa=function(c,h){var j=b.document,e=a.fn[g].domain;if(c!==h)j.title=i.title,j.open(),e&&j.write('<script>document.domain="'+e+'"<\/script>'),j.close(),b.location.hash=c}}();return m}()})(jQuery,this); (function(){function a(d,a){d||(d={});for(var f in a)d[f]=a[f];return d}function b(d,a){return parseInt(d,a||10)}function c(d){return typeof d=="string"}function e(d){return typeof d=="object"}function g(d){return typeof d=="number"}function i(d,a){for(var f=d.length;f--;)if(d[f]==a){d.splice(f,1);break}}function m(d){return d!==ya&&d!==null}function h(d,a,f){var b,h;if(c(a))m(f)?d.setAttribute(a,f):d&&d.getAttribute&&(h=d.getAttribute(a));else if(m(a)&&e(a))for(b in a)d.setAttribute(b,a[b]);return h} function o(d){if(!d||d.constructor!=Array)d=[d];return d}function j(){var d=arguments,a,f,b=d.length;for(a=0;a<b;a++)if(f=d[a],typeof f!=="undefined"&&f!==null)return f}function n(d){var a="",f;for(f in d)a+=ub(f)+":"+d[f]+";";return a}function l(d,p){if(C&&p&&p.opacity!==ya)p.filter="alpha(opacity="+p.opacity*100+")";a(d.style,p)}function t(d,p,f,b,c){d=A.createElement(d);p&&a(d,p);c&&l(d,{padding:0,border:Na,margin:0});f&&l(d,f);b&&b.appendChild(d);return d}function q(d,a){vb=j(d,a.animation)}function w(){var d= za.global.useUTC;wb=d?Date.UTC:function(d,a,b,c,h,e){return(new Date(d,a,j(b,1),j(c,0),j(h,0),j(e,0))).getTime()};Ib=d?"getUTCMinutes":"getMinutes";Jb=d?"getUTCHours":"getHours";Kb=d?"getUTCDay":"getDay";pb=d?"getUTCDate":"getDate";xb=d?"getUTCMonth":"getMonth";yb=d?"getUTCFullYear":"getFullYear";ec=d?"setUTCMinutes":"setMinutes";fc=d?"setUTCHours":"setHours";Lb=d?"setUTCDate":"setDate";gc=d?"setUTCMonth":"setMonth";hc=d?"setUTCFullYear":"setFullYear"}function aa(d){Ka||(Ka=t($a));d&&Ka.appendChild(d); Ka.innerHTML=""}function E(d,p){var f=function(){};f.prototype=new d;a(f.prototype,p);return f}function Ma(d,a,f,c){var h=za.lang,j=isNaN(a=Y(a))?2:a,a=f===void 0?h.decimalPoint:f,c=c===void 0?h.thousandsSep:c,h=d<0?"-":"",f=b(d=Y(+d||0).toFixed(j))+"",e=(e=f.length)>3?e%3:0;return h+(e?f.substr(0,e)+c:"")+f.substr(e).replace(/(\d{3})(?=\d)/g,"$1"+c)+(j?a+Y(d-f).toFixed(j).slice(2):"")}function M(){}function Q(d,p){function f(d,f){function p(d,a){this.pos=d;this.minor=a;this.isNew=!0;a||this.addLabel()} function c(d){if(d)this.options=d,this.id=d.id;return this}function s(){var d=[],a=[],p;x=Ga=null;E=[];y(la,function(b){p=!1;y(["xAxis","yAxis"],function(d){if(b.isCartesian&&(d=="xAxis"&&J||d=="yAxis"&&!J)&&(b.options[d]==f.index||b.options[d]===ya&&f.index===0))b[d]=fa,E.push(b),p=!0});!b.visible&&D.ignoreHiddenSeries&&(p=!1);if(p){var c,s,h,e,z;if(!J){c=b.options.stacking;Ia=c=="percent";if(c)e=b.type+j(b.options.stack,""),z="-"+e,b.stackKey=e,s=d[e]||[],d[e]=s,h=a[z]||[],a[z]=h;Ia&&(x=0,Ga=99)}b.isCartesian&& (y(b.data,function(d){var a=d.x,f=d.y,p=f<0,b=p?h:s,p=p?z:e;x===null&&(x=Ga=d[K]);J?a>Ga?Ga=a:a<x&&(x=a):m(f)&&(c&&(b[a]=m(b[a])?b[a]+f:f),f=b?b[a]:f,d=j(d.low,f),Ia||(f>Ga?Ga=f:d<x&&(x=d)),c&&(B[p]||(B[p]={}),B[p][a]={total:f,cum:f}))}),/(area|column|bar)/.test(b.type)&&!J&&(x>=0?(x=0,eb=!0):Ga<0&&(Ga=0,ob=!0)))}})}function h(d,a){var p;U=a?1:N.pow(10,ha(N.log(d)/N.LN10));p=d/U;a||(a=[1,2,2.5,5,10],f.allowDecimals===!1&&(U==1?a=[1,2,5,10]:U<=0.1&&(a=[1/U])));for(var b=0;b<a.length;b++)if(d=a[b], p<=(a[b]+(a[b+1]||a[b]))/2)break;d*=U;return d}function e(d){var a;a=d;m(U)&&(a=(U<1?v(1/U):1)*10,a=v(d*a)/a);return a}function z(){var a,p,b,c,s=f.tickInterval,g=f.tickPixelInterval;a=f.maxZoom||(J?Da(d.smallestInterval*5,Ga-x):null);C=l?oa:ea;Qa?(b=d[J?"xAxis":"yAxis"][f.linkedTo],c=b.getExtremes(),V=j(c.min,c.dataMin),X=j(c.max,c.dataMax)):(V=j(Ha,f.min,x),X=j(Ya,f.max,Ga));X-V<a&&(c=(a-X+V)/2,V=H(V-c,j(f.min,V-c),x),X=Da(V+a,j(f.max,V+a),Ga));if(!Fa&&!Ia&&!Qa&&m(V)&&m(X)){a=X-V||1;if(!m(f.min)&& !m(Ha)&&L&&(x<0||!eb))V-=a*L;if(!m(f.max)&&!m(Ya)&&M&&(Ga>0||!ob))X+=a*M}I=V==X?1:Qa&&!s&&g==b.options.tickPixelInterval?b.tickInterval:j(s,Fa?1:(X-V)*g/C);!R&&!m(f.tickInterval)&&(I=h(I));fa.tickInterval=I;Ka=f.minorTickInterval==="auto"&&I?I/5:f.minorTickInterval;if(R){ba=[];var s=za.global.useUTC,F=1E3/Oa,G=6E4/Oa,i=36E5/Oa,g=864E5/Oa;a=6048E5/Oa;c=2592E6/Oa;var o=31556952E3/Oa,n=[["second",F,[1,2,5,10,15,30]],["minute",G,[1,2,5,10,15,30]],["hour",i,[1,2,3,4,6,8,12]],["day",g,[1,2]],["week",a, [1,2]],["month",c,[1,2,3,4,6]],["year",o,null]],t=n[6],B=t[1],q=t[2];for(b=0;b<n.length;b++)if(t=n[b],B=t[1],q=t[2],n[b+1]&&I<=(B*q[q.length-1]+n[b+1][1])/2)break;B==o&&I<5*B&&(q=[1,2,5]);n=h(I/B,q);q=new Date(V*Oa);q.setMilliseconds(0);B>=F&&q.setSeconds(B>=G?0:n*ha(q.getSeconds()/n));if(B>=G)q[ec](B>=i?0:n*ha(q[Ib]()/n));if(B>=i)q[fc](B>=g?0:n*ha(q[Jb]()/n));if(B>=g)q[Lb](B>=c?1:n*ha(q[pb]()/n));B>=c&&(q[gc](B>=o?0:n*ha(q[xb]()/n)),p=q[yb]());B>=o&&(p-=p%n,q[hc](p));B==a&&q[Lb](q[pb]()-q[Kb]()+ f.startOfWeek);b=1;p=q[yb]();F=q.getTime()/Oa;G=q[xb]();for(i=q[pb]();F<X&&b<oa;)ba.push(F),B==o?F=wb(p+b*n,0)/Oa:B==c?F=wb(p,G+b*n)/Oa:!s&&(B==g||B==a)?F=wb(p,G,i+b*n*(B==g?1:7)):F+=B*n,b++;ba.push(F);Gb=f.dateTimeLabelFormats[t[0]]}else{b=ha(V/I)*I;p=gb(X/I)*I;ba=[];for(b=e(b);b<=p;)ba.push(b),b=e(b+I)}if(!Qa){if(Fa||J&&d.hasColumn){p=(Fa?1:I)*0.5;if(Fa||!m(j(f.min,Ha)))V-=p;if(Fa||!m(j(f.max,Ya)))X+=p}p=ba[0];b=ba[ba.length-1];f.startOnTick?V=p:V>p&&ba.shift();f.endOnTick?X=b:X<b&&ba.pop();Xa|| (Xa={x:0,y:0});if(!R&&ba.length>Xa[K])Xa[K]=ba.length}}function g(){var d,a;aa=V;mc=X;s();z();na=w;w=C/(X-V||1);if(!J)for(d in B)for(a in B[d])B[d][a].cum=B[d][a].total;if(!fa.isDirty)fa.isDirty=V!=aa||X!=mc}function F(d){d=(new c(d)).render();Ja.push(d);return d}function G(){var a=f.title,s=f.alternateGridColor,h=f.lineWidth,e,j,z=d.hasRendered,g=z&&m(aa)&&!isNaN(aa);e=E.length&&m(V)&&m(X);C=l?oa:ea;w=C/(X-V||1);Wa=l?O:ga;if(e||Qa){if(Ka&&!Fa)for(e=V+(ba[0]-V)%Ka;e<=X;e+=Ka)W[e]||(W[e]=new p(e,!0)), g&&W[e].isNew&&W[e].render(null,!0),W[e].isActive=!0,W[e].render();y(ba,function(d,a){if(!Qa||d>=V&&d<=X)g&&P[d].isNew&&P[d].render(a,!0),P[d].isActive=!0,P[d].render(a)});s&&y(ba,function(d,a){if(a%2===0&&d<X)Y[d]||(Y[d]=new c),Y[d].options={from:d,to:ba[a+1]!==ya?ba[a+1]:X,color:s},Y[d].render(),Y[d].isActive=!0});z||y((f.plotLines||[]).concat(f.plotBands||[]),function(d){Ja.push((new c(d)).render())})}y([P,W,Y],function(d){for(var a in d)d[a].isActive?d[a].isActive=!1:(d[a].destroy(),delete d[a])}); h&&(e=O+(n?oa:0)+u,j=ua-ga-(n?ea:0)+u,e=S.crispLine([Ca,l?O:e,l?j:T,ma,l?Aa-ja:e,l?j:ua-ga],h),A?A.animate({d:e}):A=S.path(e).attr({stroke:f.lineColor,"stroke-width":h,zIndex:7}).add());fa.axisTitle&&(e=l?O:T,h=b(a.style.fontSize||12),e={low:e+(l?0:C),middle:e+C/2,high:e+(l?C:0)}[a.align],h=(l?T+ea:O)+(l?1:-1)*(n?-1:1)*ka+(t==2?h:0),fa.axisTitle[z?"animate":"attr"]({x:l?e:h+(n?oa:0)+u+(a.x||0),y:l?h-(n?ea:0)+u:e+(a.y||0)}));fa.isDirty=!1}function o(d){for(var a=0;a<Ja.length;a++)Ja[a].id==d&&Ja[a].destroy()} var J=f.isX,n=f.opposite,l=qa?!J:J,t=l?n?0:2:n?1:3,B={},f=ia(J?zb:Mb,[oc,pc,ic,qc][t],f),fa=this,R=f.type=="datetime",u=f.offset||0,K=J?"x":"y",C,w,na,Wa=l?O:ga,ca,mb,Ba,nb,A,x,Ga,E,Ha,Ya,X=null,V=null,aa,mc,L=f.minPadding,M=f.maxPadding,Qa=m(f.linkedTo),eb,ob,Ia,Q=f.events,Ub,Ja=[],I,Ka,U,ba,P={},W={},Y={},Z,da,ka,Gb,Fa=f.categories,wa=f.labels.formatter||function(){var d=this.value;return Gb?Ab(Gb,d):I%1E6===0?d/1E6+"M":I%1E3===0?d/1E3+"k":!Fa&&d>=1E3?Ma(d,0):d},xa=l&&f.labels.staggerLines,ra=f.reversed, sa=Fa&&f.tickmarkPlacement=="between"?0.5:0;p.prototype={addLabel:function(){var d=this.pos,p=f.labels,b=!(d==V&&!j(f.showFirstLabel,1)||d==X&&!j(f.showLastLabel,0)),c,s=this.label,d=wa.call({isFirst:d==ba[0],isLast:d==ba[ba.length-1],dateTimeLabelFormat:Gb,value:Fa&&Fa[d]?Fa[d]:d});c=c&&{width:c-2*(p.padding||10)+Ea};s===ya?this.label=m(d)&&b&&p.enabled?S.text(d,0,0).attr({align:p.align,rotation:p.rotation}).css(a(c,p.style)).add(Ba):null:s&&s.attr({text:d}).css(c)},getLabelSize:function(){var d= this.label;return d?(this.labelBBox=d.getBBox())[l?"height":"width"]:0},render:function(d,a){var p=!this.minor,b=this.label,c=this.pos,s=f.labels,h=this.gridLine,e=p?f.gridLineWidth:f.minorGridLineWidth,j=p?f.gridLineColor:f.minorGridLineColor,z=p?f.gridLineDashStyle:f.minorGridLineDashStyle,g=this.mark,F=p?f.tickLength:f.minorTickLength,G=p?f.tickWidth:f.minorTickWidth||0,i=p?f.tickColor:f.minorTickColor,o=p?f.tickPosition:f.minorTickPosition,p=s.step,J=a&&Za||ua,B;B=l?ca(c+sa,null,null,a)+Wa:O+ u+(n?(a&&cb||Aa)-ja-O:0);J=l?J-ga+u-(n?ea:0):J-ca(c+sa,null,null,a)-Wa;if(e){c=mb(c+sa,e,a);if(h===ya){h={stroke:j,"stroke-width":e};if(z)h.dashstyle=z;this.gridLine=h=e?S.path(c).attr(h).add(nb):null}h&&c&&h.animate({d:c})}if(G)o=="inside"&&(F=-F),n&&(F=-F),e=S.crispLine([Ca,B,J,ma,B+(l?0:-F),J+(l?F:0)],G),g?g.animate({d:e}):this.mark=S.path(e).attr({stroke:i,"stroke-width":G}).add(Ba);if(b){B=B+s.x-(sa&&l?sa*w*(ra?-1:1):0);J=J+s.y-(sa&&!l?sa*w*(ra?1:-1):0);m(s.y)||(J+=parseInt(b.styles.lineHeight)* 0.9-b.getBBox().height/2);xa&&(J+=d%xa*16);if(p)b[d%p?"hide":"show"]();b[this.isNew?"attr":"animate"]({x:B,y:J})}this.isNew=!1},destroy:function(){for(var d in this)this[d]&&this[d].destroy&&this[d].destroy()}};c.prototype={render:function(){var d=this,a=d.options,f=a.label,p=d.label,b=a.width,c=a.to,s,h=a.from,e=a.dashStyle,j=d.svgElem,z=[],g,F,G=a.color;F=a.zIndex;var i=a.events;if(b){if(z=mb(a.value,b),a={stroke:G,"stroke-width":b},e)a.dashstyle=e}else if(m(h)&&m(c))h=H(h,V),c=Da(c,X),s=mb(c), (z=mb(h))&&s?z.push(s[4],s[5],s[1],s[2]):z=null,a={fill:G};else return;if(m(F))a.zIndex=F;if(j)z?j.animate({d:z},null,j.onGetPath):(j.hide(),j.onGetPath=function(){j.show()});else if(z&&z.length&&(d.svgElem=j=S.path(z).attr(a).add(),i))for(g in e=function(a){j.on(a,function(f){i[a].apply(d,[f])})},i)e(g);if(f&&m(f.text)&&z&&z.length&&oa>0&&ea>0){f=ia({align:l&&s&&"center",x:l?!s&&4:10,verticalAlign:!l&&s&&"middle",y:l?s?16:10:s?6:-4,rotation:l&&!s&&90},f);if(!p)d.label=p=S.text(f.text,0,0).attr({align:f.textAlign|| f.align,rotation:f.rotation,zIndex:F}).css(f.style).add();s=[z[1],z[4],z[6]||z[1]];z=[z[2],z[5],z[7]||z[2]];g=Da.apply(N,s);F=Da.apply(N,z);p.align(f,!1,{x:g,y:F,width:H.apply(N,s)-g,height:H.apply(N,z)-F});p.show()}else p&&p.hide();return d},destroy:function(){for(var d in this)this[d]&&this[d].destroy&&this[d].destroy(),delete this[d];i(Ja,this)}};ca=function(d,a,f,p){var b=1,c=0,s=p?na:w,p=p?aa:V;s||(s=w);f&&(b*=-1,c=C);ra&&(b*=-1,c-=b*C);a?(ra&&(d=C-d),d=d/s+p):d=b*(d-p)*s+c;return d};mb=function(d, a,f){var p,b,c,d=ca(d,null,null,f),s=f&&Za||ua,h=f&&cb||Aa,e,f=b=v(d+Wa);p=c=v(s-d-Wa);if(isNaN(d))e=!0;else if(l){if(p=T,c=s-ga,f<O||f>O+oa)e=!0}else if(f=O,b=h-ja,p<T||p>T+ea)e=!0;return e?null:S.crispLine([Ca,f,p,ma,b,c],a||0)};qa&&J&&ra===ya&&(ra=!0);a(fa,{addPlotBand:F,addPlotLine:F,adjustTickAmount:function(){if(Xa&&!R&&!Fa&&!Qa){var d=Z,a=ba.length;Z=Xa[K];if(a<Z){for(;ba.length<Z;)ba.push(e(ba[ba.length-1]+I));w*=(a-1)/(Z-1);X=ba[ba.length-1]}if(m(d)&&Z!=d)fa.isDirty=!0}},categories:Fa,getExtremes:function(){return{min:V, max:X,dataMin:x,dataMax:Ga}},getPlotLinePath:mb,getThreshold:function(d){V>d?d=V:X<d&&(d=X);return ca(d,0,1)},isXAxis:J,options:f,plotLinesAndBands:Ja,getOffset:function(){var d=E.length&&m(V)&&m(X),a=0,b=0,c=f.title,s=f.labels,h=[-1,1,1,-1][t];Ba||(Ba=S.g("axis").attr({zIndex:7}).add(),nb=S.g("grid").attr({zIndex:1}).add());da=0;if(d||Qa)y(ba,function(d){P[d]?P[d].addLabel():P[d]=new p(d);if(t===0||t==2||{1:"left",3:"right"}[t]==s.align)da=H(P[d].getLabelSize(),da)}),xa&&(da+=(xa-1)*16);else for(var e in P)P[e].destroy(), delete P[e];if(c&&c.text){if(!fa.axisTitle)fa.axisTitle=S.text(c.text,0,0).attr({zIndex:7,rotation:c.rotation||0,align:c.textAlign||{low:"left",middle:"center",high:"right"}[c.align]}).css(c.style).add();a=fa.axisTitle.getBBox()[l?"height":"width"];b=j(c.margin,l?5:10)}u=h*(f.offset||pa[t]);ka=da+(t!=2&&da&&h*f.labels[l?"y":"x"])+b;pa[t]=H(pa[t],ka+a+h*u)},render:G,setCategories:function(a,f){fa.categories=Fa=a;y(E,function(d){d.translate();d.setTooltipPoints(!0)});fa.isDirty=!0;j(f,!0)&&d.redraw()}, setExtremes:function(a,f,p,b){q(b,d);p=j(p,!0);ta(fa,"setExtremes",{min:a,max:f},function(){Ha=a;Ya=f;p&&d.redraw()})},setScale:g,setTickPositions:z,translate:ca,redraw:function(){hb.resetTracker&&hb.resetTracker();G();y(Ja,function(d){d.render()});y(E,function(d){d.isDirty=!0})},removePlotBand:o,removePlotLine:o,reversed:ra,stacks:B});for(Ub in Q)va(fa,Ub,Q[Ub]);g()}function s(){var a={};return{add:function(f,p,b,c){a[f]||(p=S.text(p,0,0).css(d.toolbar.itemStyle).align({align:"right",x:-ja-20,y:T+ 30}).on("click",c).attr({align:"right",zIndex:20}).add(),a[f]=p)},remove:function(d){aa(a[d].element);a[d]=null}}}function z(d){function a(){var d=this.points||o(this),f=d[0].series.xAxis,p=this.x,f=f&&f.options.type=="datetime",b=c(p)||f,s;s=b?['<span style="font-size: 10px">',f?Ab("%A, %b %e, %Y",p):p,"</span><br/>"]:[];y(d,function(d){s.push(d.point.tooltipFormatter(b))});return s.join("")}function f(d,a){n=i?d:(2*n+d)/3;l=i?a:(l+a)/2;B.translate(n,l);Nb=Y(d-n)>1||Y(a-l)>1?function(){f(d,a)}:null} function p(){if(!i){var d=u.hoverPoints;B.hide();y(j,function(d){d&&d.hide()});d&&y(d,function(d){d.setState()});u.hoverPoints=null;i=!0}}var s,h=d.borderWidth,e=d.crosshairs,j=[],z=d.style,g=d.shared,F=b(z.padding),G=h+F,i=!0,m,J,n=0,l=0;z.padding=0;var B=S.g("tooltip").attr({zIndex:8}).add(),q=S.rect(G,G,0,0,d.borderRadius,h).attr({fill:d.backgroundColor,"stroke-width":h}).add(B).shadow(d.shadow),t=S.text("",F+G,b(z.fontSize)+F+G).attr({zIndex:1}).css(z).add(B);B.hide();return{shared:g,refresh:function(b){var c, h,z,n=0,l={},fa=[];z=b.tooltipPos;c=d.formatter||a;var l=u.hoverPoints,R=function(d){return{series:d.series,point:d,x:d.category,y:d.y,percentage:d.percentage,total:d.total||d.stackTotal}};g?(l&&y(l,function(d){d.setState()}),u.hoverPoints=b,y(b,function(d){d.setState(Sa);n+=d.plotY;fa.push(R(d))}),h=b[0].plotX,n=v(n)/b.length,l={x:b[0].category},l.points=fa,b=b[0]):l=R(b);l=c.call(l);s=b.series;h=g?h:b.plotX;n=g?n:b.plotY;c=v(z?z[0]:qa?oa-n:h);h=v(z?z[1]:qa?ea-h:n);z=g||!b.series.isCartesian||ib(c, h);l===!1||!z?p():(i&&(B.show(),i=!1),t.attr({text:l}),z=t.getBBox(),m=z.width,J=z.height,q.attr({width:m+2*F,height:J+2*F,stroke:d.borderColor||b.color||s.color||"#606060"}),c=c-m+O-25,h=h-J+T+10,c<7&&(c=7,h-=30),h<5?h=5:h+J>ua&&(h=ua-J-5),f(v(c-G),v(h-G)));if(e){e=o(e);h=e.length;for(var C;h--;)if(e[h]&&(C=b.series[h?"yAxis":"xAxis"]))if(c=C.getPlotLinePath(b[h?"y":"x"],1),j[h])j[h].attr({d:c,visibility:Ua});else{z={"stroke-width":e[h].width||1,stroke:e[h].color||"#C0C0C0",zIndex:2};if(e[h].dashStyle)z.dashstyle= e[h].dashStyle;j[h]=S.path(c).attr(z).add()}}},hide:p}}function g(d,f){function p(d){var a,d=d||x.event;if(!d.target)d.target=d.srcElement;a=d.touches?d.touches.item(0):d;if(d.type!="mousemove"||x.opera){for(var f=I,b={left:f.offsetLeft,top:f.offsetTop};f=f.offsetParent;)b.left+=f.offsetLeft,b.top+=f.offsetTop,f!=A.body&&f!=A.documentElement&&(b.left-=f.scrollLeft,b.top-=f.scrollTop);qb=b}C?(d.chartX=d.x,d.chartY=d.y):a.layerX===ya?(d.chartX=a.pageX-qb.left,d.chartY=a.pageY-qb.top):(d.chartX=d.layerX, d.chartY=d.layerY);return d}function b(d){var a={xAxis:[],yAxis:[]};y(wa,function(f){var p=f.translate,b=f.isXAxis;a[b?"xAxis":"yAxis"].push({axis:f,value:p((qa?!b:b)?d.chartX-O:ea-d.chartY+T,!0)})});return a}function c(){var a=d.hoverSeries,f=d.hoverPoint;f&&f.onMouseOut();a&&a.onMouseOut();rb&&rb.hide();Ob=null}function s(){if(G){var a={xAxis:[],yAxis:[]},f=G.getBBox(),p=f.x-O,b=f.y-T;F&&(y(wa,function(d){var c=d.translate,s=d.isXAxis,h=qa?!s:s,e=c(h?p:ea-b-f.height,!0),c=c(h?p+f.width:ea-b,!0); a[s?"xAxis":"yAxis"].push({axis:d,min:Da(e,c),max:H(e,c)})}),ta(d,"selection",a,Pb));G=G.destroy()}d.mouseIsDown=Qb=F=!1;Va(A,Ha?"touchend":"mouseup",s)}var e,j,F,G,i=D.zoomType,m=/x/.test(i),o=/y/.test(i),l=m&&!qa||o&&qa,n=o&&!qa||m&&qa;Bb=function(){Cb?(Cb.translate(O,T),qa&&Cb.attr({width:d.plotWidth,height:d.plotHeight}).invert()):d.trackerGroup=Cb=S.g("tracker").attr({zIndex:9}).add()};Bb();if(f.enabled)d.tooltip=rb=z(f);(function(){var z=!0;I.onmousedown=function(a){a=p(a);d.mouseIsDown=Qb= !0;e=a.chartX;j=a.chartY;va(A,Ha?"touchend":"mouseup",s)};var g=function(a){if(!a||!(a.touches&&a.touches.length>1)){a=p(a);if(!Ha)a.returnValue=!1;var b=a.chartX,s=a.chartY,g=!ib(b-O,s-T);Ha&&a.type=="touchstart"&&(h(a.target,"isTracker")?d.runTrackerClick||a.preventDefault():!ub&&!g&&a.preventDefault());g&&(z||c(),b<O?b=O:b>O+oa&&(b=O+oa),s<T?s=T:s>T+ea&&(s=T+ea));if(Qb&&a.type!="touchstart"){if(F=Math.sqrt(Math.pow(e-b,2)+Math.pow(j-s,2))>10){if(jb&&(m||o)&&ib(e-O,j-T))G||(G=S.rect(O,T,l?1:oa, n?1:ea,0).attr({fill:"rgba(69,114,167,0.25)",zIndex:7}).add());G&&l&&(b-=e,G.attr({width:Y(b),x:(b>0?0:b)+e}));G&&n&&(s-=j,G.attr({height:Y(s),y:(s>0?0:s)+j}))}}else if(!g){var i,s=d.hoverPoint,b=d.hoverSeries,J,B,t=Aa,q=qa?a.chartY:a.chartX-O;if(rb&&f.shared){i=[];J=la.length;for(B=0;B<J;B++)if(la[B].visible&&la[B].tooltipPoints.length)a=la[B].tooltipPoints[q],a._dist=Y(q-a.plotX),t=Da(t,a._dist),i.push(a);for(J=i.length;J--;)i[J]._dist>t&&i.splice(J,1);if(i.length&&i[0].plotX!=Ob)rb.refresh(i), Ob=i[0].plotX}b&&b.tracker&&(a=b.tooltipPoints[q])&&a!=s&&a.onMouseOver()}return(z=g)||!jb}};I.onmousemove=g;va(I,"mouseleave",c);I.ontouchstart=function(d){if(m||o)I.onmousedown(d);g(d)};I.ontouchmove=g;I.ontouchend=function(){F&&c()};I.onclick=function(f){var c=d.hoverPoint,f=p(f);f.cancelBubble=!0;if(!F)if(c&&h(f.target,"isTracker")){var s=c.plotX,e=c.plotY;a(c,{pageX:qb.left+O+(qa?oa-e:s),pageY:qb.top+T+(qa?ea-s:e)});ta(c.series,"click",a(f,{point:c}));c.firePointEvent("click",f)}else a(f,b(f)), ib(f.chartX-O,f.chartY-T)&&ta(d,"click",f);F=!1}})();jc=setInterval(function(){Nb&&Nb()},32);a(this,{zoomX:m,zoomY:o,resetTracker:c})}function G(d){var a=d.type||D.type||D.defaultSeriesType,f=Pa[a],p=u.hasRendered;if(p)if(qa&&a=="column")f=Pa.bar;else if(!qa&&a=="bar")f=Pa.column;a=new f;a.init(u,d);!p&&a.inverted&&(qa=!0);if(a.isCartesian)jb=a.isCartesian;la.push(a);return a}function J(){D.alignTicks!==!1&&y(wa,function(d){d.adjustTickAmount()});Xa=null}function n(d){var a=u.isDirtyLegend,f,p=u.isDirtyBox, b=la.length,c=b,s=u.clipRect;for(q(d,u);c--;)if(d=la[c],d.isDirty&&d.options.stacking){f=!0;break}if(f)for(c=b;c--;)if(d=la[c],d.options.stacking)d.isDirty=!0;y(la,function(d){d.isDirty&&(d.cleanData(),d.getSegments(),d.options.legendType=="point"&&(a=!0))});if(a&&Rb.renderLegend)Rb.renderLegend(),u.isDirtyLegend=!1;jb&&(Db||(Xa=null,y(wa,function(d){d.setScale()})),J(),sb(),y(wa,function(d){if(d.isDirty||p)d.redraw(),p=!0}));p&&(Sb(),Bb(),s&&(Eb(s),s.animate({width:u.plotSizeX,height:u.plotSizeY}))); y(la,function(d){d.isDirty&&d.visible&&(!d.isCartesian||d.xAxis)&&d.redraw()});hb&&hb.resetTracker&&hb.resetTracker();ta(u,"redraw")}function B(){var a=d.xAxis||{},p=d.yAxis||{},b,a=o(a);y(a,function(d,a){d.index=a;d.isX=!0});p=o(p);y(p,function(d,a){d.index=a});wa=a.concat(p);u.xAxis=[];u.yAxis=[];wa=kb(wa,function(d){b=new f(u,d);u[b.isXAxis?"xAxis":"yAxis"].push(b);return b});J()}function R(a,f){Z=ia(d.title,a);da=ia(d.subtitle,f);y([["title",a,Z],["subtitle",f,da]],function(d){var a=d[0],f=u[a], p=d[1],d=d[2];f&&p&&(f.destroy(),f=null);d&&d.text&&!f&&(u[a]=S.text(d.text,0,0).attr({align:d.align,"class":"highcharts-"+a,zIndex:1}).css(d.style).add().align(d,!1,P))})}function K(){ra=D.renderTo;sa=db+Qa++;c(ra)&&(ra=A.getElementById(ra));ra.innerHTML="";ra.offsetWidth||(ka=ra.cloneNode(0),l(ka,{position:lb,top:"-9999px",display:""}),A.body.appendChild(ka));La=(ka||ra).offsetWidth;Ta=(ka||ra).offsetHeight;u.chartWidth=Aa=D.width||La||600;u.chartHeight=ua=D.height||(Ta>19?Ta:400);u.container=I= t($a,{className:"highcharts-container"+(D.className?" "+D.className:""),id:sa},a({position:kc,overflow:Ra,width:Aa+Ea,height:ua+Ea,textAlign:"left"},D.style),ka||ra);u.renderer=S=D.renderer=="SVG"?new Fb(I,Aa,ua):new lc(I,Aa,ua);var d,f;/Firefox/.test(U)&&I.getBoundingClientRect&&(d=function(){l(I,{left:0,top:0});f=I.getBoundingClientRect();l(I,{left:-f.left%1+Ea,top:-f.top%1+Ea})},d(),va(x,"resize",d),va(u,"destroy",function(){Va(x,"resize",d)}))}function w(){function d(){var f=D.width||ra.offsetWidth, p=D.height||ra.offsetHeight;if(f&&p){if(f!=La||p!=Ta)clearTimeout(a),a=setTimeout(function(){Tb(f,p,!1)},100);La=f;Ta=p}}var a;va(window,"resize",d);va(u,"destroy",function(){Va(window,"resize",d)})}function Ba(){var f=d.labels,p=d.credits,c;R();Rb=u.legend=new dc(u);sb();y(wa,function(d){d.setTickPositions(!0)});J();sb();Sb();jb&&y(wa,function(d){d.render()});if(!u.seriesGroup)u.seriesGroup=S.g("series-group").attr({zIndex:3}).add();y(la,function(d){d.translate();d.setTooltipPoints();d.render()}); f.items&&y(f.items,function(){var d=a(f.style,this.style),p=b(d.left)+O,c=b(d.top)+T+12;delete d.left;delete d.top;S.text(this.html,p,c).attr({zIndex:2}).css(d).add()});if(!u.toolbar)u.toolbar=s(u);if(p.enabled&&!u.credits)c=p.href,S.text(p.text,0,0).on("click",function(){if(c)location.href=c}).attr({align:p.position.align,zIndex:8}).css(p.style).add().align(p.position);Bb();u.hasRendered=!0;ka&&(ra.appendChild(I),aa(ka))}function E(){var d=la.length,a=I&&I.parentNode;ta(u,"destroy");Va(x,"unload", E);Va(u);for(y(wa,function(d){Va(d)});d--;)la[d].destroy();I.innerHTML="";Va(I);a&&a.removeChild(I);I=null;S.alignedObjects=null;clearInterval(jc);for(d in u)delete u[d]}function nb(){!ca&&!x.parent&&A.readyState!="complete"?A.attachEvent("onreadystatechange",function(){A.detachEvent("onreadystatechange",nb);nb()}):(K(),Vb(),Wb(),y(d.series||[],function(d){G(d)}),u.inverted=qa=j(qa,d.chart.inverted),B(),u.render=Ba,u.tracker=hb=new g(u,d.tooltip),Ba(),ta(u,"load"),p&&p.apply(u,[u]),y(u.callbacks, function(d){d.apply(u,[u])}))}zb=ia(zb,za.xAxis);Mb=ia(Mb,za.yAxis);za.xAxis=za.yAxis=null;var d=ia(za,d),D=d.chart,na=D.margin,na=e(na)?na:[na,na,na,na],eb=j(D.marginTop,na[0]),ob=j(D.marginRight,na[1]),L=j(D.marginBottom,na[2]),M=j(D.marginLeft,na[3]),Q=D.spacingTop,Ja=D.spacingRight,Ka=D.spacingBottom,W=D.spacingLeft,P,Z,da,T,ja,ga,O,pa,ra,ka,I,sa,La,Ta,Aa,ua,cb,Za,Xb,Yb,Zb,$b,u=this,ub=(na=D.events)&&!!na.click,ac,ib,rb,Qb,fb,tb,bc,ea,oa,hb,Cb,Bb,Rb,ab,bb,qb,jb=D.showAxes,Db=0,wa=[],Xa,la=[], qa,S,Nb,jc,Ob,Sb,sb,Vb,Wb,Tb,Pb,nc,dc=function(d){function f(d,a){var p=d.legendItem,b=d.legendLine,c=d.legendSymbol,s=o.color,h=a?e.itemStyle.color:s,s=a?d.color:s;p&&p.css({fill:h});b&&b.attr({stroke:s});c&&c.attr({stroke:s,fill:s})}function p(d,a,f){var b=d.legendItem,c=d.legendLine,s=d.legendSymbol,d=d.checkbox;b&&b.attr({x:a,y:f});c&&c.translate(a,f-4);s&&s.attr({x:a+s.xOff,y:f+s.yOff});if(d)d.x=a,d.y=f}function c(){y(F,function(d){var a=d.checkbox;a&&l(a,{left:v.attr("translateX")+d.legendItemWidth+ a.x-40+Ea,top:v.attr("translateY")+a.y-11+Ea})})}function s(d){var a,b,c,h,G,l=d.legendItem;h=d.series||d;if(!l){G=/^(bar|pie|area|column)$/.test(h.type);d.legendItem=l=S.text(e.labelFormatter.call(d),0,0).css(d.visible?i:o).on("mouseover",function(){d.setState(Sa);l.css(m)}).on("mouseout",function(){l.css(d.visible?i:o);d.setState()}).on("click",function(){var a=function(){d.setVisible()};d.firePointEvent?d.firePointEvent("legendItemClick",null,a):ta(d,"legendItemClick",null,a)}).attr({zIndex:2}).add(v); if(!G&&d.options&&d.options.lineWidth){var B=d.options;h={"stroke-width":B.lineWidth,zIndex:2};if(B.dashStyle)h.dashstyle=B.dashStyle;d.legendLine=S.path([Ca,-z-g,0,ma,-g,0]).attr(h).add(v)}G?a=S.rect(b=-z-g,c=-11,z,12,2).attr({"stroke-width":0,zIndex:3}).add(v):d.options&&d.options.marker&&d.options.marker.enabled&&(a=S.symbol(d.symbol,b=-z/2-g,c=-4,d.options.marker.radius).attr(d.pointAttr[xa]).attr({zIndex:3}).add(v));if(a)a.xOff=b,a.yOff=c;d.legendSymbol=a;f(d,d.visible);if(d.options&&d.options.showCheckbox)d.checkbox= t("input",{type:"checkbox",checked:d.selected,defaultChecked:d.selected},e.itemCheckboxStyle,I),va(d.checkbox,"click",function(a){ta(d,"checkboxClick",{checked:a.target.checked},function(){d.select()})})}a=l.getBBox();b=d.legendItemWidth=e.itemWidth||z+g+a.width+J;C=a.height;if(j&&fa-q+b>(na||Aa-2*n-q))fa=q,R+=C;u=R;p(d,fa,R);j?fa+=b:R+=C;Wa=na||H(j?fa-q:b,Wa);F.push(d)}function h(){fa=q;R=B;u=Wa=0;F=[];v||(v=S.g("legend").attr({zIndex:7}).add());ca&&x.reverse();y(x,function(d){d.options.showInLegend&& y(d.options.legendType=="point"?d.data:[d],s)});ca&&x.reverse();ab=na||Wa;bb=u-B+C;if(K||w)ab+=2*n,bb+=2*n,D?ab>0&&bb>0&&D.animate({width:ab,height:bb}):D=S.rect(0,0,ab,bb,e.borderRadius,K||0).attr({stroke:e.borderColor,"stroke-width":K||0,fill:w||Na}).add(v).shadow(e.shadow),D[F.length?"show":"hide"]();for(var d=["left","right","top","bottom"],f,p=4;p--;)f=d[p],G[f]&&G[f]!="auto"&&(e[p<2?"align":"verticalAlign"]=f,e[p<2?"x":"y"]=b(G[f])*(p%2?-1:1));v.align(a(e,{width:ab,height:bb}),!0,P);Db||c()} var e=d.options.legend;if(e.enabled){var j=e.layout=="horizontal",z=e.symbolWidth,g=e.symbolPadding,F,G=e.style,i=e.itemStyle,m=e.itemHoverStyle,o=e.itemHiddenStyle,n=b(G.padding),J=20,B=18,q=4+n+z+g,fa,R,u,C=0,D,K=e.borderWidth,w=e.backgroundColor,v,Wa,na=e.width,x=d.series,ca=e.reversed;h();va(d,"endResize",c);return{colorizeItem:f,destroyItem:function(d){var a=d.checkbox;y(["legendItem","legendLine","legendSymbol"],function(a){d[a]&&d[a].destroy()});a&&aa(d.checkbox)},renderLegend:h}}};ib=function(d, a){return d>=0&&d<=oa&&a>=0&&a<=ea};nc=function(){ta(u,"selection",{resetSelection:!0},Pb);u.toolbar.remove("zoom")};Pb=function(d){var a=za.lang,f=u.pointCount<100;u.toolbar.add("zoom",a.resetZoom,a.resetZoomTitle,nc);!d||d.resetSelection?y(wa,function(d){d.setExtremes(null,null,!1,f)}):y(d.xAxis.concat(d.yAxis),function(d){var a=d.axis;u.tracker[a.isXAxis?"zoomX":"zoomY"]&&a.setExtremes(d.min,d.max,!1,f)});n()};sb=function(){var a=d.legend,f=j(a.margin,10),p=a.x,b=a.y,c=a.align,s=a.verticalAlign, h;Vb();if((u.title||u.subtitle)&&!m(eb))if(h=H(u.title&&!Z.floating&&!Z.verticalAlign&&Z.y||0,u.subtitle&&!da.floating&&!da.verticalAlign&&da.y||0))T=H(T,h+j(Z.margin,15)+Q);a.enabled&&!a.floating&&(c=="right"?m(ob)||(ja=H(ja,ab-p+f+Ja)):c=="left"?m(M)||(O=H(O,ab+p+f+W)):s=="top"?m(eb)||(T=H(T,bb+b+f+Q)):s=="bottom"&&(m(L)||(ga=H(ga,bb-b+f+Ka))));jb&&y(wa,function(d){d.getOffset()});m(M)||(O+=pa[3]);m(eb)||(T+=pa[0]);m(L)||(ga+=pa[2]);m(ob)||(ja+=pa[1]);Wb()};Tb=function(d,a,f){var p=u.title,b=u.subtitle; Db+=1;q(f,u);Za=ua;cb=Aa;Aa=v(d);ua=v(a);l(I,{width:Aa+Ea,height:ua+Ea});S.setSize(Aa,ua,f);oa=Aa-O-ja;ea=ua-T-ga;Xa=null;y(wa,function(d){d.isDirty=!0;d.setScale()});y(la,function(d){d.isDirty=!0});u.isDirtyLegend=!0;u.isDirtyBox=!0;sb();p&&p.align(null,null,P);b&&b.align(null,null,P);n(f);Za=null;ta(u,"resize");setTimeout(function(){ta(u,"endResize",null,function(){Db-=1})},vb&&vb.duration||500)};Wb=function(){u.plotLeft=O=v(O);u.plotTop=T=v(T);u.plotWidth=oa=v(Aa-O-ja);u.plotHeight=ea=v(ua-T-ga); u.plotSizeX=qa?ea:oa;u.plotSizeY=qa?oa:ea;P={x:W,y:Q,width:Aa-W-Ja,height:ua-Q-Ka}};Vb=function(){T=j(eb,Q);ja=j(ob,Ja);ga=j(L,Ka);O=j(M,W);pa=[0,0,0,0]};Sb=function(){var d=D.borderWidth||0,a=D.backgroundColor,f=D.plotBackgroundColor,p=D.plotBackgroundImage,b,c={x:O,y:T,width:oa,height:ea};b=d+(D.shadow?8:0);if(d||a)Xb?Xb.animate({width:Aa-b,height:ua-b}):Xb=S.rect(b/2,b/2,Aa-b,ua-b,D.borderRadius,d).attr({stroke:D.borderColor,"stroke-width":d,fill:a||Na}).add().shadow(D.shadow);f&&(Yb?Yb.animate(c): Yb=S.rect(O,T,oa,ea,0).attr({fill:f}).add().shadow(D.plotShadow));p&&(Zb?Zb.animate(c):Zb=S.image(p,O,T,oa,ea).add());D.plotBorderWidth&&($b?$b.animate(c):$b=S.rect(O,T,oa,ea,0,D.plotBorderWidth).attr({stroke:D.plotBorderColor,"stroke-width":D.plotBorderWidth,zIndex:4}).add());u.isDirtyBox=!1};Ya=Ia=0;va(x,"unload",E);D.reflow!==!1&&va(u,"load",w);if(na)for(ac in na)va(u,ac,na[ac]);u.options=d;u.series=la;u.addSeries=function(d,a,f){var p;d&&(q(f,u),a=j(a,!0),ta(u,"addSeries",{options:d},function(){p= G(d);p.isDirty=!0;u.isDirtyLegend=!0;a&&u.redraw()}));return p};u.animation=j(D.animation,!0);u.destroy=E;u.get=function(d){var a,f,p;for(a=0;a<wa.length;a++)if(wa[a].options.id==d)return wa[a];for(a=0;a<la.length;a++)if(la[a].options.id==d)return la[a];for(a=0;a<la.length;a++){p=la[a].data;for(f=0;f<p.length;f++)if(p[f].id==d)return p[f]}return null};u.getSelectedPoints=function(){var d=[];y(la,function(a){d=d.concat(cc(a.data,function(d){return d.selected}))});return d};u.getSelectedSeries=function(){return cc(la, function(d){return d.selected})};u.hideLoading=function(){Hb(fb,{opacity:0},{duration:d.loading.hideDuration,complete:function(){l(fb,{display:Na})}});bc=!1};u.isInsidePlot=ib;u.redraw=n;u.setSize=Tb;u.setTitle=R;u.showLoading=function(f){var p=d.loading;fb||(fb=t($a,{className:"highcharts-loading"},a(p.style,{left:O+Ea,top:T+Ea,width:oa+Ea,height:ea+Ea,zIndex:10,display:Na}),I),tb=t("span",null,p.labelStyle,fb));tb.innerHTML=f||d.lang.loading;bc||(l(fb,{opacity:0,display:""}),Hb(fb,{opacity:p.style.opacity}, {duration:p.showDuration}),bc=!0)};u.pointCount=0;nb()}var A=document,x=window,N=Math,v=N.round,ha=N.floor,gb=N.ceil,H=N.max,Da=N.min,Y=N.abs,Z=N.cos,da=N.sin,P=N.PI,L=P*2/360,U=navigator.userAgent,C=/msie/i.test(U)&&!x.opera,K=A.documentMode==8,Ba=/AppleWebKit/.test(U),ca=x.SVGAngle||A.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),Ha="ontouchstart"in A.documentElement,Ia,Ya,Ja={},Qa=0,Oa=1,Ka,za,Ab,vb,cb,ya,$a="div",lb="absolute",kc="relative",Ra="hidden",db= "highcharts-",Ua="visible",Ea="px",Na="none",Ca="M",ma="L",tb="rgba(192,192,192,"+(ca?1.0E-6:0.002)+")",xa="",Sa="hover",wb,Ib,Jb,Kb,pb,xb,yb,ec,fc,Lb,gc,hc,ja=x.HighchartsAdapter,sa=ja||{},y=sa.each,cc=sa.grep,kb=sa.map,ia=sa.merge,ub=sa.hyphenate,va=sa.addEvent,Va=sa.removeEvent,ta=sa.fireEvent,Hb=sa.animate,Eb=sa.stop,Pa={};ja&&ja.init&&ja.init();if(!ja&&x.jQuery){var ga=jQuery,y=function(d,a){for(var f=0,b=d.length;f<b;f++)if(a.call(d[f],d[f],f,d)===!1)return f},cc=ga.grep,kb=function(d,a){for(var f= [],b=0,c=d.length;b<c;b++)f[b]=a.call(d[b],d[b],b,d);return f},ia=function(){var d=arguments;return ga.extend(!0,null,d[0],d[1],d[2],d[3])},ub=function(d){return d.replace(/([A-Z])/g,function(d,a){return"-"+a.toLowerCase()})},va=function(d,a,f){ga(d).bind(a,f)},Va=function(d,a,f){var b=A.removeEventListener?"removeEventListener":"detachEvent";A[b]&&!d[b]&&(d[b]=function(){});ga(d).unbind(a,f)},ta=function(d,p,f,b){var c=ga.Event(p),h="detached"+p;a(c,f);d[p]&&(d[h]=d[p],d[p]=null);ga(d).trigger(c); d[h]&&(d[p]=d[h],d[h]=null);b&&!c.isDefaultPrevented()&&b(c)},Hb=function(d,a,f){var b=ga(d);if(a.d)d.toD=a.d,a.d=1;b.stop();b.animate(a,f)},Eb=function(d){ga(d).stop()};ga.extend(ga.easing,{easeOutQuad:function(d,a,f,b,c){return-b*(a/=c)*(a-2)+f}});var dc=jQuery.fx.step._default,rc=jQuery.fx.prototype.cur;ga.fx.step._default=function(d){var a=d.elem;a.attr?a.attr(d.prop,d.now):dc.apply(this,arguments)};ga.fx.step.d=function(d){var a=d.elem;if(!d.started){var f=cb.init(a,a.d,a.toD);d.start=f[0];d.end= f[1];d.started=!0}a.attr("d",cb.step(d.start,d.end,d.pos,a.toD))};ga.fx.prototype.cur=function(){var d=this.elem;return d.attr?d.attr(this.prop):rc.apply(this,arguments)}}cb={init:function(d,a,f){var a=a||"",b=d.shift,c=a.indexOf("C")>-1,h=c?7:3,e,a=a.split(" "),f=[].concat(f),j,g,i=function(d){for(e=d.length;e--;)d[e]==Ca&&d.splice(e+1,0,d[e+1],d[e+2],d[e+1],d[e+2])};c&&(i(a),i(f));d.isArea&&(j=a.splice(a.length-6,6),g=f.splice(f.length-6,6));if(b)f=[].concat(f).splice(0,h).concat(f),d.shift=!1; if(a.length)for(d=f.length;a.length<d;)b=[].concat(a).splice(a.length-h,h),c&&(b[h-6]=b[h-2],b[h-5]=b[h-1]),a=a.concat(b);j&&(a=a.concat(j),f=f.concat(g));return[a,f]},step:function(d,a,f,b){var c=[],h=d.length;if(f==1)c=b;else if(h==a.length&&f<1)for(;h--;)b=parseFloat(d[h]),c[h]=isNaN(b)?d[h]:f*parseFloat(a[h]-b)+b;else c=a;return c}};ja={enabled:!0,align:"center",x:0,y:15,style:{color:"#666",fontSize:"11px",lineHeight:"14px"}};za={colors:"#4572A7,#AA4643,#89A54E,#80699B,#3D96AE,#DB843D,#92A8CD,#A47D7C,#B5CA92".split(","), symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),decimalPoint:".",resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0},chart:{borderColor:"#4572A7",borderRadius:5,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacingTop:10,spacingRight:10, spacingBottom:15,spacingLeft:10,style:{fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif',fontSize:"12px"},backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0"},title:{text:"Chart title",align:"center",y:15,style:{color:"#3E576F",fontSize:"16px"}},subtitle:{text:"",align:"center",y:30,style:{color:"#6D869F"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1E3},events:{},lineWidth:2,shadow:!0,marker:{enabled:!0,lineWidth:0,radius:4, lineColor:"#FFFFFF",states:{hover:{},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:ia(ja,{enabled:!1,y:-6,formatter:function(){return this.y}}),showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0}},labels:{style:{position:lb,color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderWidth:1,borderColor:"#909090",borderRadius:5,shadow:!1,style:{padding:"5px"},itemStyle:{cursor:"pointer", color:"#3E576F"},itemHoverStyle:{cursor:"pointer",color:"#000000"},itemHiddenStyle:{color:"#C0C0C0"},itemCheckboxStyle:{position:lb,width:"13px",height:"13px"},symbolWidth:16,symbolPadding:5,verticalAlign:"bottom",x:0,y:0},loading:{hideDuration:100,labelStyle:{fontWeight:"bold",position:kc,top:"1em"},showDuration:100,style:{position:lb,backgroundColor:"white",opacity:0.5,textAlign:"center"}},tooltip:{enabled:!0,backgroundColor:"rgba(255, 255, 255, .85)",borderWidth:2,borderRadius:5,shadow:!0,snap:Ha? 25:10,style:{color:"#333333",fontSize:"12px",padding:"5px",whiteSpace:"nowrap"}},toolbar:{itemStyle:{color:"#4572A7",cursor:"pointer"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"10px"}}};var zb={dateTimeLabelFormats:{second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#C0C0C0",labels:ja, lineColor:"#C0D0E0",lineWidth:1,max:null,min:null,minPadding:0.01,maxPadding:0.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:5,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#6D869F",fontWeight:"bold"}},type:"linear"},Mb=ia(zb,{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0, labels:{align:"right",x:-8,y:3},lineWidth:0,maxPadding:0.05,minPadding:0.05,startOnTick:!0,tickWidth:0,title:{rotation:270,text:"Y-values"}}),qc={labels:{align:"right",x:-8,y:null},title:{rotation:270}},pc={labels:{align:"left",x:8,y:null},title:{rotation:90}},ic={labels:{align:"center",x:0,y:14},title:{rotation:0}},oc=ia(ic,{labels:{y:-5}}),ka=za.plotOptions,ja=ka.line;ka.spline=ia(ja);ka.scatter=ia(ja,{lineWidth:0,states:{hover:{lineWidth:0}}});ka.area=ia(ja,{});ka.areaspline=ia(ka.area);ka.column= ia(ja,{borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:0.2,marker:null,pointPadding:0.1,minPointLength:0,states:{hover:{brightness:0.1,shadow:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}}});ka.bar=ia(ka.column,{dataLabels:{align:"left",x:5,y:0}});ka.pie=ia(ja,{borderColor:"#FFFFFF",borderWidth:1,center:["50%","50%"],colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.name},y:5},legendType:"point",marker:null,size:"75%",showInLegend:!1, slicedOffset:10,states:{hover:{brightness:0.1,shadow:!1}}});w();var La=function(d){var a=[],f;(function(d){if(f=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/.exec(d))a=[b(f[1]),b(f[2]),b(f[3]),parseFloat(f[4],10)];else if(f=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(d))a=[b(f[1],16),b(f[2],16),b(f[3],16),1]})(d);return{get:function(f){return a&&!isNaN(a[0])?f=="rgb"?"rgb("+a[0]+","+a[1]+","+a[2]+")":f=="a"?a[3]:"rgba("+a.join(",")+")": d},brighten:function(d){if(g(d)&&d!==0){var f;for(f=0;f<3;f++)a[f]+=b(d*255),a[f]<0&&(a[f]=0),a[f]>255&&(a[f]=255)}return this},setOpacity:function(d){a[3]=d;return this}}};Ab=function(d,a,f){function b(d){return d.toString().replace(/^([0-9])$/,"0$1")}if(!m(a)||isNaN(a))return"Invalid date";var d=j(d,"%Y-%m-%d %H:%M:%S"),a=new Date(a*Oa),c=a[Jb](),h=a[Kb](),e=a[pb](),g=a[xb](),i=a[yb](),o=za.lang,l=o.weekdays,o=o.months,a={a:l[h].substr(0,3),A:l[h],d:b(e),e:e,b:o[g].substr(0,3),B:o[g],m:b(g+1),y:i.toString().substr(2, 2),Y:i,H:b(c),I:b(c%12||12),l:c%12||12,M:b(a[Ib]()),p:c<12?"AM":"PM",P:c<12?"am":"pm",S:b(a.getSeconds())},n;for(n in a)d=d.replace("%"+n,a[n]);return f?d.substr(0,1).toUpperCase()+d.substr(1):d};M.prototype={init:function(d,a){this.element=A.createElementNS("http://www.w3.org/2000/svg",a);this.renderer=d},animate:function(d,a,f){if(a=j(a,vb,!0)){a=ia(a);if(f)a.complete=f;Hb(this,d,a)}else this.attr(d),f&&f()},attr:function(d,a){var f,s,e,j,g=this.element,i=g.nodeName,o=this.renderer,l,n=this.shadows, q,t=this;c(d)&&m(a)&&(f=d,d={},d[f]=a);if(c(d))f=d,i=="circle"?f={x:"cx",y:"cy"}[f]||f:f=="strokeWidth"&&(f="stroke-width"),t=h(g,f)||this[f]||0,f!="d"&&f!="visibility"&&(t=parseFloat(t));else for(f in d){l=!1;s=d[f];if(f=="d")s&&s.join&&(s=s.join(" ")),/(NaN| {2}|^$)/.test(s)&&(s="M 0 0"),this.d=s;else if(f=="x"&&i=="text"){for(e=0;e<g.childNodes.length;e++)j=g.childNodes[e],h(j,"x")==h(g,"x")&&h(j,"x",s);this.rotation&&h(g,"transform","rotate("+this.rotation+" "+s+" "+b(d.y||h(g,"y"))+")")}else if(f== "fill")s=o.color(s,g,f);else if(i=="circle"&&(f=="x"||f=="y"))f={x:"cx",y:"cy"}[f]||f;else if(f=="translateX"||f=="translateY"||f=="rotation"||f=="verticalAlign")this[f]=s,this.updateTransform(),l=!0;else if(f=="stroke")s=o.color(s,g,f);else if(f=="dashstyle"){if(f="stroke-dasharray",s){s=s.toLowerCase().replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash", "4,3,").replace(/,$/,"").split(",");for(e=s.length;e--;)s[e]=b(s[e])*d["stroke-width"];s=s.join(",")}}else f=="isTracker"?this[f]=s:f=="width"?s=b(s):f=="align"&&(f="text-anchor",s={left:"start",center:"middle",right:"end"}[s]);f=="strokeWidth"&&(f="stroke-width");Ba&&f=="stroke-width"&&s===0&&(s=1.0E-6);this.symbolName&&/^(x|y|r|start|end|innerR)/.test(f)&&(q||(this.symbolAttr(d),q=!0),l=!0);if(n&&/^(width|height|visibility|x|y|d)$/.test(f))for(e=n.length;e--;)h(n[e],f,s);f=="text"?(this.textStr= s,o.buildText(this)):l||h(g,f,s)}return t},symbolAttr:function(d){this.x=j(d.x,this.x);this.y=j(d.y,this.y);this.r=j(d.r,this.r);this.start=j(d.start,this.start);this.end=j(d.end,this.end);this.width=j(d.width,this.width);this.height=j(d.height,this.height);this.innerR=j(d.innerR,this.innerR);this.attr({d:this.renderer.symbols[this.symbolName](this.x,this.y,this.r,{start:this.start,end:this.end,width:this.width,height:this.height,innerR:this.innerR})})},clip:function(d){return this.attr("clip-path", "url("+this.renderer.url+"#"+d.id+")")},css:function(d){var b=this.element;if(d&&d.color)d.fill=d.color;d=a(this.styles,d);C&&!ca?l(this.element,d):this.attr({style:n(d)});this.styles=d;d.width&&b.nodeName=="text"&&this.added&&this.renderer.buildText(this);return this},on:function(d,a){var f=a;Ha&&d=="click"&&(d="touchstart",f=function(d){d.preventDefault();a()});this.element["on"+d]=f;return this},translate:function(d,a){return this.attr({translateX:d,translateY:a})},invert:function(){this.inverted= !0;this.updateTransform();return this},updateTransform:function(){var d=this.translateX||0,a=this.translateY||0,f=this.inverted,b=this.rotation,c=[];f&&(d+=this.attr("width"),a+=this.attr("height"));(d||a)&&c.push("translate("+d+","+a+")");f?c.push("rotate(90) scale(-1,1)"):b&&c.push("rotate("+b+" "+this.x+" "+this.y+")");c.length&&h(this.element,"transform",c.join(" "))},toFront:function(){var d=this.element;d.parentNode.appendChild(d);return this},align:function(d,a,f){d?(this.alignOptions=d,this.alignByTranslate= a,f||this.renderer.alignedObjects.push(this)):(d=this.alignOptions,a=this.alignByTranslate);var f=j(f,this.renderer),b=d.align,c=d.verticalAlign,h=(f.x||0)+(d.x||0),e=(f.y||0)+(d.y||0),g={};/^(right|center)$/.test(b)&&(h+=(f.width-(d.width||0))/{right:1,center:2}[b]);g[a?"translateX":"x"]=h;/^(bottom|middle)$/.test(c)&&(e+=(f.height-(d.height||0))/({bottom:1,middle:2}[c]||1));g[a?"translateY":"y"]=e;this[this.placed?"animate":"attr"](g);this.placed=!0;return this},getBBox:function(){var d,b,f,c=this.rotation, h=c*L;try{d=a({},this.element.getBBox())}catch(e){d={width:0,height:0}}b=d.width;f=d.height;if(c)d.width=Y(f*da(h))+Y(b*Z(h)),d.height=Y(f*Z(h))+Y(b*da(h));return d},show:function(){return this.attr({visibility:Ua})},hide:function(){return this.attr({visibility:Ra})},add:function(d){var a=this.renderer,f=d||a,c=f.element||a.box,e=c.childNodes,j=this.element,g=h(j,"zIndex"),i=this.textStr,o;this.parentInverted=d&&d.inverted;if(g)f.handleZ=!0,g=b(g);if(f.handleZ)for(o=0;o<e.length;o++)if(d=e[o],f=h(d, "zIndex"),d!=j&&(b(f)>g||!m(g)&&m(f)))return c.insertBefore(j,d),this;if(i!==void 0)a.buildText(this),this.added=!0;c.appendChild(j);return this},destroy:function(){var d=this.element||{},a=this.shadows,f=d.parentNode,b;d.onclick=d.onmouseout=d.onmouseover=d.onmousemove=null;Eb(this);f&&f.removeChild(d);a&&y(a,function(d){(f=d.parentNode)&&f.removeChild(d)});i(this.renderer.alignedObjects,this);for(b in this)delete this[b];return null},empty:function(){for(var d=this.element,a=d.childNodes,f=a.length;f--;)d.removeChild(a[f])}, shadow:function(d){var a=[],f,b=this.element,c=this.parentInverted?"(-1,-1)":"(1,1)";if(d){for(d=1;d<=3;d++)f=b.cloneNode(0),h(f,{isShadow:"true",stroke:"rgb(0, 0, 0)","stroke-opacity":0.05*d,"stroke-width":7-2*d,transform:"translate"+c,fill:Na}),b.parentNode.insertBefore(f,b),a.push(f);this.shadows=a}return this}};var Fb=function(){this.init.apply(this,arguments)};Fb.prototype={init:function(d,a,f){var b=location,c;this.Element=M;c=this.createElement("svg").attr({xmlns:"http://www.w3.org/2000/svg", version:"1.1"});d.appendChild(c.element);this.box=c.element;this.boxWrapper=c;this.alignedObjects=[];this.url=C?"":b.href.replace(/#.*?$/,"");this.defs=this.createElement("defs").add();this.setSize(a,f,!1)},createElement:function(d){var a=new this.Element;a.init(this,d);return a},buildText:function(d){for(var a=d.element,f=j(d.textStr,"").toString().replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g, "</span>").split(/<br[^>]?>/g),c=a.childNodes,e=/style="([^"]+)"/,g=/href="([^"]+)"/,i=h(a,"x"),m=(d=d.styles)&&b(d.width),o=d&&d.lineHeight,n,d=c.length;d--;)a.removeChild(c[d]);m&&this.box.appendChild(a);y(f,function(d,f){var c,s=0,j,d=d.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||");c=d.split("|||");y(c,function(d){if(d!==""||c.length==1){var q={},t=A.createElementNS("http://www.w3.org/2000/svg","tspan");e.test(d)&&h(t,"style",d.match(e)[1].replace(/(;| |^)color([ :])/,"$1fill$2")); g.test(d)&&(h(t,"onclick",'location.href="'+d.match(g)[1]+'"'),l(t,{cursor:"pointer"}));d=d.replace(/<(.|\n)*?>/g,"")||" ";t.appendChild(A.createTextNode(d));s?q.dx=3:q.x=i;s||(f&&(j=b(window.getComputedStyle(n,null).getPropertyValue("line-height")),isNaN(j)&&(j=o||n.offsetHeight||18),h(t,"dy",j)),n=t);h(t,q);a.appendChild(t);s++;if(m)for(var d=d.replace(/-/g,"- ").split(" "),R,C=[];d.length||C.length;)R=a.getBBox().width,q=R>m,!q||d.length==1?(d=C,C=[],t=A.createElementNS("http://www.w3.org/2000/svg", "tspan"),h(t,{x:i,dy:o||16}),a.appendChild(t),R>m&&(m=R)):(t.removeChild(t.firstChild),C.unshift(d.pop())),t.appendChild(A.createTextNode(d.join(" ").replace(/- /g,"-")))}})})},crispLine:function(d,a){d[1]==d[4]&&(d[1]=d[4]=v(d[1])+a%2/2);d[2]==d[5]&&(d[2]=d[5]=v(d[2])+a%2/2);return d},path:function(d){return this.createElement("path").attr({d:d,fill:Na})},circle:function(d,a,f){d=e(d)?d:{x:d,y:a,r:f};return this.createElement("circle").attr(d)},arc:function(d,a,f,b,c,h){if(e(d))a=d.y,f=d.r,b=d.innerR, c=d.start,h=d.end,d=d.x;return this.symbol("arc",d||0,a||0,f||0,{innerR:b||0,start:c||0,end:h||0})},rect:function(d,b,f,c,h,j){if(arguments.length>1)var g=(j||0)%2/2,d=v(d||0)+g,b=v(b||0)+g,f=v((f||0)-2*g),c=v((c||0)-2*g);g=e(d)?d:{x:d,y:b,width:H(f,0),height:H(c,0)};return this.createElement("rect").attr(a(g,{rx:h||g.r,ry:h||g.r,fill:Na}))},setSize:function(d,a,f){var b=this.alignedObjects,c=b.length;this.width=d;this.height=a;for(this.boxWrapper[j(f,!0)?"animate":"attr"]({width:d,height:a});c--;)b[c].align()}, g:function(d){return this.createElement("g").attr(m(d)&&{"class":db+d})},image:function(d,b,f,c,h){var e={preserveAspectRatio:Na};arguments.length>1&&a(e,{x:b,y:f,width:c,height:h});e=this.createElement("image").attr(e);e.element.setAttributeNS("http://www.w3.org/1999/xlink","href",d);return e},symbol:function(d,b,f,c,h){var e,j=this.symbols[d],j=j&&j(b,f,c,h),g=/^url\((.*?)\)$/;j?(e=this.path(j),a(e,{symbolName:d,x:b,y:f,r:c}),h&&a(e,h)):g.test(d)?(d=d.match(g)[1],e=this.image(d).attr({x:b,y:f}), t("img",{onload:function(){var d=Ja[this.src]||[this.width,this.height];e.attr({width:d[0],height:d[1]}).translate(-v(d[0]/2),-v(d[1]/2))},src:d})):e=this.circle(b,f,c);return e},symbols:{square:function(d,a,f){f*=0.707;return[Ca,d-f,a-f,ma,d+f,a-f,d+f,a+f,d-f,a+f,"Z"]},triangle:function(d,a,f){return[Ca,d,a-1.33*f,ma,d+f,a+0.67*f,d-f,a+0.67*f,"Z"]},"triangle-down":function(d,a,f){return[Ca,d,a+1.33*f,ma,d-f,a-0.67*f,d+f,a-0.67*f,"Z"]},diamond:function(d,a,f){return[Ca,d,a-f,ma,d+f,a,d,a+f,d-f,a, "Z"]},arc:function(d,a,f,b){var c=b.start,h=b.end-1.0E-6,e=b.innerR,j=Z(c),g=da(c),i=Z(h),h=da(h),b=b.end-c<P?0:1;return[Ca,d+f*j,a+f*g,"A",f,f,0,b,1,d+f*i,a+f*h,ma,d+e*i,a+e*h,"A",e,e,0,b,0,d+e*j,a+e*g,"Z"]}},clipRect:function(d,a,f,b){var c=db+Qa++,h=this.createElement("clipPath").attr({id:c}).add(this.defs),d=this.rect(d,a,f,b,0).add(h);d.id=c;return d},color:function(d,a,f){var b,c=/^rgba/;if(d&&d.linearGradient){var e=this,a=d.linearGradient,f=db+Qa++,j,g,i;j=e.createElement("linearGradient").attr({id:f, gradientUnits:"userSpaceOnUse",x1:a[0],y1:a[1],x2:a[2],y2:a[3]}).add(e.defs);y(d.stops,function(d){c.test(d[1])?(b=La(d[1]),g=b.get("rgb"),i=b.get("a")):(g=d[1],i=1);e.createElement("stop").attr({offset:d[0],"stop-color":g,"stop-opacity":i}).add(j)});return"url("+this.url+"#"+f+")"}else return c.test(d)?(b=La(d),h(a,f+"-opacity",b.get("a")),b.get("rgb")):d},text:function(d,a,f){var b=za.chart.style,a=v(j(a,0)),f=v(j(f,0)),d=this.createElement("text").attr({x:a,y:f,text:d}).css({"font-family":b.fontFamily, "font-size":b.fontSize});d.x=a;d.y=f;return d}};var W;if(!ca){var sc=E(M,{init:function(d,a){var f=["<",a,' filled="f" stroked="f"'],b=["position: ",lb,";"];(a=="shape"||a==$a)&&b.push("left:0;top:0;width:10px;height:10px;");K&&b.push("visibility: ",a==$a?Ra:Ua);f.push(' style="',b.join(""),'"/>');if(a)f=a==$a||a=="span"||a=="img"?f.join(""):d.prepVML(f),this.element=t(f);this.renderer=d},add:function(d){var a=this.renderer,f=this.element,b=a.box,b=d?d.element||d:b;d&&d.inverted&&a.invertChild(f, b);K&&b.gVis==Ra&&l(f,{visibility:Ra});b.appendChild(f);this.added=!0;this.alignOnAdd&&this.updateTransform();return this},attr:function(d,a){var f,b,e,j=this.element||{},i=j.style,o=j.nodeName,n=this.renderer,q=this.symbolName,R,C,w=this.shadows,y=this;c(d)&&m(a)&&(f=d,d={},d[f]=a);if(c(d))f=d,y=f=="strokeWidth"||f=="stroke-width"?this.strokeweight:this[f];else for(f in d){b=d[f];R=!1;if(q&&/^(x|y|r|start|end|width|height|innerR)/.test(f))C||(this.symbolAttr(d),C=!0),R=!0;else if(f=="d"){b=b||[]; this.d=b.join(" ");e=b.length;for(R=[];e--;)R[e]=g(b[e])?v(b[e]*10)-5:b[e]=="Z"?"x":b[e];b=R.join(" ")||"x";j.path=b;if(w)for(e=w.length;e--;)w[e].path=b;R=!0}else if(f=="zIndex"||f=="visibility"){if(K&&f=="visibility"&&o=="DIV"){j.gVis=b;R=j.childNodes;for(e=R.length;e--;)l(R[e],{visibility:b});b==Ua&&(b=null)}b&&(i[f]=b);R=!0}else if(/^(width|height)$/.test(f))this.updateClipping?(this[f]=b,this.updateClipping()):i[f]=b,R=!0;else if(/^(x|y)$/.test(f))this[f]=b,j.tagName=="SPAN"?this.updateTransform(): i[{x:"left",y:"top"}[f]]=b;else if(f=="class")j.className=b;else if(f=="stroke")b=n.color(b,j,f),f="strokecolor";else if(f=="stroke-width"||f=="strokeWidth")j.stroked=b?!0:!1,f="strokeweight",this[f]=b,g(b)&&(b+=Ea);else if(f=="dashstyle")(j.getElementsByTagName("stroke")[0]||t(n.prepVML(["<stroke/>"]),null,null,j))[f]=b||"solid",this.dashstyle=b,R=!0;else if(f=="fill")o=="SPAN"?i.color=b:(j.filled=b!=Na?!0:!1,b=n.color(b,j,f),f="fillcolor");else if(f=="translateX"||f=="translateY"||f=="rotation"|| f=="align")f=="align"&&(f="textAlign"),this[f]=b,this.updateTransform(),R=!0;else if(f=="text")j.innerHTML=b,R=!0;if(w&&f=="visibility")for(e=w.length;e--;)w[e].style[f]=b;R||(K?j[f]=b:h(j,f,b))}return y},clip:function(d){var a=this,b=d.members;b.push(a);a.destroyClip=function(){i(b,a)};return a.css(d.getCSS(a.inverted))},css:function(d){var b=this.element;(b=d&&d.width&&b.tagName=="SPAN")&&a(d,{display:"block",whiteSpace:"normal"});this.styles=a(this.styles,d);l(this.element,d);b&&this.updateTransform(); return this},destroy:function(){this.destroyClip&&this.destroyClip();M.prototype.destroy.apply(this)},empty:function(){for(var d=this.element.childNodes,a=d.length,b;a--;)b=d[a],b.parentNode.removeChild(b)},getBBox:function(){var d=this.element;if(d.nodeName=="text")d.style.position=lb;return{x:d.offsetLeft,y:d.offsetTop,width:d.offsetWidth,height:d.offsetHeight}},on:function(d,a){this.element["on"+d]=function(){var d=x.event;d.target=d.srcElement;a(d)};return this},updateTransform:function(){if(this.added){var d= this,a=d.element,f=d.translateX||0,c=d.translateY||0,e=d.x||0,h=d.y||0,j=d.textAlign||"left",g={left:0,center:0.5,right:1}[j],i=j&&j!="left";(f||c)&&d.css({marginLeft:f,marginTop:c});d.inverted&&y(a.childNodes,function(b){d.renderer.invertChild(b,a)});if(a.tagName=="SPAN"){var o,n,f=d.rotation,t;o=0;var c=1,q=0,C,w=d.xCorr||0,K=d.yCorr||0,D=[f,j,a.innerHTML,a.style.width].join(",");if(D!=d.cTT)m(f)&&(o=f*L,c=Z(o),q=da(o),l(a,{filter:f?["progid:DXImageTransform.Microsoft.Matrix(M11=",c,", M12=",-q, ", M21=",q,", M22=",c,", sizingMethod='auto expand')"].join(""):Na})),o=a.offsetWidth,n=a.offsetHeight,t=v(b(a.style.fontSize||12)*1.2),w=c<0&&-o,K=q<0&&-n,C=c*q<0,w+=q*t*(C?1-g:g),K-=c*t*(f?C?g:1-g:1),i&&(w-=o*g*(c<0?-1:1),f&&(K-=n*g*(q<0?-1:1)),l(a,{textAlign:j})),d.xCorr=w,d.yCorr=K;l(a,{left:e+w,top:h+K});d.cTT=D}}else this.alignOnAdd=!0},shadow:function(d){var a=[],f=this.element,c=this.renderer,e,h=f.style,j,g=f.path;""+f.path===""&&(g="x");if(d){for(d=1;d<=3;d++)j=['<shape isShadow="true" strokeweight="', 7-2*d,'" filled="false" path="',g,'" coordsize="100,100" style="',f.style.cssText,'" />'],e=t(c.prepVML(j),null,{left:b(h.left)+1,top:b(h.top)+1}),j=['<stroke color="black" opacity="',0.05*d,'"/>'],t(c.prepVML(j),null,null,e),f.parentNode.insertBefore(e,f),a.push(e);this.shadows=a}return this}});W=function(){this.init.apply(this,arguments)};W.prototype=ia(Fb.prototype,{isIE8:U.indexOf("MSIE 8.0")>-1,init:function(d,a,b){var c;this.Element=sc;this.alignedObjects=[];c=this.createElement($a);d.appendChild(c.element); this.box=c.element;this.boxWrapper=c;this.setSize(a,b,!1);if(!A.namespaces.hcv)A.namespaces.add("hcv","urn:schemas-microsoft-com:vml"),A.createStyleSheet().cssText="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } "},clipRect:function(d,b,f,c){var e=this.createElement();return a(e,{members:[],left:d,top:b,width:f,height:c,getCSS:function(d){var b=this.top,f=this.left,c=f+this.width,e=b+this.height,b={clip:"rect("+v(d?f:b)+"px,"+v(d?e:c)+"px,"+ v(d?c:e)+"px,"+v(d?b:f)+"px)"};!d&&K&&a(b,{width:c+Ea,height:e+Ea});return b},updateClipping:function(){y(e.members,function(d){d.css(e.getCSS(d.inverted))})}})},color:function(d,a,b){var c,e=/^rgba/;if(d&&d.linearGradient){var h,j,g=d.linearGradient,i,o,m,n;y(d.stops,function(d,a){e.test(d[1])?(c=La(d[1]),h=c.get("rgb"),j=c.get("a")):(h=d[1],j=1);a?(m=h,n=j):(i=h,o=j)});d=90-N.atan((g[3]-g[1])/(g[2]-g[0]))*180/P;b=["<",b,' colors="0% ',i,",100% ",m,'" angle="',d,'" opacity="',n,'" o:opacity2="', o,'" type="gradient" focus="100%" />'];t(this.prepVML(b),null,null,a)}else return e.test(d)&&a.tagName!="IMG"?(c=La(d),b=["<",b,' opacity="',c.get("a"),'"/>'],t(this.prepVML(b),null,null,a),c.get("rgb")):d},prepVML:function(d){var a=this.isIE8,d=d.join("");a?(d=d.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),d=d.indexOf('style="')==-1?d.replace("/>",' style="display:inline-block;behavior:url(#default#VML);" />'):d.replace('style="','style="display:inline-block;behavior:url(#default#VML);')): d=d.replace("<","<hcv:");return d},text:function(d,a,b){var c=za.chart.style;return this.createElement("span").attr({text:d,x:v(a),y:v(b)}).css({whiteSpace:"nowrap",fontFamily:c.fontFamily,fontSize:c.fontSize})},path:function(d){return this.createElement("shape").attr({coordsize:"100 100",d:d})},circle:function(d,a,b){return this.path(this.symbols.circle(d,a,b))},g:function(d){var a;d&&(a={className:db+d,"class":db+d});return this.createElement($a).attr(a)},image:function(d,a,b,c,e){var h=this.createElement("img").attr({src:d}); arguments.length>1&&h.css({left:a,top:b,width:c,height:e});return h},rect:function(d,a,b,c,h,j){if(arguments.length>1)var g=(j||0)%2/2,d=v(d||0)+g,a=v(a||0)+g,b=v((b||0)-2*g),c=v((c||0)-2*g);if(e(d))a=d.y,b=d.width,c=d.height,h=d.r,d=d.x;return this.symbol("rect",d||0,a||0,h||0,{width:b||0,height:c||0})},invertChild:function(d,a){var f=a.style;l(d,{flip:"x",left:b(f.width)-10,top:b(f.height)-10,rotation:-90})},symbols:{arc:function(d,a,b,c){var e=c.start,h=c.end,j=Z(e),g=da(e),i=Z(h),o=da(h),c=c.innerR; if(h-e===0)return["x"];else h-e==2*P&&(i=-0.07/b);return["wa",d-b,a-b,d+b,a+b,d+b*j,a+b*g,d+b*i,a+b*o,"at",d-c,a-c,d+c,a+c,d+c*i,a+c*o,d+c*j,a+c*g,"x","e"]},circle:function(a,b,f){return["wa",a-f,b-f,a+f,b+f,a+f,b,a+f,b,"e"]},rect:function(a,b,f,c){var e=c.width,c=c.height,h=a+e,j=b+c,f=Da(f,e,c);return[Ca,a+f,b,ma,h-f,b,"wa",h-2*f,b,h,b+2*f,h-f,b,h,b+f,ma,h,j-f,"wa",h-2*f,j-2*f,h,j,h,j-f,h-f,j,ma,a+f,j,"wa",a,j-2*f,a+2*f,j,a+f,j,a,j-f,ma,a,b+f,"wa",a,b,a+2*f,b+2*f,a,b+f,a+f,b,"x","e"]}}})}var lc= ca?Fb:W;Q.prototype.callbacks=[];var Ta=function(){};Ta.prototype={init:function(a,b){var f;this.series=a;this.applyOptions(b);this.pointAttr={};if(a.options.colorByPoint){f=a.chart.options.colors;if(!this.options)this.options={};this.color=this.options.color=this.color||f[Ia++];Ia>=f.length&&(Ia=0)}a.chart.pointCount++;return this},applyOptions:function(d){var b=this.series;this.config=d;if(g(d)||d===null)this.y=d;else if(e(d)&&!g(d.length))a(this,d),this.options=d;else if(c(d[0]))this.name=d[0], this.y=d[1];else if(g(d[0]))this.x=d[0],this.y=d[1];if(this.x===ya)this.x=b.autoIncrement()},destroy:function(){var a=this,b=a.series,f;b.chart.pointCount--;a==b.chart.hoverPoint&&a.onMouseOut();b.chart.hoverPoints=null;Va(a);y(["graphic","tracker","group","dataLabel","connector"],function(b){a[b]&&a[b].destroy()});a.legendItem&&a.series.chart.legend.destroyItem(a);for(f in a)a[f]=null},select:function(a,b){var f=this,c=f.series.chart;f.selected=a=j(a,!f.selected);f.firePointEvent(a?"select":"unselect"); f.setState(a&&"select");b||y(c.getSelectedPoints(),function(a){if(a.selected&&a!=f)a.selected=!1,a.setState(xa),a.firePointEvent("unselect")})},onMouseOver:function(){var a=this.series.chart,b=a.tooltip,f=a.hoverPoint;f&&f!=this&&f.onMouseOut();this.firePointEvent("mouseOver");b&&!b.shared&&b.refresh(this);this.setState(Sa);a.hoverPoint=this},onMouseOut:function(){this.firePointEvent("mouseOut");this.setState();this.series.chart.hoverPoint=null},tooltipFormatter:function(a){var b=this.series;return['<span style="color:'+ b.color+'">',this.name||b.name,"</span>: ",!a?"<b>x = "+(this.name||this.x)+",</b> ":"","<b>",!a?"y = ":"",this.y,"</b><br/>"].join("")},update:function(a,b,f){var c=this,h=c.series,e=h.chart;q(f,e);b=j(b,!0);c.firePointEvent("update",{options:a},function(){c.applyOptions(a);h.isDirty=!0;b&&e.redraw()})},remove:function(a,b){var f=this,c=f.series,h=c.chart,e=c.data;q(b,h);a=j(a,!0);f.firePointEvent("remove",null,function(){i(e,f);f.destroy();c.isDirty=!0;a&&h.redraw()})},firePointEvent:function(a, b,f){var c=this,h=this.series.options;(h.point.events[a]||c.options&&c.options.events&&c.options.events[a])&&this.importEvents();a=="click"&&h.allowPointSelect&&(f=function(a){c.select(null,a.ctrlKey||a.metaKey||a.shiftKey)});ta(this,a,b,f)},importEvents:function(){if(!this.hasImportedEvents){var a=ia(this.series.options.point,this.options).events,b;this.events=a;for(b in a)va(this,b,a[b]);this.hasImportedEvents=!0}},setState:function(a){var b=this.series,f=b.options.states,c=ka[b.type].marker&&b.options.marker, h=c&&!c.enabled,e=(c=c&&c.states[a])&&c.enabled===!1,j=b.stateMarkerGraphic,g=b.chart,i=this.pointAttr;a||(a=xa);if(!(a==this.state||this.selected&&a!="select"||f[a]&&f[a].enabled===!1||a&&(e||h&&!c.enabled))){if(this.graphic)this.graphic.attr(i[a]);else{if(a){if(!j)b.stateMarkerGraphic=j=g.renderer.circle(0,0,i[a].r).attr(i[a]).add(b.group);j.translate(this.plotX,this.plotY)}if(j)j[a?"show":"hide"]()}this.state=a}}};var pa=function(){};pa.prototype={isCartesian:!0,type:"line",pointClass:Ta,pointAttrToOptions:{stroke:"lineColor", "stroke-width":"lineWidth",fill:"fillColor",r:"radius"},init:function(d,b){var f,c;c=d.series.length;this.chart=d;b=this.setOptions(b);a(this,{index:c,options:b,name:b.name||"Series "+(c+1),state:xa,pointAttr:{},visible:b.visible!==!1,selected:b.selected===!0});c=b.events;for(f in c)va(this,f,c[f]);if(c&&c.click||b.point&&b.point.events&&b.point.events.click||b.allowPointSelect)d.runTrackerClick=!0;this.getColor();this.getSymbol();this.setData(b.data,!1)},autoIncrement:function(){var a=this.options, b=this.xIncrement,b=j(b,a.pointStart,0);this.pointInterval=j(this.pointInterval,a.pointInterval,1);this.xIncrement=b+this.pointInterval;return b},cleanData:function(){var a=this.chart,b=this.data,f,c,h=a.smallestInterval,e,j;b.sort(function(a,d){return a.x-d.x});for(j=b.length-1;j>=0;j--)b[j-1]&&b[j-1].x==b[j].x&&b.splice(j-1,1);for(j=b.length-1;j>=0;j--)if(b[j-1]&&(e=b[j].x-b[j-1].x,c===ya||e<c))c=e,f=j;if(h===ya||c<h)a.smallestInterval=c;this.closestPoints=f},getSegments:function(){var a=-1,b=[], f=this.data;y(f,function(c,h){c.y===null?(h>a+1&&b.push(f.slice(a+1,h)),a=h):h==f.length-1&&b.push(f.slice(a+1,h+1))});this.segments=b},setOptions:function(a){var b=this.chart.options.plotOptions;return ia(b[this.type],b.series,a)},getColor:function(){var a=this.chart.options.colors;this.color=this.options.color||a[Ia++]||"#0000ff";Ia>=a.length&&(Ia=0)},getSymbol:function(){var a=this.chart.options.symbols;this.symbol=this.options.marker.symbol||a[Ya++];Ya>=a.length&&(Ya=0)},addPoint:function(a,b, c,h){var e=this.data,g=this.graph,i=this.area,o=this.chart,a=(new this.pointClass).init(this,a);q(h,o);if(g&&c)g.shift=c;if(i)i.shift=c,i.isArea=!0;b=j(b,!0);e.push(a);c&&e[0].remove(!1);this.isDirty=!0;b&&o.redraw()},setData:function(a,b){var c=this,h=c.data,e=c.initialColor,g=c.chart,i=h&&h.length||0;c.xIncrement=null;m(e)&&(Ia=e);for(a=kb(o(a||[]),function(a){return(new c.pointClass).init(c,a)});i--;)h[i].destroy();c.data=a;c.cleanData();c.getSegments();c.isDirty=!0;g.isDirtyBox=!0;j(b,!0)&&g.redraw(!1)}, remove:function(a,b){var c=this,h=c.chart,a=j(a,!0);if(!c.isRemoving)c.isRemoving=!0,ta(c,"remove",null,function(){c.destroy();h.isDirtyLegend=h.isDirtyBox=!0;a&&h.redraw(b)});c.isRemoving=!1},translate:function(){for(var a=this.chart,b=this.options.stacking,c=this.xAxis.categories,h=this.yAxis,e=this.data,j=e.length;j--;){var g=e[j],i=g.x,o=g.y,n=g.low,l=h.stacks[(o<0?"-":"")+this.stackKey];g.plotX=this.xAxis.translate(i);if(b&&this.visible&&l[i])n=l[i],i=n.total,n.cum=n=n.cum-o,o=n+o,b=="percent"&& (n=i?n*100/i:0,o=i?o*100/i:0),g.percentage=i?g.y*100/i:0,g.stackTotal=i;if(m(n))g.yBottom=h.translate(n,0,1);if(o!==null)g.plotY=h.translate(o,0,1);g.clientX=a.inverted?a.plotHeight-g.plotX:g.plotX;g.category=c&&c[g.x]!==ya?c[g.x]:g.x}},setTooltipPoints:function(a){var b=this.chart,c=b.inverted,h=[],e=v((c?b.plotTop:b.plotLeft)+b.plotSizeX),j,g,i=[];if(a)this.tooltipPoints=null;y(this.segments,function(a){h=h.concat(a)});this.xAxis&&this.xAxis.reversed&&(h=h.reverse());y(h,function(a,d){j=h[d-1]? h[d-1].high+1:0;for(g=a.high=h[d+1]?ha((a.plotX+(h[d+1]?h[d+1].plotX:e))/2):e;j<=g;)i[c?e-j++:j++]=a});this.tooltipPoints=i},onMouseOver:function(){var a=this.chart,b=a.hoverSeries;if(Ha||!a.mouseIsDown)b&&b!=this&&b.onMouseOut(),this.options.events.mouseOver&&ta(this,"mouseOver"),this.tracker&&this.tracker.toFront(),this.setState(Sa),a.hoverSeries=this},onMouseOut:function(){var a=this.options,b=this.chart,c=b.tooltip,h=b.hoverPoint;h&&h.onMouseOut();this&&a.events.mouseOut&&ta(this,"mouseOut"); c&&!a.stickyTracking&&c.hide();this.setState();b.hoverSeries=null},animate:function(a){var b=this.chart,c=this.clipRect,h=this.options.animation;h&&!e(h)&&(h={});if(a){if(!c.isAnimating)c.attr("width",0),c.isAnimating=!0}else c.animate({width:b.plotSizeX},h),this.animate=null},drawPoints:function(){var a,b=this.data,c=this.chart,h,e,g,i,o,m;if(this.options.marker.enabled)for(g=b.length;g--;)if(i=b[g],h=i.plotX,e=i.plotY,m=i.graphic,e!==ya&&!isNaN(e))a=i.pointAttr[i.selected?"select":xa],o=a.r,m?m.animate({x:h, y:e,r:o}):i.graphic=c.renderer.symbol(j(i.marker&&i.marker.symbol,this.symbol),h,e,o).attr(a).add(this.group)},convertAttribs:function(a,b,c,h){var e=this.pointAttrToOptions,g,i,o={},a=a||{},b=b||{},c=c||{},h=h||{};for(g in e)i=e[g],o[g]=j(a[i],b[g],c[g],h[g]);return o},getAttribs:function(){var a=this,b=ka[a.type].marker?a.options.marker:a.options,c=b.states,h=c[Sa],e,j=a.color,g={stroke:j,fill:j},i=a.data,o=[],n,l=a.pointAttrToOptions;a.options.marker?(h.radius=h.radius||b.radius+2,h.lineWidth= h.lineWidth||b.lineWidth+1):h.color=h.color||La(h.color||j).brighten(h.brightness).get();o[xa]=a.convertAttribs(b,g);y([Sa,"select"],function(b){o[b]=a.convertAttribs(c[b],o[xa])});a.pointAttr=o;for(j=i.length;j--;){g=i[j];if((b=g.options&&g.options.marker||g.options)&&b.enabled===!1)b.radius=0;e=!1;if(g.options)for(var q in l)m(b[l[q]])&&(e=!0);if(e){n=[];c=b.states||{};e=c[Sa]=c[Sa]||{};if(!a.options.marker)e.color=La(e.color||g.options.color).brighten(e.brightness||h.brightness).get();n[xa]=a.convertAttribs(b, o[xa]);n[Sa]=a.convertAttribs(c[Sa],o[Sa],n[xa]);n.select=a.convertAttribs(c.select,o.select,n[xa])}else n=o;g.pointAttr=n}},destroy:function(){var a=this,b=a.chart,c=/\/5[0-9\.]+ Safari\//.test(U),h,e;Va(a);a.legendItem&&a.chart.legend.destroyItem(a);y(a.data,function(a){a.destroy()});y(["area","graph","dataLabelsGroup","group","tracker"],function(b){a[b]&&(h=c&&b=="group"?"hide":"destroy",a[b][h]())});if(b.hoverSeries==a)b.hoverSeries=null;i(b.series,a);for(e in a)delete a[e]},drawDataLabels:function(){if(this.options.dataLabels.enabled){var a= this,b,c,h=a.data,e=a.options.dataLabels,g,i=a.dataLabelsGroup,o=a.chart,m=o.inverted,n=a.type,l;if(!i)i=a.dataLabelsGroup=o.renderer.g(db+"data-labels").attr({visibility:a.visible?Ua:Ra,zIndex:5}).translate(o.plotLeft,o.plotTop).add();l=e.color;l=="auto"&&(l=null);e.style.color=j(l,a.color);y(h,function(h){var l=h.barX,l=l&&l+h.barW/2||h.plotX||-999,s=j(h.plotY,-999),q=h.dataLabel,t=e.align;g=e.formatter.call({x:h.x,y:h.y,series:a,point:h,percentage:h.percentage,total:h.total||h.stackTotal});b=(m? o.plotWidth-s:l)+e.x;c=(m?o.plotHeight-l:s)+e.y;n=="column"&&(b+={left:-1,right:1}[t]*h.barW/2||0);if(q)q.animate({x:b,y:c});else if(g)q=h.dataLabel=o.renderer.text(g,b,c).attr({align:t,rotation:e.rotation,zIndex:1}).css(e.style).add(i);m&&!e.y&&q.attr({y:c+parseInt(q.styles.lineHeight)*0.9-q.getBBox().height/2})})}},drawGraph:function(){var a=this,b=a.options,c=a.graph,h=[],e,g=a.area,i=a.group,o=b.lineColor||a.color,m=b.lineWidth,n=b.dashStyle,l,q=a.chart.renderer,t=a.yAxis.getThreshold(b.threshold|| 0),C=/^area/.test(a.type),w=[],K=[];y(a.segments,function(c){l=[];y(c,function(f,h){a.getPointSpline?l.push.apply(l,a.getPointSpline(c,f,h)):(l.push(h?ma:Ca),h&&b.step&&l.push(f.plotX,c[h-1].plotY),l.push(f.plotX,f.plotY))});c.length>1?h=h.concat(l):w.push(c[0]);if(C){var f=[],e,j=l.length;for(e=0;e<j;e++)f.push(l[e]);j==3&&f.push(ma,l[1],l[2]);if(b.stacking&&a.type!="areaspline")for(e=c.length-1;e>=0;e--)f.push(c[e].plotX,c[e].yBottom);else f.push(ma,c[c.length-1].plotX,t,ma,c[0].plotX,t);K=K.concat(f)}}); a.graphPath=h;a.singlePoints=w;if(C)e=j(b.fillColor,La(a.color).setOpacity(b.fillOpacity||0.75).get()),g?g.animate({d:K}):a.area=a.chart.renderer.path(K).attr({fill:e}).add(i);if(c)c.animate({d:h});else if(m){c={stroke:o,"stroke-width":m};if(n)c.dashstyle=n;a.graph=q.path(h).attr(c).add(i).shadow(b.shadow)}},render:function(){var a=this,b=a.chart,c,h,e=a.options,j=e.animation,g=j&&a.animate,j=g?j&&j.duration||500:0,i=a.clipRect;h=b.renderer;if(!i&&(i=a.clipRect=!b.hasRendered&&b.clipRect?b.clipRect: h.clipRect(0,0,b.plotSizeX,b.plotSizeY),!b.clipRect))b.clipRect=i;if(!a.group)c=a.group=h.g("series"),b.inverted&&(h=function(){c.attr({width:b.plotWidth,height:b.plotHeight}).invert()},h(),va(b,"resize",h)),c.clip(a.clipRect).attr({visibility:a.visible?Ua:Ra,zIndex:e.zIndex}).translate(b.plotLeft,b.plotTop).add(b.seriesGroup);a.drawDataLabels();g&&a.animate(!0);a.getAttribs();a.drawGraph&&a.drawGraph();a.drawPoints();a.options.enableMouseTracking!==!1&&a.drawTracker();g&&a.animate();setTimeout(function(){i.isAnimating= !1;if((c=a.group)&&i!=b.clipRect&&i.renderer)c.clip(a.clipRect=b.clipRect),i.destroy()},j);a.isDirty=!1},redraw:function(){var a=this.chart,b=this.group;b&&(a.inverted&&b.attr({width:a.plotWidth,height:a.plotHeight}),b.animate({translateX:a.plotLeft,translateY:a.plotTop}));this.translate();this.setTooltipPoints(!0);this.render()},setState:function(a){var b=this.options,c=this.graph,h=b.states,b=b.lineWidth,a=a||xa;if(this.state!=a)this.state=a,h[a]&&h[a].enabled===!1||(a&&(b=h[a].lineWidth||b+1), c&&!c.dashstyle&&c.attr({"stroke-width":b},a?0:500))},setVisible:function(a,b){var c=this.chart,h=this.legendItem,e=this.group,j=this.tracker,g=this.dataLabelsGroup,i,o=this.data,m=c.options.chart.ignoreHiddenSeries;i=this.visible;i=(this.visible=a=a===ya?!i:a)?"show":"hide";e&&e[i]();if(j)j[i]();else for(e=o.length;e--;)j=o[e],j.tracker&&j.tracker[i]();g&&g[i]();h&&c.legend.colorizeItem(this,a);this.isDirty=!0;this.options.stacking&&y(c.series,function(a){if(a.options.stacking&&a.visible)a.isDirty= !0});if(m)c.isDirtyBox=!0;b!==!1&&c.redraw();ta(this,i)},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(a){this.selected=a=a===ya?!this.selected:a;if(this.checkbox)this.checkbox.checked=a;ta(this,a?"select":"unselect")},drawTracker:function(){var a=this,b=a.options,c=[].concat(a.graphPath),h=c.length,e=a.chart,j=e.options.tooltip.snap,g=a.tracker,i=b.cursor,i=i&&{cursor:i},o=a.singlePoints,m;if(h)for(m=h+1;m--;)c[m]==Ca&&c.splice(m+1,0,c[m+1]-j,c[m+2],ma), (m&&c[m]==Ca||m==h)&&c.splice(m,0,ma,c[m-2]+j,c[m-1]);for(m=0;m<o.length;m++)h=o[m],c.push(Ca,h.plotX-j,h.plotY,ma,h.plotX+j,h.plotY);g?g.attr({d:c}):a.tracker=e.renderer.path(c).attr({isTracker:!0,stroke:tb,fill:Na,"stroke-width":b.lineWidth+2*j,visibility:a.visible?Ua:Ra,zIndex:1}).on(Ha?"touchstart":"mouseover",function(){e.hoverSeries!=a&&a.onMouseOver()}).on("mouseout",function(){b.stickyTracking||a.onMouseOut()}).css(i).add(e.trackerGroup)}};W=E(pa);Pa.line=W;W=E(pa,{type:"area"});Pa.area=W; W=E(pa,{type:"spline",getPointSpline:function(a,b,c){var h=b.plotX,e=b.plotY,j=a[c-1],g=a[c+1],i,o,m,n;if(c&&c<a.length-1){a=j.plotY;m=g.plotX;var g=g.plotY,l;i=(1.5*h+j.plotX)/2.5;o=(1.5*e+a)/2.5;m=(1.5*h+m)/2.5;n=(1.5*e+g)/2.5;l=(n-o)*(m-h)/(m-i)+e-n;o+=l;n+=l;o>a&&o>e?(o=H(a,e),n=2*e-o):o<a&&o<e&&(o=Da(a,e),n=2*e-o);n>g&&n>e?(n=H(g,e),o=2*e-n):n<g&&n<e&&(n=Da(g,e),o=2*e-n);b.rightContX=m;b.rightContY=n}c?(b=["C",j.rightContX||j.plotX,j.rightContY||j.plotY,i||h,o||e,h,e],j.rightContX=j.rightContY= null):b=[Ca,h,e];return b}});Pa.spline=W;W=E(W,{type:"areaspline"});Pa.areaspline=W;var Za=E(pa,{type:"column",pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",r:"borderRadius"},init:function(){pa.prototype.init.apply(this,arguments);var a=this,b=a.chart;b.hasColumn=!0;b.hasRendered&&y(b.series,function(b){if(b.type==a.type)b.isDirty=!0})},translate:function(){var d=this,b=d.chart,c=0,h=d.xAxis.reversed,e=d.xAxis.categories,g={},i,o;pa.prototype.translate.apply(d); y(b.series,function(a){if(a.type==d.type)a.options.stacking?(i=a.stackKey,g[i]===ya&&(g[i]=c++),o=g[i]):o=c++,a.columnIndex=o});var n=d.options,l=d.data,q=d.closestPoints,b=Y(l[1]?l[q].plotX-l[q-1].plotX:b.plotSizeX/(e?e.length:1)),e=b*n.groupPadding,q=(b-2*e)/c,t=n.pointWidth,C=m(t)?(q-t)/2:q*n.pointPadding,w=j(t,q-2*C),K=C+(e+((h?c-d.columnIndex:d.columnIndex)||0)*q-b/2)*(h?-1:1),v=d.yAxis.getThreshold(n.threshold||0),x=j(n.minPointLength,5);y(l,function(d){var b=d.plotY,c=d.yBottom||v,f=d.plotX+ K,h=gb(Da(b,c)),e=gb(H(b,c)-h),j;Y(e)<x&&(x&&(e=x,h=Y(h-v)>x?c-x:v-(b<=v?x:0)),j=h-3);a(d,{barX:f,barY:h,barW:w,barH:e});d.shapeType="rect";d.shapeArgs={x:f,y:h,width:w,height:e,r:n.borderRadius};d.trackerArgs=m(j)&&ia(d.shapeArgs,{height:H(6,e+3),y:j})})},getSymbol:function(){},drawGraph:function(){},drawPoints:function(){var a=this,b=a.options,c=a.chart.renderer,h,e;y(a.data,function(j){var g=j.plotY;if(g!==ya&&!isNaN(g))h=j.graphic,e=j.shapeArgs,h?(Eb(h),h.animate(e)):j.graphic=c[j.shapeType](e).attr(j.pointAttr[j.selected? "select":xa]).add(a.group).shadow(b.shadow)})},drawTracker:function(){var a=this,b=a.chart,c=b.renderer,e,j,g=+new Date,i=a.options.cursor,o=i&&{cursor:i},m;y(a.data,function(i){j=i.tracker;e=i.trackerArgs||i.shapeArgs;if(i.y!==null)j?j.attr(e):i.tracker=c[i.shapeType](e).attr({isTracker:g,fill:tb,visibility:a.visible?Ua:Ra,zIndex:1}).on(Ha?"touchstart":"mouseover",function(c){m=c.relatedTarget||c.fromElement;b.hoverSeries!=a&&h(m,"isTracker")!=g&&a.onMouseOver();i.onMouseOver()}).on("mouseout",function(b){a.options.stickyTracking|| (m=b.relatedTarget||b.toElement,h(m,"isTracker")!=g&&a.onMouseOut())}).css(o).add(b.trackerGroup)})},animate:function(a){var b=this,c=b.data;if(!a)y(c,function(a){var d=a.graphic;d&&(d.attr({height:0,y:b.yAxis.translate(0,0,1)}),d.animate({height:a.barH,y:a.barY},b.options.animation))}),b.animate=null},remove:function(){var a=this,b=a.chart;b.hasRendered&&y(b.series,function(b){if(b.type==a.type)b.isDirty=!0});pa.prototype.remove.apply(a,arguments)}});Pa.column=Za;W=E(Za,{type:"bar",init:function(a){a.inverted= this.inverted=!0;Za.prototype.init.apply(this,arguments)}});Pa.bar=W;W=E(pa,{type:"scatter",translate:function(){var a=this;pa.prototype.translate.apply(a);y(a.data,function(b){b.shapeType="circle";b.shapeArgs={x:b.plotX,y:b.plotY,r:a.chart.options.tooltip.snap}})},drawTracker:function(){var a=this,b=a.options.cursor,c=b&&{cursor:b},h;y(a.data,function(b){(h=b.graphic)&&h.attr({isTracker:!0}).on("mouseover",function(){a.onMouseOver();b.onMouseOver()}).on("mouseout",function(){a.options.stickyTracking|| a.onMouseOut()}).css(c)})},cleanData:function(){}});Pa.scatter=W;W=E(Ta,{init:function(){Ta.prototype.init.apply(this,arguments);var b=this,c;a(b,{visible:b.visible!==!1,name:j(b.name,"Slice")});c=function(){b.slice()};va(b,"select",c);va(b,"unselect",c);return b},setVisible:function(a){var b=this.series.chart,c=this.tracker,h=this.dataLabel,e=this.connector,j;j=(this.visible=a=a===ya?!this.visible:a)?"show":"hide";this.group[j]();c&&c[j]();h&&h[j]();e&&e[j]();this.legendItem&&b.legend.colorizeItem(this, a)},slice:function(a,b,c){var h=this.series.chart,e=this.slicedTranslation;q(c,h);j(b,!0);a=this.sliced=m(a)?a:!this.sliced;this.group.animate({translateX:a?e[0]:h.plotLeft,translateY:a?e[1]:h.plotTop})}});W=E(pa,{type:"pie",isCartesian:!1,pointClass:W,pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},getColor:function(){this.initialColor=Ia},animate:function(){var a=this;y(a.data,function(b){var c=b.graphic,b=b.shapeArgs,h=-P/2;c&&(c.attr({r:0,start:h,end:h}),c.animate({r:b.r, start:b.start,end:b.end},a.options.animation))});a.animate=null},translate:function(){var a=0,c=-0.25,h=this.options,e=h.slicedOffset,j=e+h.borderWidth,g=h.center,i=this.chart,o=i.plotWidth,m=i.plotHeight,n,l,q,t=this.data,C=2*P,w,K=Da(o,m),x,ca,Ba=h.dataLabels.distance;g.push(h.size,h.innerSize||0);g=kb(g,function(a,d){return/%$/.test(a)?[o,m,K,K][d]*b(a)/100:a});this.getX=function(a,b){q=N.asin((a-g[1])/(g[2]/2+Ba));return g[0]+(b?-1:1)*Z(q)*(g[2]/2+Ba)};this.center=g;y(t,function(b){a+=b.y});y(t, function(b){w=a?b.y/a:0;n=v(c*C*1E3)/1E3;c+=w;l=v(c*C*1E3)/1E3;b.shapeType="arc";b.shapeArgs={x:g[0],y:g[1],r:g[2]/2,innerR:g[3]/2,start:n,end:l};q=(l+n)/2;b.slicedTranslation=kb([Z(q)*e+i.plotLeft,da(q)*e+i.plotTop],v);x=Z(q)*g[2]/2;ca=da(q)*g[2]/2;b.tooltipPos=[g[0]+x*0.7,g[1]+ca*0.7];b.labelPos=[g[0]+x+Z(q)*Ba,g[1]+ca+da(q)*Ba,g[0]+x+Z(q)*j,g[1]+ca+da(q)*j,g[0]+x,g[1]+ca,Ba<0?"center":q<C/4?"left":"right",q];b.percentage=w*100;b.total=a});this.setTooltipPoints()},render:function(){this.getAttribs(); this.drawPoints();this.options.enableMouseTracking!==!1&&this.drawTracker();this.drawDataLabels();this.options.animation&&this.animate&&this.animate();this.isDirty=!1},drawPoints:function(){var b=this.chart,c=b.renderer,h,e,j,g;y(this.data,function(i){e=i.graphic;g=i.shapeArgs;j=i.group;if(!j)j=i.group=c.g("point").attr({zIndex:5}).add();h=i.sliced?i.slicedTranslation:[b.plotLeft,b.plotTop];j.translate(h[0],h[1]);e?e.animate(g):i.graphic=c.arc(g).attr(a(i.pointAttr[xa],{"stroke-linejoin":"round"})).add(i.group); i.visible===!1&&i.setVisible(!1)})},drawDataLabels:function(){var a=this.data,b,c=this.chart,h=this.options.dataLabels,e=j(h.connectorPadding,10),g=j(h.connectorWidth,1),i,o,m=h.distance>0,n,l,q=this.center[1],t=[[],[],[],[]],C,w,K,v,x,ca,Ba,E=4,A;pa.prototype.drawDataLabels.apply(this);y(a,function(a){var b=a.labelPos[7];t[b<0?0:b<P/2?1:b<P?2:3].push(a)});t[1].reverse();t[3].reverse();for(Ba=function(a,b){return a.y>b.y};E--;){a=0;b=[].concat(t[E]);b.sort(Ba);for(A=b.length;A--;)b[A].rank=A;for(v= 0;v<2;v++){l=(ca=E%3)?9999:-9999;x=ca?-1:1;for(A=0;A<t[E].length;A++)if(b=t[E][A],i=b.dataLabel){o=b.labelPos;K=Ua;C=o[0];w=o[1];n||(n=i&&i.getBBox().height);if(m)if(v&&b.rank<a)K=Ra;else if(!ca&&w<l+n||ca&&w>l-n)if(w=l+x*n,C=this.getX(w,E>1),!ca&&w+n>q||ca&&w-n<q)v?K=Ra:a++;b.visible===!1&&(K=Ra);K==Ua&&(l=w);if(v&&(i.attr({visibility:K,align:o[6]})[i.moved?"animate":"attr"]({x:C+h.x+({left:e,right:-e}[o[6]]||0),y:w+h.y}),i.moved=!0,m&&g))i=b.connector,o=[Ca,C+(o[6]=="left"?5:-5),w,ma,C,w,ma,o[2], o[3],ma,o[4],o[5]],i?(i.animate({d:o}),i.attr("visibility",K)):b.connector=i=this.chart.renderer.path(o).attr({"stroke-width":g,stroke:h.connectorColor||"#606060",visibility:K,zIndex:3}).translate(c.plotLeft,c.plotTop).add()}}}},drawTracker:Za.prototype.drawTracker,getSymbol:function(){}});Pa.pie=W;x.Highcharts={Chart:Q,dateFormat:Ab,pathAnim:cb,getOptions:function(){return za},numberFormat:Ma,Point:Ta,Color:La,Renderer:lc,seriesTypes:Pa,setOptions:function(a){za=ia(za,a);w();return za},Series:pa, addEvent:va,createElement:t,discardElement:aa,css:l,each:y,extend:a,map:kb,merge:ia,pick:j,extendClass:E,version:"2.1.2"}})(); var treeio={put_mce:function(a){(a?$("textarea",a):$("textarea")).each(function(){$(this).hasClass("no-editor")||($(this).attr("id",a.attr("id")+"-"+$(this).attr("id")),$(this).hasClass("full-editor")?$(this).tinymce({script_url:"/static/js/tinymce/jscripts/tiny_mce/tiny_mce.js",theme:"advanced",skin:"cirkuit",relative_urls:!1,plugins:"safari,table,advhr,inlinepopups,insertdatetime,preview,searchreplace,contextmenu,paste,fullscreen,nonbreaking,visualchars,xhtmlxtras",theme_advanced_buttons1:"bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,formatselect,fontselect,fontsizeselect,|,cut,copy,paste,pastetext,pasteword,|,search,replace", theme_advanced_buttons2:"bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,image,cleanup,code,|,insertdate,inserttime,preview,|,forecolor,backcolor,|,cite,abbr,acronym,del,ins",theme_advanced_buttons3:"tablecontrols,|,hr,removeformat,|,sub,sup,|,visualchars,nonbreaking,charmap,advhr,|,fullscreen",theme_advanced_disable:"help,styleselect,anchor,newdocument",theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",theme_advanced_statusbar_location:"bottom",theme_advanced_resizing:!0, theme_advanced_resize_horizontal:!0,theme_advanced_resizing_use_cookie:!0,theme_advanced_path:!1,width:"70%"}):$(this).tinymce({script_url:"/static/js/tinymce/jscripts/tiny_mce/tiny_mce.js",theme:"advanced",skin:"cirkuit",relative_urls:!1,plugins:"safari,table,advhr,inlinepopups,insertdatetime,preview,searchreplace,contextmenu,paste,fullscreen,nonbreaking,visualchars,xhtmlxtras",theme_advanced_statusbar_location:"bottom",theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",theme_advanced_path:!1, theme_advanced_resizing:!0,theme_advanced_resize_horizontal:!0,theme_advanced_resizing_use_cookie:!0,theme_advanced_disable:"justifyleft,justifycenter,justifyright,justifyfull,outdent,indent,image,help,hr,removeformat,formatselect,fontselect,fontsizeselect,styleselect,sub,sup,forecolor,backcolor,forecolorpicker,backcolorpicker,charmap,visualaid,anchor,newdocument,blockquote",theme_advanced_buttons1:"bold,italic,underline,strikethrough,|,undo,redo,|,cut,copy,paste,link,unlink,cleanup,|,bullist,numlist,|,code", theme_advanced_buttons2:"",theme_advanced_buttons3:"",width:"70%"}))})},remove_mce:function(a){(a?$("textarea",a):$("textarea")).each(function(){tinyMCE.execCommand("mceRemoveControl",!1,$(this).attr("id"))})},do_ajax:function(){var a=window.location.hash.replace(/#/gi,"");if(!a)a=window.location.pathname;var b=$('.menu-item a[href="#'+a+'"]');if(b.length&&!b.hasClass("active")&&(block=$("#module-"+b.attr("id").substring(5)),block.length))$(".module-block").each(function(){$(this).attr("id")!=block.attr("id")? ($(this).css("display","none"),$(this).data("active",!1)):(block.css("display","block"),block.data("active",!0))}),document.title=block.data("title"),$(".menu-item a").each(function(){$(this).removeClass("active")}),b.addClass("active"),a="";a&&(a=treeio.prepare_url(a),$("#loading-status").css("display","block"),$("#loading-status-text").html("Loading..."),$.ajax({url:a,dataType:"json",success:treeio.process_ajax,complete:treeio.process_html,error:treeio.show_error}))},show_error:function(){$("#loading-status-text").html("Something went wrong...")}, process_userblock:function(a){a.response.messages&&$("#userblock-messages").each(function(){$(this).html(a.response.messages)})},process_ajax:function(a){if(a)if(a.popup)treeio.process_popup_data(a);else if(a.redirect)window.location.hash=="#"+a.redirect?treeio.do_ajax():window.location.hash=a.redirect;else if(a.redirect_out)window.location=a.redirect_out;else{if(a.response.url){var b=a.response.url.replace(".ajax",""),c=window.location.hash.replace("#","");if(b!=c&&b.indexOf(c)==-1&&c.indexOf(b)== -1){$("#loading-status").css("display","none");return}}document.title=a.response.content.title;var b=a.response.content.module_content,c=a.response.modules.active,e="none";if($("#module-"+c).length==0)$("#content").append('<div class="module-block" id="module-'+c+'"></div>');else{var g=$("td.module-sidebar-right",$("#module-"+c));g&&(e=g.css("display"))}var i=$("#module-"+c);$(".module-block").each(function(){$(this).attr("id")!=i.attr("id")?($(this).css("display","none"),$(this).data("active",!1)): (i.css("display","block"),i.data("active",!0))});treeio.remove_mce($("#module-"+c+" form"));$("#module-"+c).html(b);$("#module-"+c+" form").length&&(treeio.prepare_forms(i),treeio.prepare_comments(i),$("#module-"+c+" textarea").length&&treeio.put_mce(i));treeio.prepare_tags(i);treeio.prepare_list_actions(i);treeio.prepare_attachments(i);treeio.prepare_invites(i);treeio.prepare_popups(i);treeio.convert_links(i);treeio.prepare_ajax_links(i);treeio.prepare_slider_sidebar(i,e); treeio.showhidejs(i);treeio.prepare_module_stuff(c);treeio.process_notifications(a.response.notifications);$(".menu-item a").each(function(){$(this).removeClass("active")});treeio.process_userblock(a);$("#menu-"+c).addClass("active");$(i).data("title",a.response.content.title);$("#loading-splash").css("display")!="none"&&$("#loading-splash").fadeOut();$("#loading-status").css("display","none")}},process_notifications:function(a){for(var b in a){var c={title:" ",text:a[b].message,image:"/static/notifications/"+ a[b].tags+".png"};if(a[b].title)c.title=a[b].title;if(a[b].image)c.image=a[b].image;$.gritter.add(c)}},process_html:function(a,b){b=="parsererror"&&window.document.write(a.responseText)},prepare_module_stuff:function(a){try{treeio.modules[a].init()}catch(b){}},prepare_url:function(a){if(a.indexOf("!")!=-1||a.indexOf("?")!=-1)a=a.replace("!","?"),a.indexOf(".ajax")==-1&&(a=a.replace("?",".ajax?"));a.indexOf(".ajax")==-1&&(a+=".ajax?");return a},showhidejs:function(a){if(a)var b=$("div.showjs",a), a=$("div.hidejs",a);else b=$("div.showjs"),a=$("div.hidejs");b.each(function(){$(this).css("display","block")});a.each(function(){$(this).css("display","none")})},convert_links:function(a){(a?$("a",a):$("a")).each(function(){if($(this).attr("href")&&!$(this).hasClass("ajax-link-out")&&!$(this).hasClass("ajax-link")&&!$(this).attr("target")&&$(this).attr("href").substring(0,3)!="www"&&$(this).attr("href").substring(0,5)!="http:"&&$(this).attr("href").substring(0,6)!="https:"&&$(this).attr("href").substring(0, 4)!="ftp:"&&$(this).attr("href").substring(0,7)!="mailto:"&&$(this).attr("href").indexOf("#")==-1&&($(this).attr("href","#"+$(this).attr("href").replace("?","!")),$.browser.msie&&$.browser.version.substr(0,1)<7)){var a=window.location.href.replace(window.location.hash,"");$(this).attr("href",$(this).attr("href").replace(a,""))}})},add_data:function(a){var b=$(a.target);a.inner?b.html(a.content):a.append?b.append(a.content):(a=$(a.content),b.replaceWith(a),b=a);$("form",b).length&&(treeio.prepare_forms(b), treeio.prepare_comments(b),$("textarea",b).length&&treeio.put_mce(b));treeio.prepare_tags(b);treeio.prepare_list_actions(b);treeio.prepare_attachments(b);treeio.prepare_invites(b);treeio.prepare_popups(b);treeio.convert_links(b);treeio.prepare_ajax_links(b);treeio.showhidejs(b);$("#loading-status").css("display","none")},prepare_ajax_links:function(a){(a?$(".ajax-link",a):$(".ajax-link")).each(function(){$(this).click(function(){var a=$(this).parents($(this).attr("target")),c= treeio.utils.generate_id();a.attr("id",c);$(this).attr("target","#"+c);var a=eval($(this).attr("callback")),e=eval("("+$(this).attr("args")+")"),c=e?$.extend({target:"#"+c},e):{target:"#"+c};$("#loading-status").css("display","block");$("#loading-status-text").html("Loading...");a(Dajax.process,c);return!1})})},prepare_slider_sidebar:function(a,b){a||(a=$(".module-block"));var c=$("<div></div>").addClass("sidebar-slider");$("td.module-content-inner",a).prepend(c);c.data("sidebar",$("td.module-sidebar-right", a));c.click(function(){var a=$(this).data("sidebar");a&&(a.css("display")=="none"?a.fadeIn():a.fadeOut())});var e=$("td.module-sidebar-right",a);($("a.projects-action",e).length!=0||$("a.services-action",e).length!=0)&&c.append('<img src="/static/icons/sidebar/status.gif"/><br />');$("form.content-filter-form",e).length!=0&&c.append('<img src="/static/icons/sidebar/filter.gif"/><br />');$("div.permission-links",e).length!=0&&c.append('<img src="/static/icons/sidebar/permission.gif"/><br />');$("div.object-links", e).length!=0&&c.append('<img src="/static/icons/sidebar/link.gif"/><br />');$("div.subscription-users",e).length!=0&&c.append('<img src="/static/icons/sidebar/subscribe.gif"/><br />');$("a.pdf-block-link",e).length!=0&&c.append('<img src="/static/icons/sidebar/export.gif"/><br />');b?e.css("display",b):(e.css("display","none"),c.css({visibility:"hidden"}))},prepare_list_actions:function(a){$(".content-list-item",a).each(function(){$("span.content-list-item-actions",$(this)).css("visibility","hidden"); $(this).mouseover(function(){$("span.content-list-item-actions",$(this)).css("visibility","visible")}).mouseout(function(){$("span.content-list-item-actions",$(this)).css("visibility","hidden")});$("span.content-list-item-actions a",$(this)).addClass("popup-link")})},put_datepicker:function(a){$("input.datepicker",a).each(function(){var a={},c=$(this).attr("initial");if(c)c=parseInt(c)*1E3,a.defaultDate=new Date(c);$(this).datepicker(a)});$("input.datetimepicker",a).each(function(){var a={stepMinute:5, hour:12,minute:0,firstDay:1},c=$(this).attr("initial");if(c)c=parseInt(c)*1E3,c=new Date(c),a.defaultDate=c,a.hour=c.getHours(),a.minute=c.getMinutes(),a.second=c.getSeconds();$(this).datetimepicker(a)})},prepare_mass_form:function(a){$("input[type=checkbox].group-control",a).each(function(){$(this).data("form",$("ul.mass-form",a));$(this).click(function(){$("input[type=checkbox].group-"+$(this).attr("name")).attr("checked",$(this).attr("checked"));$(this).data("form").fadeTo("fast",1)})});$("ul.mass-form input[type=submit]", a).remove();$("ul.mass-form",a).each(function(){$(this).css("opacity",0.6)});$(".content-list-item input[type=checkbox], #sales_table, #reports_table",a).each(function(){$(this).data("form",$("ul.mass-form",a));$(this).click(function(){$(this).data("form").fadeTo("fast",1)})});$(".mass-form select",a).each(function(){$(this).css("opacity",0);$(this).change(function(){var a=$("span.wrap-value",$(this).parent()),c=$(this).children("option:selected");!c.val()==""&&(a.text(c.text()),c.val()=="delete"|| c.val()=="delete_all"?confirm("Really delete?\n\n(This cannot be undone)")&&$(this).parent().submit():$(this).parent().submit())})});$(".mass-form label",a).each(function(){$(this).next("select").andSelf().wrapAll('<div class="wrap-class" />');$(this).replaceWith('<span class="wrap-label">'+$(this).text()+'&nbsp;<span class="wrap-value"></span></span>')})},prepare_filter_form:function(a){$("form.content-filter-form input",a).live("change",function(){$(this).parents("form.content-filter-form").submit()}); $("form.content-filter-form select",a).live("change",function(){$(this).parents("form.content-filter-form").submit()});$("form.content-filter-form :submit").hide()},prepare_popup_content:function(a){var b=a.popup_id;if($("#"+b).length){var c=$("#"+b);$("a",c).each(function(){if($(this).attr("href")&&!$(this).hasClass("popup-link")&&!$(this).hasClass("ajax-link-out")&&!$(this).attr("target")&&$(this).attr("href").substring(0,3)!="www"&&$(this).attr("href").substring(0,5)!="http:"&&$(this).attr("href").substring(0, 6)!="https:"&&$(this).attr("href").substring(0,4)!="ftp:"&&$(this).attr("href").substring(0,7)!="mailto:"){$(this).attr("href").indexOf(b)==-1?$(this).data("href","/user/popup/"+b+"/url="+$(this).attr("href")):$(this).data("href",$(this).attr("href"));if($.browser.msie&&$.browser.version.substr(0,1)<7){var a=window.location.href.replace(window.location.hash,"");$(this).data("href",$(this).data("href").replace(a,"/"))}$(this).click(function(){$("#loading-status").css("display","block");url=$(this).data("href"); $.ajax({url:url,dataType:"json",success:treeio.process_popup_data});return!1})}});treeio.prepare_popups(c);$("form",c).each(function(){(url=$(this).attr("action"))?url.indexOf("/user/popup/")==-1&&(url="/user/popup/"+a.popup_id+"/url="+url):url=a.url;$(this).attr("action",url);var b={beforeSubmit:function(){$("#loading-status").css("display","block")},url:url,dataType:"json",success:treeio.process_ajax};$(this).ajaxForm(b)});treeio.showhidejs(c);treeio.prepare_ajax_links(c);treeio.prepare_comments(c); treeio.prepare_attachments(c);treeio.prepare_invites(c);treeio.prepare_tags(c);treeio.prepare_autocomplete(c);treeio.prepare_search_duplicates(c);treeio.put_datepicker(c);treeio.prepare_mass_form(c);treeio.put_mce(c)}},process_popup_data:function(a){if(a.popup){var b=$("#"+a.popup.popup_id);if(a.popup.object){if(b.data("field")){var c=$("#"+b.data("module")),e=$("#"+b.data("field"),c);e.hasClass("autocomplete")?(e.val(a.popup.object.name),c=$("#"+e.attr("id").replace("autocomplete_", ""),c),c.each(function(){$(this).val(a.popup.object.id)})):e.hasClass("duplicates")?(e.val(a.popup.object.name),c=$("#"+e.attr("id").replace("duplicates_",""),c),c.each(function(){$(this).val(a.popup.object.id)})):e.append('<option value="'+a.popup.object.id+'" selected="selected">'+a.popup.object.name+"</option>")}else{var g=location.hash.substring(1),g=treeio.prepare_url(g),c=b.parents("div.popup-block-inner");$("#loading-status").css("display","block");c.length>0&&$(c).first().each(function(){g= "/user/popup/"+$(this).attr("id")+"/url="+$(this).parent().data("link").replace("#","")});$.ajax({url:g,dataType:"json",success:treeio.process_ajax,complete:treeio.process_html})}b.parent().remove()}else a.popup.redirect?(g=location.hash.substring(1),g=treeio.prepare_url(g),c=b.parents("div.popup-block-inner"),$("#loading-status").css("display","block"),c.length>0&&$(c).first().each(function(){g="/user/popup/"+$(this).attr("id")+"/url="+$(this).parent().data("link").replace("#","")}),$.ajax({url:g, dataType:"json",success:treeio.process_ajax,complete:treeio.process_html}),b.parent().remove()):(c=b.parent().children("div.popup-title-block"),c.children("span.popup-title").html(a.popup.title),c.children("span.popup-subtitle").html(a.popup.subtitle),b.html(a.popup.content),treeio.prepare_popup_content(a.popup),b.parent().fadeIn(300),$("input:text:visible:first",b).focus())}$("#loading-status").css("display","none")},prepare_popups:function(a){$("a.popup-link",a).each(function(){$(this).hasClass("popup-link-out")|| $(this).click(function(){var b=a.attr("id")+"-popup-"+$(this).attr("id")+"-"+Date.now();if($("#"+b).length)return!1;$("#loading-status").css("display","block");var c=$("<div></div>").addClass("popup-block").css("display","none").css("visibility","visible");c.data("link",$(this).attr("href"));var e=$("<div></div>").addClass("popup-title-block");e.append($("<span></span>").addClass("popup-title"));e.append($("<span></span>").addClass("popup-subtitle"));var g=$("<div></div>").addClass("popup-link-open"); g.click(function(){var a=$(this).parent().data("link");if(a)a=a.replace("#",""),window.location.hash=a,$(this).parent().remove()});var i=$("<div></div>").addClass("popup-close");i.click(function(){$("#"+b).length&&$("#"+b).parent().remove()});var m=$("<div></div>").addClass("popup-block-inner");m.attr("id",b);$(this).attr("field")&&(m.data("field",$(this).attr("field")),m.data("module",a.attr("id")));c.append(i);c.append(g);c.append(e);c.append(m);a.append(c);e=c.parents("div.popup-block-inner"); e.length>0?(e=e.first().offset(),c.position({my:"center top",at:"center top",of:$(this),collision:"flip",offset:"-"+e.left+" -"+e.top+""})):c.position({my:"left top",at:"left top",of:$(this),collision:"fit",offset:"-30 -5"});c.draggable({handle:"div.popup-title-block",opacity:0.5,addClasses:!1});url="/user/popup/"+b+"/url="+$(this).attr("href").replace("#","");$.browser.msie&&$.browser.version.substr(0,1)<7&&(url="/user/popup/"+b+"/url=/"+$(this).attr("href").replace("#",""),c=window.location.href.replace(window.location.hash, ""),url=url.replace(c,""));url=url.replace("//","/");$.ajax({url:url,dataType:"json",success:treeio.process_popup_data});return!1})})},prepare_autocomplete:function(a){$("input.autocomplete",a).each(function(){$(this).data("hidden_field",$("#id_"+$(this).attr("name").replace("autocomplete_",""),a));$(this).autocomplete({source:$(this).attr("callback")+".json",focus:function(a,c){$(this).val(c.item.label);$(this).data("hidden_field").val(c.item.value);return!1},select:function(a,c){$(this).val(c.item.label); $(this).data("hidden_field").val(c.item.value);return!1}});$(this).change(function(){$(this).val()==""&&$(this).data("hidden_field").val("")})});$("input.multicomplete",a).each(function(){$(this).data("hidden_fields",$("#"+$(this).attr("name").replace("multicomplete_","multi_"),a));$(this).bind("keydown",function(a){a.keyCode===$.ui.keyCode.TAB&&$(this).data("autocomplete").menu.active&&a.preventDefault()});$(this).bind("keyup",function(a){if(a.keyCode===$.ui.keyCode.BACKSPACE||a.keyCode===$.ui.keyCode.DELETE)for(var a= treeio.utils.split(this.value),b=$("input",$(this).data("hidden_fields")),g=0;g<b.length;g++){var i=$(b[g]).attr("label");$.inArray(i,a)==-1&&$(b[g]).remove()}});var b=$(this).attr("callback")+".json";$(this).autocomplete({source:function(a,e){$.getJSON(b,{term:treeio.utils.extractLast(a.term)},e)},search:function(){if(treeio.utils.extractLast(this.value).length<2)return!1},focus:function(){return!1},select:function(a,b){var g=treeio.utils.split(this.value);g.pop();g.push(b.item.label);g.push(""); var i=$(this).data("hidden_fields"),m=$("<input>");m.attr("type","hidden").attr("name",$(this).attr("name").replace("multicomplete_","")).attr("id","id_"+m.attr("name")).attr("value",b.item.value).attr("label",b.item.label);this.value=g.join(", ");i.append(m);g=treeio.utils.split(this.value);i=$("input",$(this).data("hidden_fields"));for(m=0;m<i.length;m++){var h=$(i[m]).attr("label");$.inArray(h,g)==-1&&$(i[m]).remove()}return!1}})})},prepare_search_duplicates:function(a){$("input.duplicates", a).each(function(){$(this).data("hidden_field",$("#id_"+$(this).attr("name").replace("duplicates_",""),a));$(this).autocomplete({source:$(this).attr("callback")+".json",focus:function(a,c){$(this).val(c.item.label);return!1},select:function(a,c){$(this).val(c.item.label);return!1}})})},prepare_attachments:function(a){$(".delete-attachment",a).each(function(){$(this).click(function(){Dajaxice.treeio.account.attachment_delete(Dajax.process,{attachment_id:$(this).attr("attachment")});return!1})}); $(".attachment-uploader",a).each(function(){new qq.FileUploader({action:$(this).attr("action"),element:this,multiple:!1,onComplete:function(a,c,e){Dajaxice.treeio.account.attachment(Dajax.process,{object_id:e.object_id,update_id:e.update_id})},onAllComplete:function(){},params:{csrf_token:$(this).attr("csrf"),csrf_name:"csrfmiddlewaretoken",csrf_xname:"X-CSRFToken"},text:treeio_attachment_text})});$(".attachment-record-uploader",a).each(function(){new qq.FileUploader({action:$(this).attr("action"), element:this,multiple:!1,onComplete:function(a,c,e){Dajaxice.treeio.account.attachment(Dajax.process,{object_id:e.object_id,update_id:e.update_id})},onAllComplete:function(){},params:{csrf_token:$(this).attr("csrf"),csrf_name:"csrfmiddlewaretoken",csrf_xname:"X-CSRFToken"},text:treeio_attachment_record_text})})},prepare_invites:function(a){$(".easy-invite",a).each(function(){$(this).click(function(){Dajaxice.treeio.account.easy_invite(Dajax.process,{emails:$(this).attr("emails")});return!1})})}, prepare_comments:function(a){$("a.like-button",a).each(function(){$(this).click(function(){$(this).parent().submit();return!1})});$("a.comment-button",a).each(function(){$(this).click(function(){var a=$("div.comments-likes-box-"+$(this).attr("object"));a.toggle();a.css("display")!="none"&&$("textarea:visible:first",a).focus();return!1})});$("span.comments-likes-toggle",a).each(function(){$(this).click(function(){var a=$("div.comments-likes-box-"+$(this).attr("object"));a.toggle();a.css("display")!= "none"&&$("textarea:visible:first",a).focus();return!1})});$("form.like-form",a).each(function(){var a="comments-likes-box-"+$(this).attr("object");$("#"+a);$(this).attr("target",a);$(this).submit(function(){var a=$(this).attr("target"),b=$(this).parents("#"+a),a=treeio.utils.generate_id(a);b.attr("id",a);a={target:"#"+a,form:$(this).serializeObject(),expand:!0};Dajaxice.treeio.account.comments_likes(Dajax.process,a);return!1})})},prepare_tags:function(a){$("input#id_multicomplete_tags",a).each(function(){$(this).focus(); $(this).focusout(function(){$(this).parent("form").submit()});$(this).parent("form").submit(function(){var a=$(this).attr("target"),c=$(this).parents(a),a=treeio.utils.generate_id();c.attr("id",a);a={target:"#"+a,object_id:$(this).attr("object"),edit:!0,formdata:$(this).serializeObject()};Dajaxice.treeio.account.tags(Dajax.process,a);return!1})});$("span.tags-box").each(function(){$("span.tags-box-link",$(this)).css("visibility","hidden");$(this).hover(function(){$("span.tags-box-link",$(this)).css("visibility", "visible")},function(){$("span.tags-box-link",$(this)).css("visibility","hidden")})})},prepare_forms:function(a){$("form",a).each(function(){if(!$(this).hasClass("like-form")&&!$(this).hasClass("tags-form")){(url=$(this).attr("action"))||(url=location.hash.substring(1));if($(this).attr("method")=="get"){$(this).attr("action",url);var a={beforeSubmit:function(a,b){var g=b.attr("action");g.indexOf("!")!=-1&&(g=g.substring(0,g.indexOf("!")));g+="!"+b.formSerialize();window.location.hash="#"+g;return!1}}}else url= treeio.prepare_url(url),a={beforeSubmit:function(){$("#loading-status").css("display","block")},url:url,dataType:"json",success:treeio.process_ajax};$(this).ajaxForm(a)}});treeio.prepare_mass_form(a);treeio.prepare_filter_form(a);treeio.prepare_autocomplete(a);treeio.prepare_search_duplicates(a);treeio.put_datepicker(a)},prepare_dropdown_menus:function(){$("a.menu-dropdown-link").each(function(){$(this).click(function(){var a=$("#"+$(this).attr("dropdown"));$(this).addClass("menu-dropdown-link-active"); a.slideDown("fast").show()});$(this).hover(function(){var a=$("#"+$(this).attr("dropdown"));$(this).addClass("menu-dropdown-link-active");a.slideDown("fast").show()});$(this).parent().hover(function(){},function(){var a=$(this).children("a.menu-dropdown-link");$(this).children("#"+a.attr("dropdown")).slideUp("fast");a.removeClass("menu-dropdown-link-active")})})},prepare_toolbar:function(){$("span.hide_toolbar").click(function(){$("#toolbar").slideToggle("fast",function(){$("#toolbar_action").fadeIn("slow")})}); $("span.show_toolbar").click(function(){$("#toolbar_action").fadeOut("fast",function(){$("#toolbar").slideToggle("fast")})})}};treeio.utils={split:function(a){return a.split(/,\s*/)},extractLast:function(a){return treeio.utils.split(a).pop()},generate_id:function(a){a||(a="ajax");for(var a=a+"-"+Date.now(),b=0;$("#"+a).length>0;)a=a+"-"+b,b++;return a}}; treeio.modules={"treeio-home":{init:function(){var a={opacity:0.6,handle:"div.widget-title",connectWith:"#widget-panel-right",items:"div.widget-block",cursor:"move",update:function(){var a=$(this).attr("callback")+"?"+$(this).sortable("serialize");$.ajax({url:a})},start:function(a,c){$("#widget-panel-left").addClass("widget-panel-active");$("#widget-panel-right").addClass("widget-panel-active");c.item.addClass("widget-block-moving")},beforeStop:function(a,c){c.item.removeClass("widget-block-moving")}, stop:function(){$("#widget-panel-left").removeClass("widget-panel-active");$("#widget-panel-right").removeClass("widget-panel-active")}};$("#widget-panel-left").sortable(a);a.connectWith="#widget-panel-left";$("#widget-panel-right").sortable(a)}},"treeio-core":{init:function(){$("div.setup-module-box").length>0&&$("div.setup-module-box").each(function(){$(this).click(function(){$(this).toggleClass("setup-module-box-active");$("input",$(this)).each(function(){$(this).attr("checked",!$(this).attr("checked"))})})})}}, "treeio-projects":{timer:function(){var a=$(".projects-timeslot");a&&(a.each(function(){var a=$(this).data("start"),c=Date.now();a==null&&(a=parseInt($(this).attr("diff")),a=c-a*1E3,$(this).data("start",a));var e=(c-a)/1E3,a=Math.floor(e/3600),c=Math.floor((e/3600-a)*60),e=Math.round(((e/3600-a)*60-c)*60);a+=":";a+=c>=10?c+":":"0"+c+":";a+=e>=10?e:"0"+e;$(this).html(a)}),window.setTimeout(treeio.modules["treeio-projects"].timer,1E3))},init:function(){$(".projects-timeslot")&&this.timer();var a= $("div.ganttChart");a&&this.gantt(a)},gantt:function(a){a.each(function(){if(ganttData){$(this).ganttView({data:ganttData,behavior:{onClick:function(){},onResize:function(a){Dajaxice.treeio.projects.gantt(callback_function,{task:a.id,start:a.start.toString("yyyy-M-d"),end:a.end.toString("yyyy-M-d")})},onDrag:function(a){Dajaxice.treeio.projects.gantt(callback_function,{task:a.id,start:a.start.toString("yyyy-M-d"),end:a.end.toString("yyyy-M-d")})}}});var a=$("#module-treeio-projects");$(this).ganttView("setSlideWidth", $("td.module-content",a).width()-60);treeio.prepare_popups($(this));$(window).resize(function(){$("div.ganttChart",a).each(function(){var a=$("#module-treeio-projects");$(this).ganttView("setSlideWidth",$("td.module-content",a).width()-60)})})}})}},"treeio-reports":{init:function(){}}}; treeio.nuvius={profile:null,access_popup:!1,reload_on_profile:!0,fetch_profile:function(){$("#loading-status").css("display","block");$("#loading-status-text").html("Loading...");$.ajax({url:nuvius_profile_url,dataType:"jsonp",success:treeio.nuvius.load_profile,error:treeio.show_error})},check_profile:function(a){a?a.key_valid&&(a.username?$("#nuvius-username").html(a.username):$("#nuvius-username").html("Anonymous User"),treeio.nuvius.reload_on_profile&&treeio.do_ajax()):treeio.nuvius.profile&& (a=nuvius_profile_check_url,a+="?nuvius_id="+treeio.nuvius.profile.id+"&profile_key="+treeio.nuvius.profile.key,$.ajax({url:a,dataType:"json",success:treeio.nuvius.check_profile,error:treeio.show_error}))},load_profile:function(a){$("#loading-status").css("display","none");if(a.profile)!a.profile.access_granted&&treeio.nuvius.access_popup?($.colorbox({href:a.profile.access_url,width:"80%",height:"80%",iframe:!0,overlayClose:!1,onClosed:treeio.nuvius.fetch_profile}),treeio.nuvius.access_popup= !1):(treeio.nuvius.profile=a.profile,treeio.nuvius.check_profile())},fetch_access:function(){treeio.nuvius.access_popup=!0;treeio.nuvius.fetch_profile()},close_iframe:function(){$.colorbox.close()}}; $(function(){$(window).hashchange(treeio.do_ajax);$(window).hashchange();treeio.prepare_dropdown_menus();treeio.prepare_toolbar();treeio.convert_links();treeio.prepare_ajax_links();$(".menu-item a").each(function(){$(this).click(function(){$(this).hasClass("active")&&$(this).attr("href")==window.location.hash&&$(window).hashchange()})});$("#perspective_switch").each(function(){(url=$(this).attr("action"))||(url=location.hash.substring(1));url=treeio.prepare_url(url);var a={beforeSubmit:function(){$("#loading-status").css("display", "block")},url:url,dataType:"json",success:treeio.process_ajax};$(this).ajaxForm(a);$(this).children("select").change(function(){$("#perspective_switch").submit()})});$("form#search_form").each(function(){(url=$(this).attr("action"))||(url=location.hash.substring(1));$(this).attr("action",url);$(this).ajaxForm({beforeSubmit:function(a,b){var c=b.attr("action");c+="!"+b.formSerialize();window.location.hash="#"+c;return!1}})});$(".module-block").data("title",document.title);$(".module-block").each(function(){doc= $(this);$("form").length&&(treeio.prepare_forms(doc),treeio.prepare_comments(doc),$("textarea").length&&treeio.put_mce(doc),treeio.put_datepicker(doc),treeio.prepare_forms(doc));treeio.prepare_tags();treeio.prepare_slider_sidebar(doc);treeio.prepare_list_actions(doc);treeio.prepare_attachments(doc);treeio.prepare_invites(doc);treeio.prepare_popups(doc);treeio.showhidejs(doc);module_name=$(this).attr("id").substring(7);treeio.prepare_module_stuff(module_name)})}); (function(a){a.flexbox=function(b,c){function e(a,b){M&&clearTimeout(M);M=setTimeout(function(){g(1,a,"")},b?c.queryDelay*5:c.queryDelay)}function g(b,h,e){h&&(e="");var g=e&&e.length>0?e:a.trim(H.val());g.length>=c.minChars||h?(L.outerHeight()>0&&L.css("height",L.outerHeight()),L.html("").attr("scrollTop",0),(h=j(g,b))?(l(h.data,g),m(b,h.t)):(h={q:g,p:b,s:v,contentType:"application/json; charset=utf-8"},e=function(a,h){h===!0&&(g=h);var e=parseInt(a[c.totalProperty]);if(isNaN(e)&&c.paging){c.maxCacheBytes<= 0&&alert('The "maxCacheBytes" configuration option must be greater\nthan zero when implementing client-side paging.');var e=a[c.resultsProperty].length,j=e/v;e%v>0&&(j=parseInt(++j));for(var i=1;i<=j;i++){var o={};o[c.totalProperty]=e;o[c.resultsProperty]=a[c.resultsProperty].splice(0,v);i===1&&(q=l(o,g));n(g,i,v,e,o,q)}}else{var q=l(a,g);n(g,b,v,e,a,q)}m(b,e)},typeof c.source==="object"?c.allowInput?e(i(c.source,h)):e(c.source):c.method.toUpperCase()=="POST"?a.post(c.source,h,e,"json"):a.getJSON(c.source, h,e))):q()}function i(a,b){var h={};h[c.resultsProperty]=[];for(var e=h[c.totalProperty]=0,j=0;j<a[c.resultsProperty].length;j++)a[c.resultsProperty][j].name.toLowerCase().indexOf(b.q.toLowerCase())===0&&(h[c.resultsProperty][e++]=a[c.resultsProperty][j],h[c.totalProperty]+=1);c.paging&&(e=(b.p-1)*b.s,h[c.resultsProperty]=h[c.resultsProperty].splice(e,e+b.s>h[c.totalProperty]?h[c.totalProperty]-e:b.s));return h}function m(a,b){U.html("").removeClass(c.paging.cssClass);if(c.showResults&&c.paging&& b>v){var h=b/v;b%v>0&&(h=parseInt(++h));o(h,a,b)}}function h(){g(parseInt(a(this).attr("page")),!0,H.attr("pq"));return!1}function o(b,e,j){U.addClass(c.paging.cssClass);var i=a("<a/>").attr("href","#").addClass("page").click(h),o=a("<span></span>").addClass("page"),m=ha.attr("id");e>1?(i.clone(!0).attr("id",m+"f").attr("page",1).html("&lt;&lt;").appendTo(U),i.clone(!0).attr("id",m+"p").attr("page",e-1).html("&lt;").appendTo(U)):(o.clone(!0).html("&lt;&lt;").appendTo(U),o.clone(!0).html("&lt;").appendTo(U)); if(c.paging.style==="links"){var n=c.paging.maxPageLinks;if(b<=n)for(var l=1;l<=b;l++)l===e?o.clone(!0).html(e).appendTo(U):i.clone(!0).attr("page",l).html(l).appendTo(U);else{startPage=e+parseInt(n/2)>b?b-n+1:e-parseInt(n/2);startPage>1?i.clone(!0).attr("page",startPage-1).html("...").appendTo(U):startPage=1;for(l=startPage;l<startPage+n;l++)l===e?o.clone(!0).html(l).appendTo(U):i.clone(!0).attr("page",l).html(l).appendTo(U);b>startPage+n&&i.clone(!0).attr("page",l).html("...").appendTo(U)}}else c.paging.style=== "input"&&a("<input/>").addClass("box").click(function(){this.select()}).keypress(function(c){var h=this.value;if(/^13$|^39$|^37$/.test(c.keyCode))switch(c.preventDefault&&c.preventDefault(),c.stopPropagation&&c.stopPropagation(),c.cancelBubble=!0,c.returnValue=!1,c.keyCode){case 13:/^\d+$/.test(h)&&h>0&&h<=b?g(h,!0):alert("Please enter a page number between 1 and "+b);break;case 39:a("#"+ha.attr("id")+"n").click();break;case 37:a("#"+ha.attr("id")+"p").click()}}).val(e).appendTo(U);e<b?(i.clone(!0).attr("id", m+"n").attr("page",+e+1).html("&gt;").appendTo(U),i.clone(!0).attr("id",m+"l").attr("page",b).html("&gt;&gt;").appendTo(U)):(o.clone(!0).html("&gt;").appendTo(U),o.clone(!0).html("&gt;&gt;").appendTo(U));i=(e-1)*v+1;o=i>j-v?j:i+v-1;c.paging.showSummary&&(e=c.paging.summaryTemplate.applyTemplate({start:i,end:o,total:j,page:e,pages:b}),a("<br/>").appendTo(U),a("<span></span>").addClass(c.paging.summaryClass).html(e).appendTo(U))}function j(a,b){var c=a+N+b;if(A[c])for(var h=0;h<Q.length;h++)if(Q[h]=== c)return Q.unshift(Q.splice(h,1)[0]),A[c];return!1}function n(a,b,h,e,j,g){if(c.maxCacheBytes>0){for(;Q.length&&x+g>c.maxCacheBytes;){var i=Q.pop();x-=i.size}i=a+N+b;A[i]={q:a,p:b,s:h,t:e,size:g,data:j};Q.push(i);x+=g}}function l(b,h){var e=0,j=0;if(b)if(parseInt(b[c.totalProperty])===0&&c.noResultsText&&c.noResultsText.length>0)L.addClass(c.noResultsClass).html(c.noResultsText),P.show();else{L.removeClass(c.noResultsClass);for(var g=0;g<b[c.resultsProperty].length;g++){var i=b[c.resultsProperty][g], o=c.resultTemplate.applyTemplate(i),m=h===o,n=!1,l=!1,w=i[c.displayValue];if(!m&&c.highlightMatches&&h!==""){var v=h,x=w.toLowerCase().indexOf(h.toLowerCase()),x='<span class="'+c.matchClass+'">'+w.substr(x,h.length)+"</span>";o.match("<(.|\n)*?>")&&(l=!0,v="(>)([^<]*?)("+h+")((.|\n)*?)(<)",x='$1$2<span class="'+c.matchClass+'">$3</span>$4$6');o=o.replace(RegExp(v,c.highlightMatchesRegExModifier),x)}c.autoCompleteFirstMatch&&!l&&g===0&&h.length>0&&w.toLowerCase().indexOf(h.toLowerCase())===0&&(H.attr("pq", h),H.val(w),n=t(h.length,H.val().length));if(!c.showResults)return;$row=a("<div></div>").attr("id",i[c.displayValue]).attr("val",i[c.hiddenValue]).addClass("row").html(o).appendTo(L);(m||++j==1&&c.selectFirstMatch||n)&&$row.addClass(c.selectClass);e+=o.length}if(e===0)q();else return P.parent().css("z-index",11E3),P.show(),L.children("div").mouseover(function(){L.children("div").removeClass(c.selectClass);a(this).addClass(c.selectClass)}).mouseup(function(a){a.preventDefault();a.stopPropagation(); aa()}),c.maxVisibleRows>0&&(j=$row.outerHeight()*c.maxVisibleRows,L.css("max-height",j)),e}}function t(a,b){var c=H[0];if(c.createTextRange){var h=c.createTextRange();h.moveStart("character",a);h.moveEnd("character",b-c.value.length);h.select()}else c.setSelectionRange&&c.setSelectionRange(a,b);c.focus();return!0}function q(){H.data("active",!1);ha.css("z-index",0);P.hide()}function w(){if(!P.is(":visible"))return!1;var a=L.children("div."+c.selectClass);a.length||(a=!1);return a}function aa(){if($curr= w())H.val($curr.attr("id")).focus(),gb.val($curr.attr("val")),q(),c.onSelect&&(H.attr("hiddenValue",gb.val()),c.onSelect.apply(H[0]))}function E(){try{return document.getBoxObjectFor(document.body),!0}catch(a){return!1}}function Ma(){try{return document.body.getBoundingClientRect(),!0}catch(a){return!1}}var M=!1,Q=[],A=[],x=0,N="\u25ca",v=c.paging&&c.paging.pageSize?c.paging.pageSize:0,ha=a(b).css("position","relative").css("z-index",0),gb=a('<input type="hidden"/>').attr("id",ha.attr("id")+"_hidden").attr("name", ha.attr("id")).val(c.initialValue).appendTo(ha),H=a("<input/>").attr("id",ha.attr("id")+"_input").attr("autocomplete","off").addClass(c.inputClass).css("width",c.width+"px").appendTo(ha).click(function(){c.watermark!==""&&this.value===c.watermark?this.value="":this.select()}).focus(function(){a(this).removeClass("watermark")}).blur(function(){setTimeout(function(){H.data("active")||q()},200)}).keydown(function(b){var h=0;typeof b.ctrlKey!=="undefined"?(b.ctrlKey&&(h|=1),b.shiftKey&&(h|=2)):(b.modifiers& Event.CONTROL_MASK&&(h|=1),b.modifiers&Event.SHIFT_MASK&&(h|=2));if(!/16$|17$/.test(b.keyCode)){var j=b.keyCode===9,g=b.keyCode===27,h=b.keyCode===9&&h>0,i=b.keyCode===8;j&&w()&&aa();if(/27$|38$|33$|34$/.test(b.keyCode)&&P.is(":visible")||/13$|40$/.test(b.keyCode)||!c.allowInput)switch(b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation(),b.cancelBubble=!0,b.returnValue=!1,b.keyCode){case 38:if(($curr=w())&&$curr.prev().length>0){$curr.removeClass(c.selectClass).prev().addClass(c.selectClass); var o=L.attr("scrollTop"),m=$curr[0],n=$curr.parent()[0],l,t,v;if(E())v=document.getBoxObjectFor(m).height,l=document.getBoxObjectFor(L[0]).y-v*2,t=document.getBoxObjectFor(m).y-document.getBoxObjectFor(L[0]).y;else if(Ma())l=n.getBoundingClientRect().top,v=m.getBoundingClientRect(),t=v.top,v=v.bottom-t;t<=l&&L.attr("scrollTop",o-v)}else $curr||L.children("div:last-child").addClass(c.selectClass);break;case 40:if(P.is(":visible"))if(($curr=w())&&$curr.next().length>0){$curr.removeClass(c.selectClass).next().addClass(c.selectClass); l=L.attr("scrollTop");t=$curr[0];if(E())o=document.getBoxObjectFor(L[0]).y+L.attr("offsetHeight"),m=document.getBoxObjectFor(t).y+$curr.attr("offsetHeight"),n=document.getBoxObjectFor(t).height;else if(Ma())o=L[0].getBoundingClientRect().bottom,t=t.getBoundingClientRect(),m=t.bottom,n=m-t.top;m>=o&&L.attr("scrollTop",l+n)}else $curr||L.children("div:first-child").addClass(c.selectClass);else e(!0);break;case 13:w()?aa():e(!0);break;case 27:q();break;case 34:if(c.paging)a("#"+ha.attr("id")+"n").click(); else if(($curr=w())&&$curr.next().length>0){$curr.removeClass(c.selectClass);for(l=0;l<c.maxVisibleRows;l++)$curr.next().length>0&&($curr=$curr.next());$curr.addClass(c.selectClass);l=L.attr("scrollTop");L.attr("scrollTop",l+L.height())}else $curr||L.children("div:first-child").addClass(c.selectClass);break;case 33:if(c.paging)a("#"+ha.attr("id")+"p").click();else if(($curr=w())&&$curr.prev().length>0){$curr.removeClass(c.selectClass);for(l=0;l<c.maxVisibleRows;l++)$curr.prev().length>0&&($curr=$curr.prev()); $curr.addClass(c.selectClass);l=L.attr("scrollTop");L.attr("scrollTop",l-L.height())}else $curr||L.children("div:last-child").addClass(c.selectClass)}else!g&&!j&&!h&&e(!1,i)}});c.initialValue!==""?H.val(c.initialValue).removeClass("watermark"):H.val(c.watermark).addClass("watermark");var Da=0;if(c.showArrow&&c.showResults){var Y=function(){P.is(":visible")?q():(H.focus(),c.watermark!==""&&H.val()===c.watermark?H.val(""):H.select(),M&&clearTimeout(M),M=setTimeout(function(){g(1,!0,c.arrowQuery)},c.queryDelay))}, Da=a("<span></span>").attr("id",ha.attr("id")+"_arrow").addClass(c.arrowClass).addClass("out").hover(function(){a(this).removeClass("out").addClass("over")},function(){a(this).removeClass("over").addClass("out")}).mousedown(function(){a(this).removeClass("over").addClass("active")}).mouseup(function(){a(this).removeClass("active").addClass("over")}).click(Y).appendTo(ha).width();H.css("width",c.width-Da+"px")}if(!c.allowInput)c.selectFirstMatch=!1,H.click(Y);var Y=H.outerHeight()-H.height()-2,Z=H.outerWidth()- 2,da=H.outerHeight();Y===0?(Z+=4,da+=4):Y!==4&&(Z+=Y,da+=Y);var P=a("<div></div>").attr("id",ha.attr("id")+"_ctr").css("width",Z+Da).css("top",da).css("left",0).addClass(c.containerClass).appendTo(ha).mousedown(function(){H.data("active",!0)}).hide(),L=a("<div></div>").addClass(c.contentClass).appendTo(P).scroll(function(){}),U=a("<div></div>").appendTo(P);ha.css("height",H.outerHeight());String.prototype.applyTemplate=function(a){try{return a===""?this:this.replace(/{([^{}]*)}/g,function(b,c){var h; if(c.indexOf(".")!==-1){h=c.split(".");for(var e=a,j=0;j<h.length;j++)e=e[h[j]];h=e}else h=a[c];if(typeof h==="string"||typeof h==="number")return h;else throw b;})}catch(b){alert("Invalid JSON property "+b+" found when trying to apply resultTemplate or paging.summaryTemplate.\nPlease check your spelling and try again.")}}};a.fn.flexbox=function(b,c){if(b)try{var e=a.fn.flexbox.defaults,g=a.extend({},e,c),i;for(i in g)if(e[i]===void 0)throw"Invalid option specified: "+i+"\nPlease check your spelling and try again."; g.source=b;if(c){g.paging=c.paging||c.paging==null?a.extend({},e.paging,c.paging):!1;for(i in g.paging)if(e.paging[i]===void 0)throw"Invalid option specified: "+i+"\nPlease check your spelling and try again.";if(c.displayValue&&!c.hiddenValue)g.hiddenValue=c.displayValue}this.each(function(){new a.flexbox(this,g)});return this}catch(m){typeof m==="object"?alert(m.message):alert(m)}};a.fn.flexbox.defaults={method:"GET",queryDelay:100,allowInput:!0,containerClass:"ffb",contentClass:"content",selectClass:"ffb-sel", inputClass:"ffb-input",arrowClass:"ffb-arrow",matchClass:"ffb-match",noResultsText:"No matching results",noResultsClass:"ffb-no-results",showResults:!0,selectFirstMatch:!0,autoCompleteFirstMatch:!1,highlightMatches:!0,highlightMatchesRegExModifier:"i",minChars:1,showArrow:!0,arrowQuery:"",onSelect:!1,maxCacheBytes:32768,resultTemplate:"{name}",displayValue:"name",hiddenValue:"id",initialValue:"",watermark:"",width:200,resultsProperty:"results",totalProperty:"total",maxVisibleRows:0,paging:{style:"input", cssClass:"paging",pageSize:10,maxPageLinks:5,showSummary:!0,summaryClass:"summary",summaryTemplate:"Displaying {start}-{end} of {total} results"}};a.fn.setValue=function(b){var c="#"+this.attr("id");a(c+"_hidden,"+c+"_input").val(b).removeClass("watermark")}})(jQuery);$.fx.speeds._default=500; $(function(){$("#open-chat").click(function(){$("#chat-frame").css("display")=="none"?($("#chat-frame").fadeIn(300),$("#chat-icon").attr("src","/static/icons/chat.gif")):$("#chat-frame").fadeOut(300);return!1});$("#chat-close").click(function(){$("#chat-frame").fadeOut(300)})}); var chat={stringify:function(a){var b=typeof a;if(b!="object"||a===null)return b=="string"&&(a='"'+a+'"'),String(a);else{var c,e,g=[],i=a&&a.constructor==Array;for(c in a)e=a[c],b=typeof e,b=="string"?e='"'+e+'"':b=="object"&&e!==null&&(e=JSON.stringify(e)),g.push((i?"":'"'+c+'":')+String(e));return(i?"[":"{")+String(g)+(i?"]":"}")}},linsearch:function(a,b){k=!1;for(var c=0;c<=a.length-1;c++)if(a[c]==b){k=!0;break}return k},check_userslist:function(a,b){k=!0;for(var c=0;c<=b.length-1;c++)if(chat.linsearch(a, b[c])==!1){k=!1;break}for(c=0;c<=a.length-1;c++)if(chat.linsearch(b,a[c])==!1){k=!1;break}return k},check_conferenceslist:function(a,b){for(var c=0;c<=b.length-1;c++)if(chat.linsearch(a,b[c])==!1)chat.ui.on_close_conference(b[c])},parse_json_conference:function(a){chat.events.on_conferences_list(a.conferences);chat.events.on_users_list(a.users);chat.events.on_messages(a.new_data);if(a.notifications)a.notifications.length=a.notifications.length||[],a.notifications.length>0&&treeio.process_notifications(a.notifications)}, get_location:function(){return window.location.hash==""?"#":""+window.location.hash},sendJSON:function(a){a.location=chat.get_location();data=chat.stringify(a);$.ajax({type:"POST",url:chat.option.url,typedata:"json",data:{json:data},timeout:chat.option.timeout,success:function(a){chat.parse_json_conference(a)}})},connect:function(){chat.sendJSON({cmd:"Connect"});chat.events.on_connect()},disconnect:function(){sendJSON({cmd:"Disconnect"});chat.events.on_disconnect()},send:function(a,b){json={cmd:"Message", data:{id:a,text:b}};chat.sendJSON(json)},exit_from_conference:function(a){json={cmd:"Exit",data:{id:a}};chat.sendJSON(json)},get_new_messages:function(){json={cmd:"Get",location:chat.get_location()};data=chat.stringify(json);$.ajax({type:"POST",url:chat.option.url,typedata:"json",data:{json:data},timeout:chat.option.timeout,success:function(a){chat.parse_json_conference(a)},complete:function(){setTimeout(chat.get_new_messages,chat.option.interval)}})},delete_conference:function(a){json={cmd:"Delete", data:{id:a}};chat.sendJSON(json)},remove_users_in_conference:function(a,b){json={cmd:"Remove",data:{id:a,users:b}};chat.sendJSON(json)},add_users_in_conference:function(a,b){json={cmd:"Add",data:{id:a,users:b}};chat.sendJSON(json)},create_conference:function(a,b){json={cmd:"Create",data:{title:a,users:b}};chat.sendJSON(json)}};chat.events={on_connect:function(){chat.get_new_messages()},on_disconnect:function(){},on_messages:function(){},on_users_list:function(){},on_conferences_list:function(){}}; chat.option={interval:2E3,url:"/chat",timeout:6E4}; chat.ui={add_nick_in_input:function(a){$("#chat-input-msg").val($("#chat-input-msg").val()+a+": ");$("#chat-input-msg").focus()},get_id_active_conference:function(){activeTab=$("#chat-tabs").tabs("option","selected");id_conference=$($(".ui-tabs-panel").get()[activeTab]).attr("id");return""+id_conference},send_msg:function(){chat.send(chat.ui.get_id_active_conference(),$("#chat-input-msg").val());$("#chat-input-msg").val("")},get_json_userlist:function(){data={results:[]};$.each($(".chat-users p"), function(){$(this).text()!="+"&&data.results.push({id:$(this).attr("user"),name:$(this).text()})});return data},on_close_conference:function(a){$("li a[href=#"+a+"]").prev("img").attr("src","/static/icons/forest.png");delete chat.conferences_dic[a]}};chat.conferences_dic={};chat.userslist={results:[],users:[]}; chat.events.on_users_list=function(a){a=a||[];users_list=function(){list=[];if(a)for(var b=0;b<a.length;b++)list.push(a[b].name);return list}();$("#chat-title").text("Chat ("+a.length+")");if(a.length>0)if(chat.check_userslist(chat.userslist.users,users_list)==!1){$(".chat-users").html("");for(var b=0;b<a.length;b++)$("<div/>").append($("<p/>",{text:a[b].profile,user:a[b].name}).bind("dblclick",function(){chat.create_conference($(this).text().split(" ",1),[$(this).attr("user")])})).append($("<span/>").addClass("chat-users-actions").append($("<a/>", {text:"+",user:a[b].name}).addClass("chat-invite-user").bind("click",function(){chat.add_users_in_conference(chat.ui.get_id_active_conference(),[$(this).attr("user")]);$("a.chat-invite-user").hide();$("div.chat-fb-div").hide()})).append(' <a href="'+a[b].location+'">#</a>')).append($("<br/>")).appendTo(".chat-users");a.length==0&&$(".chat-users").html("<p>No users online</p>");chat.userslist.results=chat.ui.get_json_userlist().results;$(".chat-fb").html("");$(".chat-fb").flexbox(chat.ui.get_json_userlist(), {width:100,maxVisibleRows:10,onSelect:function(){chat.add_users_in_conference(chat.ui.get_id_active_conference(),[$(this).attr("hiddenvalue")])}})}else for(b=0;b<a.length;b++)$("a[user='"+a[b].name+"'] + a").attr("href",a[b].location);else $(".chat-users").html(""),$(".chat-users").append($("<p/>",{text:"No users online"}));chat.userslist.users=users_list}; chat.events.on_conferences_list=function(a){function b(a){list=[];a=a||[];if(a.length>0)for(var b=0;b<a.length;b++)list.push(a[b].username);return list}function c(){$("<p/>").text("Between you,").appendTo("#"+conference.id+" .chat-with");for(var a=0;a<conference.users.length;a++)user=conference.users[a],$("<p/>").text(user.profile.split(" ",1)[0]).appendTo("#"+conference.id+" .chat-with");$("<p/>").append($("<a/>",{text:"Invite more people"}).attr("class","chat-invite").bind("click",function(){$("#"+ chat.ui.get_id_active_conference()+" .chat-fb-div").toggle();$("a.chat-invite-user").toggle();$("#"+chat.ui.get_id_active_conference()+" .chat-fb #_input").focus()})).appendTo("#"+conference.id+" .chat-with");conference.users.length==2&&$("a[href='#"+conference.id+"']").text(conference.users[0].profile.split(" ",1)[0]+" and "+conference.users[1].profile.split(" ",1)[0]);conference.users.length>2&&$("a[href='#"+conference.id+"']").text(conference.users[0].profile.split(" ",1)[0]+", "+conference.users[1].profile.split(" ", 1)[0]+", ...")}a=a||[];my_list_conferences=[];list_conferences=function(a){list=[];a=a||[];if(a.length>0)for(var b=0;b<a.length;b++)list.push(a[b].id);return list}(a);for(var e in chat.conferences_dic)my_list_conferences.push(e);chat.check_conferenceslist(list_conferences,my_list_conferences);if(a.length>0)for(e=0;e<a.length;e++)conference=a[e],id=conference.id,list_users=b(conference.users),chat.conferences_dic[id]?chat.check_userslist(chat.conferences_dic[conference.id].users,list_users)==!1&&($("#"+ conference.id+" .chat-with").html(""),c()):($("#chat-tabs").tabs("add","#"+conference.id,conference.title),chat.conferences_dic[id]={},chat.conferences_dic[id].active=!0,chat.conferences_dic[id].users=[],$("<div/>").attr("class","chat-with small").appendTo("#"+conference.id),$("<div/>").attr("class","chat-fb-div").append($("<div/>").attr("class","chat-fb").flexbox(chat.userslist,{width:100,maxVisibleRows:10,onSelect:function(){chat.add_users_in_conference(chat.ui.get_id_active_conference(),[$(this).attr("hiddenvalue")])}})).append($("<div/>").attr("class", "ui-icon ui-icon-close vertical").bind("click",function(){$(this).parent().hide();$("a.chat-invite-user").hide()})).appendTo("#"+conference.id),$("<div/>").attr("class","chat-body").appendTo("#"+conference.id),c()),chat.conferences_dic[conference.id].users=b(conference.users)}; chat.events.on_messages=function(a){a=a||[];if(a.length>0){for(var b=0;b<a.length;b++)for(var c in new_msg=a[b],new_msg){msg=new_msg[c].messages;for(var e=0;e<msg.length;e++)text=msg[e].text,date=msg[e].date,time=msg[e].time,user=msg[e].user,profile=msg[e].profile,$("<div/>").attr("class","message").append($("<div/>",{text:"["+time+"]"}).attr("class","time")).append($("<div/>",{user:user,text:"<"+profile+"> "}).attr("class","nick").bind("click",function(){chat.ui.add_nick_in_input($(this).text().slice(1, -2))})).append($("<div/>",{text:" "+text}).attr("class","text")).appendTo("#"+c+" .chat-body");msg.length>0&&$("li a[href=#"+c+"]").prev("img").fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100);$("#"+c+" .chat-body").animate({scrollTop:$("#"+c+" .chat-body").attr("scrollHeight")},1E3)}$("#chat-frame").css("display")=="none"&&$("#chat-icon").attr("src","/static/icons/chat-active.gif").fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100)}}; $(function(){$("#chat-tabs").tabs({tabTemplate:"<li><img src='/static/icons/forest-active.png' class='margin-bottom' style='float: left;'><a href='#{href}'>#{label}</a><span class='ui-icon ui-icon-close'>Remove Tab</span></li>"});$("#chat-tabs li span.ui-icon-close").live("click",function(){delete chat.conferences_dic[chat.ui.get_id_active_conference()];chat.exit_from_conference(chat.ui.get_id_active_conference());var a=$("li",$("#chat-tabs")).index($(this).parent());$("#chat-tabs").tabs("remove", a)});$("#chat-input-msg").keypress(function(a){if(a.which=="13")return chat.ui.send_msg(),!1});$("#chat-btn-send").click(chat.ui.send_msg);chat.connect();$(".chat-fb").flexbox(chat.ui.get_json_userlist(),{width:100,maxVisibleRows:10,onSelect:function(){chat.add_users_in_conference(chat.ui.get_id_active_conference(),[$(this).attr("hiddenvalue")])}})}); $(function(){var a=$("#tab_title"),b=$("#chat-dialog").dialog({autoOpen:!1,modal:!0,buttons:{Invite:function(){users=[];$.each($(".chat-dialog-users input:checked"),function(){users.push($(this).attr("name"))});users.length>0&&chat.add_users_in_conference(chat.ui.get_id_active_conference(),users);$(this).dialog("close")},Cancel:function(){$(this).dialog("close")}},open:function(){$(".chat-dialog-users").html("");$.each($(".chat-users p"),function(){$("<input>",{name:$(this).attr("user"),type:"CHECKBOX"}).appendTo($(".chat-dialog-users")); $(".chat-dialog-users").append($(this).text()).append($("<br/>"))});a.focus()},close:function(){c[0].reset()}}),c=$("form",b).submit(function(){b.dialog("close");return!1})}); Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),abbreviatedDayNames:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),shortestDayNames:"Su,Mo,Tu,We,Th,Fr,Sa".split(","),firstLetterDayNames:"S,M,T,W,T,F,S".split(","),monthNames:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),abbreviatedMonthNames:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","), amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i, may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i, millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT", offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]}; (function(){var a=Date,b=a.prototype,c=a.CultureInfo,e=function(a,b){b||(b=2);return("000"+a).slice(b*-1)};b.clearTime=function(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this};b.setTimeToNow=function(){var a=new Date;this.setHours(a.getHours());this.setMinutes(a.getMinutes());this.setSeconds(a.getSeconds());this.setMilliseconds(a.getMilliseconds());return this};a.today=function(){return(new Date).clearTime()};a.compare=function(a,b){if(isNaN(a)||isNaN(b))throw Error(a+ " - "+b);else if(a instanceof Date&&b instanceof Date)return a<b?-1:a>b?1:0;else throw new TypeError(a+" - "+b);};a.equals=function(a,b){return a.compareTo(b)===0};a.getDayNumberFromName=function(a){for(var b=c.dayNames,e=c.abbreviatedDayNames,g=c.shortestDayNames,a=a.toLowerCase(),i=0;i<b.length;i++)if(b[i].toLowerCase()==a||e[i].toLowerCase()==a||g[i].toLowerCase()==a)return i;return-1};a.getMonthNumberFromName=function(a){for(var b=c.monthNames,e=c.abbreviatedMonthNames,a=a.toLowerCase(),g=0;g< b.length;g++)if(b[g].toLowerCase()==a||e[g].toLowerCase()==a)return g;return-1};a.isLeapYear=function(a){return a%4===0&&a%100!==0||a%400===0};a.getDaysInMonth=function(b,c){return[31,a.isLeapYear(b)?29:28,31,30,31,30,31,31,30,31,30,31][c]};a.getTimezoneAbbreviation=function(a){for(var b=c.timezones,e=0;e<b.length;e++)if(b[e].offset===a)return b[e].name;return null};a.getTimezoneOffset=function(a){for(var b=c.timezones,e=0;e<b.length;e++)if(b[e].name===a.toUpperCase())return b[e].offset;return null}; b.clone=function(){return new Date(this.getTime())};b.compareTo=function(a){return Date.compare(this,a)};b.equals=function(a){return Date.equals(this,a||new Date)};b.between=function(a,b){return this.getTime()>=a.getTime()&&this.getTime()<=b.getTime()};b.isAfter=function(a){return this.compareTo(a||new Date)===1};b.isBefore=function(a){return this.compareTo(a||new Date)===-1};b.isToday=function(){return this.isSameDay(new Date)};b.isSameDay=function(a){return this.clone().clearTime().equals(a.clone().clearTime())}; b.addMilliseconds=function(a){this.setMilliseconds(this.getMilliseconds()+a);return this};b.addSeconds=function(a){return this.addMilliseconds(a*1E3)};b.addMinutes=function(a){return this.addMilliseconds(a*6E4)};b.addHours=function(a){return this.addMilliseconds(a*36E5)};b.addDays=function(a){this.setDate(this.getDate()+a);return this};b.addWeeks=function(a){return this.addDays(a*7)};b.addMonths=function(b){var c=this.getDate();this.setDate(1);this.setMonth(this.getMonth()+b);this.setDate(Math.min(c, a.getDaysInMonth(this.getFullYear(),this.getMonth())));return this};b.addYears=function(a){return this.addMonths(a*12)};b.add=function(a){if(typeof a=="number")return this._orient=a,this;a.milliseconds&&this.addMilliseconds(a.milliseconds);a.seconds&&this.addSeconds(a.seconds);a.minutes&&this.addMinutes(a.minutes);a.hours&&this.addHours(a.hours);a.weeks&&this.addWeeks(a.weeks);a.months&&this.addMonths(a.months);a.years&&this.addYears(a.years);a.days&&this.addDays(a.days);return this};var g,i,m;b.getWeek= function(){var a,b,c,e,l;g=!g?this.getFullYear():g;i=!i?this.getMonth()+1:i;m=!m?this.getDate():m;i<=2?(a=g-1,b=(a/4|0)-(a/100|0)+(a/400|0),c=b-(((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0)),e=0,l=m-1+31*(i-1)):(a=g,b=(a/4|0)-(a/100|0)+(a/400|0),c=b-(((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0)),e=c+1,l=m+(153*(i-3)+2)/5+58+c);a=(a+b)%7;e=l+3-(l+a-e)%7|0;g=i=m=null;return e<0?53-((a-c)/5|0):e>364+c?1:(e/7|0)+1};b.getISOWeek=function(){g=this.getUTCFullYear();i=this.getUTCMonth()+1;m=this.getUTCDate();return e(this.getWeek())}; b.setWeek=function(a){return this.moveToDayOfWeek(1).addWeeks(a-this.getWeek())};a._validate=function(a,b,c,e){if(typeof a=="undefined")return!1;else if(typeof a!="number")throw new TypeError(a+" is not a Number.");else if(a<b||a>c)throw new RangeError(a+" is not a valid value for "+e+".");return!0};a.validateMillisecond=function(b){return a._validate(b,0,999,"millisecond")};a.validateSecond=function(b){return a._validate(b,0,59,"second")};a.validateMinute=function(b){return a._validate(b,0,59,"minute")}; a.validateHour=function(b){return a._validate(b,0,23,"hour")};a.validateDay=function(b,c,e){return a._validate(b,1,a.getDaysInMonth(c,e),"day")};a.validateMonth=function(b){return a._validate(b,0,11,"month")};a.validateYear=function(b){return a._validate(b,0,9999,"year")};b.set=function(b){a.validateMillisecond(b.millisecond)&&this.addMilliseconds(b.millisecond-this.getMilliseconds());a.validateSecond(b.second)&&this.addSeconds(b.second-this.getSeconds());a.validateMinute(b.minute)&&this.addMinutes(b.minute- this.getMinutes());a.validateHour(b.hour)&&this.addHours(b.hour-this.getHours());a.validateMonth(b.month)&&this.addMonths(b.month-this.getMonth());a.validateYear(b.year)&&this.addYears(b.year-this.getFullYear());a.validateDay(b.day,this.getFullYear(),this.getMonth())&&this.addDays(b.day-this.getDate());b.timezone&&this.setTimezone(b.timezone);b.timezoneOffset&&this.setTimezoneOffset(b.timezoneOffset);b.week&&a._validate(b.week,0,53,"week")&&this.setWeek(b.week);return this};b.moveToFirstDayOfMonth= function(){return this.set({day:1})};b.moveToLastDayOfMonth=function(){return this.set({day:a.getDaysInMonth(this.getFullYear(),this.getMonth())})};b.moveToNthOccurrence=function(a,b){var c=0;if(b>0)c=b-1;else if(b===-1)return this.moveToLastDayOfMonth(),this.getDay()!==a&&this.moveToDayOfWeek(a,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(a,1).addWeeks(c)};b.moveToDayOfWeek=function(a,b){var c=(a-this.getDay()+7*(b||1))%7;return this.addDays(c===0?c+7*(b||1):c)};b.moveToMonth= function(a,b){var c=(a-this.getMonth()+12*(b||1))%12;return this.addMonths(c===0?c+12*(b||1):c)};b.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864E5)+1};b.getTimezone=function(){return a.getTimezoneAbbreviation(this.getUTCOffset())};b.setTimezoneOffset=function(a){var b=this.getTimezoneOffset();return this.addMinutes(Number(a)*-6/10-b)};b.setTimezone=function(b){return this.setTimezoneOffset(a.getTimezoneOffset(b))};b.hasDaylightSavingTime= function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()};b.isDaylightSavingTime=function(){return this.hasDaylightSavingTime()&&(new Date).getTimezoneOffset()===Date.today().set({month:6,day:1}).getTimezoneOffset()};b.getUTCOffset=function(){var a=this.getTimezoneOffset()*-10/6;return a<0?(a=(a-1E4).toString(),a.charAt(0)+a.substr(2)):(a=(a+1E4).toString(),"+"+a.substr(1))};b.getElapsed=function(a){return(a||new Date)-this};if(!b.toISOString)b.toISOString= function(){function a(b){return b<10?"0"+b:b}return'"'+this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+'Z"'};b._toString=b.toString;b.toString=function(a){var b=this;if(a&&a.length==1){var j=c.formatPatterns;b.t=b.toString;switch(a){case "d":return b.t(j.shortDate);case "D":return b.t(j.longDate);case "F":return b.t(j.fullDateTime);case "m":return b.t(j.monthDay);case "r":return b.t(j.rfc1123); case "s":return b.t(j.sortableDateTime);case "t":return b.t(j.shortTime);case "T":return b.t(j.longTime);case "u":return b.t(j.universalSortableDateTime);case "y":return b.t(j.yearMonth)}}var g=function(a){switch(a*1){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return a?a.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(a){if(a.charAt(0)==="\\")return a.replace("\\","");b.h=b.getHours;switch(a){case "hh":return e(b.h()< 13?b.h()===0?12:b.h():b.h()-12);case "h":return b.h()<13?b.h()===0?12:b.h():b.h()-12;case "HH":return e(b.h());case "H":return b.h();case "mm":return e(b.getMinutes());case "m":return b.getMinutes();case "ss":return e(b.getSeconds());case "s":return b.getSeconds();case "yyyy":return e(b.getFullYear(),4);case "yy":return e(b.getFullYear());case "dddd":return c.dayNames[b.getDay()];case "ddd":return c.abbreviatedDayNames[b.getDay()];case "dd":return e(b.getDate());case "d":return b.getDate();case "MMMM":return c.monthNames[b.getMonth()]; case "MMM":return c.abbreviatedMonthNames[b.getMonth()];case "MM":return e(b.getMonth()+1);case "M":return b.getMonth()+1;case "t":return b.h()<12?c.amDesignator.substring(0,1):c.pmDesignator.substring(0,1);case "tt":return b.h()<12?c.amDesignator:c.pmDesignator;case "S":return g(b.getDate());default:return a}}):this._toString()}})(); (function(){var a=Date,b=a.prototype,c=a.CultureInfo,e=Number.prototype;b._orient=1;b._nth=null;b._is=!1;b._same=!1;b._isSecond=!1;e._dateElement="day";b.next=function(){this._orient=1;return this};a.next=function(){return a.today().next()};b.last=b.prev=b.previous=function(){this._orient=-1;return this};a.last=a.prev=a.previous=function(){return a.today().last()};b.is=function(){this._is=!0;return this};b.same=function(){this._same=!0;this._isSecond=!1;return this};b.today=function(){return this.same().day()}; b.weekday=function(){return this._is?(this._is=!1,!this.is().sat()&&!this.is().sun()):!1};b.at=function(b){return typeof b==="string"?a.parse(this.toString("d")+" "+b):this.set(b)};e.fromNow=e.after=function(a){var b={};b[this._dateElement]=this;return(!a?new Date:a.clone()).add(b)};e.ago=e.before=function(a){var b={};b[this._dateElement]=this*-1;return(!a?new Date:a.clone()).add(b)};var g="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),i="january february march april may june july august september october november december".split(/\s/), m="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),h="Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),o="final first second third fourth fifth".split(/\s/);b.toObject=function(){for(var a={},b=0;b<m.length;b++)a[m[b].toLowerCase()]=this["get"+h[b]]();return a};a.fromObject=function(a){a.week=null;return Date.today().set(a)};for(var j=function(b){return function(){if(this._is)return this._is=!1,this.getDay()==b;if(this._nth!==null){this._isSecond&&this.addSeconds(this._orient* -1);this._isSecond=!1;var c=this._nth;this._nth=null;var e=this.clone().moveToLastDayOfMonth();this.moveToNthOccurrence(b,c);if(this>e)throw new RangeError(a.getDayName(b)+" does not occur "+c+" times in the month of "+a.getMonthName(e.getMonth())+" "+e.getFullYear()+".");return this}return this.moveToDayOfWeek(b,this._orient)}},n=function(b){return function(){var e=a.today(),h=b-e.getDay();b===0&&c.firstDayOfWeek===1&&e.getDay()!==0&&(h+=7);return e.addDays(h)}},l=0;l<g.length;l++)a[g[l].toUpperCase()]= a[g[l].toUpperCase().substring(0,3)]=l,a[g[l]]=a[g[l].substring(0,3)]=n(l),b[g[l]]=b[g[l].substring(0,3)]=j(l);g=function(a){return function(){return this._is?(this._is=!1,this.getMonth()===a):this.moveToMonth(a,this._orient)}};j=function(b){return function(){return a.today().set({month:b,day:1})}};for(n=0;n<i.length;n++)a[i[n].toUpperCase()]=a[i[n].toUpperCase().substring(0,3)]=n,a[i[n]]=a[i[n].substring(0,3)]=j(n),b[i[n]]=b[i[n].substring(0,3)]=g(n);g=function(a){return function(b){if(this._isSecond)return this._isSecond= !1,this;if(this._same){this._same=this._is=!1;for(var c=this.toObject(),b=(b||new Date).toObject(),e="",h=a.toLowerCase(),j=m.length-1;j>-1;j--){e=m[j].toLowerCase();if(c[e]!=b[e])return!1;if(h==e)break}return!0}a.substring(a.length-1)!="s"&&(a+="s");return this["add"+a](this._orient)}};j=function(a){return function(){this._dateElement=a;return this}};for(n=0;n<m.length;n++)i=m[n].toLowerCase(),b[i]=b[i+"s"]=g(m[n]),e[i]=e[i+"s"]=j(i);b._ss=g("Second");e=function(a){return function(b){if(this._same)return this._ss(b); if(b||b===0)return this.moveToNthOccurrence(b,a);this._nth=a;return a===2&&(b===void 0||b===null)?(this._isSecond=!0,this.addSeconds(this._orient)):this}};for(i=0;i<o.length;i++)b[o[i]]=i===0?e(-1):e(i)})(); (function(){Date.Parsing={Exception:function(a){this.message="Parse error at '"+a.substring(0,10)+" ...'"}};for(var a=Date.Parsing,b=a.Operators={rtoken:function(b){return function(c){var e=c.match(b);if(e)return[e[0],c.substring(e[0].length)];else throw new a.Exception(c);}},token:function(){return function(a){return b.rtoken(RegExp("^s*"+a+"s*"))(a)}},stoken:function(a){return b.rtoken(RegExp("^"+a))},until:function(a){return function(b){for(var c=[],e=null;b.length;){try{e=a.call(this,b)}catch(j){c.push(e[0]); b=e[1];continue}break}return[c,b]}},many:function(a){return function(b){for(var c=[],e=null;b.length;){try{e=a.call(this,b)}catch(j){break}c.push(e[0]);b=e[1]}return[c,b]}},optional:function(a){return function(b){var c=null;try{c=a.call(this,b)}catch(e){return[null,b]}return[c[0],c[1]]}},not:function(b){return function(c){try{b.call(this,c)}catch(e){return[null,c]}throw new a.Exception(c);}},ignore:function(a){return a?function(b){var c=null,c=a.call(this,b);return[null,c[1]]}:null},product:function(){for(var a= arguments[0],c=Array.prototype.slice.call(arguments,1),e=[],g=0;g<a.length;g++)e.push(b.each(a[g],c));return e},cache:function(b){var c={},e=null;return function(g){try{e=c[g]=c[g]||b.call(this,g)}catch(j){e=c[g]=j}if(e instanceof a.Exception)throw e;else return e}},any:function(){var b=arguments;return function(c){for(var e=null,g=0;g<b.length;g++)if(b[g]!=null){try{e=b[g].call(this,c)}catch(j){e=null}if(e)return e}throw new a.Exception(c);}},each:function(){var b=arguments;return function(c){for(var e= [],g=null,j=0;j<b.length;j++)if(b[j]!=null){try{g=b[j].call(this,c)}catch(n){throw new a.Exception(c);}e.push(g[0]);c=g[1]}return[e,c]}},all:function(){var a=a;return a.each(a.optional(arguments))},sequence:function(c,e,h){e=e||b.rtoken(/^\s*/);h=h||null;return c.length==1?c[0]:function(b){for(var g=null,n=null,l=[],t=0;t<c.length;t++){try{g=c[t].call(this,b)}catch(q){break}l.push(g[0]);try{n=e.call(this,g[1])}catch(w){n=null;break}b=n[1]}if(!g)throw new a.Exception(b);if(n)throw new a.Exception(n[1]); if(h)try{g=h.call(this,g[1])}catch(aa){throw new a.Exception(g[1]);}return[l,g?g[1]:b]}},between:function(a,c,e){var e=e||a,g=b.each(b.ignore(a),c,b.ignore(e));return function(a){a=g.call(this,a);return[[a[0][0],r[0][2]],a[1]]}},list:function(a,c,e){c=c||b.rtoken(/^\s*/);e=e||null;return a instanceof Array?b.each(b.product(a.slice(0,-1),b.ignore(c)),a.slice(-1),b.ignore(e)):b.each(b.many(b.each(a,b.ignore(c))),px,b.ignore(e))},set:function(c,e,h){e=e||b.rtoken(/^\s*/);h=h||null;return function(g){for(var j= null,n=null,l=null,t=[[],g],q=!1,w=0;w<c.length;w++){j=n=null;q=c.length==1;try{j=c[w].call(this,g)}catch(aa){continue}l=[[j[0]],j[1]];if(j[1].length>0&&!q)try{n=e.call(this,j[1])}catch(E){q=!0}else q=!0;!q&&n[1].length===0&&(q=!0);if(!q){j=[];for(q=0;q<c.length;q++)w!=q&&j.push(c[q]);j=b.set(j,e).call(this,n[1]);j[0].length>0&&(l[0]=l[0].concat(j[0]),l[1]=j[1])}l[1].length<t[1].length&&(t=l);if(t[1].length===0)break}if(t[0].length===0)return t;if(h){try{n=h.call(this,t[1])}catch(Ma){throw new a.Exception(t[1]); }t[1]=n[1]}return t}},forward:function(a,b){return function(c){return a[b].call(this,c)}},replace:function(a,b){return function(c){c=a.call(this,c);return[b,c[1]]}},process:function(a,b){return function(c){c=a.call(this,c);return[b.call(this,c[0]),c[1]]}},min:function(b,c){return function(e){var g=c.call(this,e);if(g[0].length<b)throw new a.Exception(e);return g}}},c=function(a){return function(){var b=null,c=[];arguments.length>1?b=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&& (b=arguments[0]);if(b)for(var e=b.shift();0<e.length;)return b.unshift(e[0]),c.push(a.apply(null,b)),b.shift(),c;else return a.apply(null,arguments)}},e="optional not ignore cache".split(/\s/),g=0;g<e.length;g++)b[e[g]]=c(b[e[g]]);c=function(a){return function(){return arguments[0]instanceof Array?a.apply(null,arguments[0]):a.apply(null,arguments)}};e="each any all".split(/\s/);for(g=0;g<e.length;g++)b[e[g]]=c(b[e[g]])})(); (function(){var a=Date,b=a.CultureInfo,c=function(a){for(var b=[],e=0;e<a.length;e++)a[e]instanceof Array?b=b.concat(c(a[e])):a[e]&&b.push(a[e]);return b};a.Grammar={};a.Translator={hour:function(a){return function(){this.hour=Number(a)}},minute:function(a){return function(){this.minute=Number(a)}},second:function(a){return function(){this.second=Number(a)}},meridian:function(a){return function(){this.meridian=a.slice(0,1).toLowerCase()}},timezone:function(a){return function(){var b=a.replace(/[^\d\+\-]/g, "");b.length?this.timezoneOffset=Number(b):this.timezone=a.toLowerCase()}},day:function(a){var b=a[0];return function(){this.day=Number(b.match(/\d+/)[0])}},month:function(a){return function(){this.month=a.length==3?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(a)/4:Number(a)-1}},year:function(a){return function(){var c=Number(a);this.year=a.length>2?c:c+(c+2E3<b.twoDigitYearMax?2E3:1900)}},rday:function(a){return function(){switch(a){case "yesterday":this.days=-1;break;case "tomorrow":this.days= 1;break;case "today":this.days=0;break;case "now":this.days=0,this.now=!0}}},finishExact:function(b){for(var b=b instanceof Array?b:[b],c=0;c<b.length;c++)b[c]&&b[c].call(this);b=new Date;if((this.hour||this.minute)&&!this.month&&!this.year&&!this.day)this.day=b.getDate();if(!this.year)this.year=b.getFullYear();if(!this.month&&this.month!==0)this.month=b.getMonth();if(!this.day)this.day=1;if(!this.hour)this.hour=0;if(!this.minute)this.minute=0;if(!this.second)this.second=0;if(this.meridian&&this.hour)if(this.meridian== "p"&&this.hour<12)this.hour+=12;else if(this.meridian=="a"&&this.hour==12)this.hour=0;if(this.day>a.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");b=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);this.timezone?b.set({timezone:this.timezone}):this.timezoneOffset&&b.set({timezoneOffset:this.timezoneOffset});return b},finish:function(b){b=b instanceof Array?c(b):[b];if(b.length===0)return null;for(var e=0;e<b.length;e++)typeof b[e]== "function"&&b[e].call(this);b=a.today();if(this.now&&!this.unit&&!this.operator)return new Date;else this.now&&(b=new Date);var e=!!(this.days&&this.days!==null||this.orient||this.operator),g,h,i;i=this.orient=="past"||this.operator=="subtract"?-1:1;!this.now&&"hour minute second".indexOf(this.unit)!=-1&&b.setTimeToNow();if((this.month||this.month===0)&&"year day hour minute second".indexOf(this.unit)!=-1)this.value=this.month+1,this.month=null,e=!0;if(!e&&this.weekday&&!this.day&&!this.days){g=Date[this.weekday](); this.day=g.getDate();if(!this.month)this.month=g.getMonth();this.year=g.getFullYear()}if(e&&this.weekday&&this.unit!="month")this.unit="day",g=a.getDayNumberFromName(this.weekday)-b.getDay(),h=7,this.days=g?(g+i*h)%h:i*h;if(this.month&&this.unit=="day"&&this.operator)this.value=this.month+1,this.month=null;if(this.value!=null&&this.month!=null&&this.year!=null)this.day=this.value*1;if(this.month&&!this.day&&this.value&&(b.set({day:this.value*1}),!e))this.day=this.value*1;if(!this.month&&this.value&& this.unit=="month"&&!this.now)this.month=this.value,e=!0;if(e&&(this.month||this.month===0)&&this.unit!="year")this.unit="month",g=this.month-b.getMonth(),h=12,this.months=g?(g+i*h)%h:i*h,this.month=null;if(!this.unit)this.unit="day";if(!this.value&&this.operator&&this.operator!==null&&this[this.unit+"s"]&&this[this.unit+"s"]!==null)this[this.unit+"s"]=this[this.unit+"s"]+(this.operator=="add"?1:-1)+(this.value||0)*i;else if(this[this.unit+"s"]==null||this.operator!=null){if(!this.value)this.value= 1;this[this.unit+"s"]=this.value*i}if(this.meridian&&this.hour)if(this.meridian=="p"&&this.hour<12)this.hour+=12;else if(this.meridian=="a"&&this.hour==12)this.hour=0;if(this.weekday&&!this.day&&!this.days&&(g=Date[this.weekday](),this.day=g.getDate(),g.getMonth()!==b.getMonth()))this.month=g.getMonth();if((this.month||this.month===0)&&!this.day)this.day=1;if(!this.orient&&!this.operator&&this.unit=="week"&&this.value&&!this.day&&!this.month)return Date.today().setWeek(this.value);if(e&&this.timezone&& this.day&&this.days)this.day=this.days;return e?b.add(this):b.set(this)}};var e=a.Parsing.Operators,g=a.Grammar,i=a.Translator,m;g.datePartDelimiter=e.rtoken(/^([\s\-\.\,\/\x27]+)/);g.timePartDelimiter=e.stoken(":");g.whiteSpace=e.rtoken(/^\s*/);g.generalDelimiter=e.rtoken(/^(([\s\,]|at|@|on)+)/);var h={};g.ctoken=function(a){var c=h[a];if(!c){for(var c=b.regexPatterns,g=a.split(/\s+/),i=[],m=0;m<g.length;m++)i.push(e.replace(e.rtoken(c[g[m]]),g[m]));c=h[a]=e.any.apply(null,i)}return c};g.ctoken2= function(a){return e.rtoken(b.regexPatterns[a])};g.h=e.cache(e.process(e.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),i.hour));g.hh=e.cache(e.process(e.rtoken(/^(0[0-9]|1[0-2])/),i.hour));g.H=e.cache(e.process(e.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),i.hour));g.HH=e.cache(e.process(e.rtoken(/^([0-1][0-9]|2[0-3])/),i.hour));g.m=e.cache(e.process(e.rtoken(/^([0-5][0-9]|[0-9])/),i.minute));g.mm=e.cache(e.process(e.rtoken(/^[0-5][0-9]/),i.minute));g.s=e.cache(e.process(e.rtoken(/^([0-5][0-9]|[0-9])/),i.second));g.ss= e.cache(e.process(e.rtoken(/^[0-5][0-9]/),i.second));g.hms=e.cache(e.sequence([g.H,g.m,g.s],g.timePartDelimiter));g.t=e.cache(e.process(g.ctoken2("shortMeridian"),i.meridian));g.tt=e.cache(e.process(g.ctoken2("longMeridian"),i.meridian));g.z=e.cache(e.process(e.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),i.timezone));g.zz=e.cache(e.process(e.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),i.timezone));g.zzz=e.cache(e.process(g.ctoken2("timezone"),i.timezone));g.timeSuffix=e.each(e.ignore(g.whiteSpace), e.set([g.tt,g.zzz]));g.time=e.each(e.optional(e.ignore(e.stoken("T"))),g.hms,g.timeSuffix);g.d=e.cache(e.process(e.each(e.rtoken(/^([0-2]\d|3[0-1]|\d)/),e.optional(g.ctoken2("ordinalSuffix"))),i.day));g.dd=e.cache(e.process(e.each(e.rtoken(/^([0-2]\d|3[0-1])/),e.optional(g.ctoken2("ordinalSuffix"))),i.day));g.ddd=g.dddd=e.cache(e.process(g.ctoken("sun mon tue wed thu fri sat"),function(a){return function(){this.weekday=a}}));g.M=e.cache(e.process(e.rtoken(/^(1[0-2]|0\d|\d)/),i.month));g.MM=e.cache(e.process(e.rtoken(/^(1[0-2]|0\d)/), i.month));g.MMM=g.MMMM=e.cache(e.process(g.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),i.month));g.y=e.cache(e.process(e.rtoken(/^(\d\d?)/),i.year));g.yy=e.cache(e.process(e.rtoken(/^(\d\d)/),i.year));g.yyy=e.cache(e.process(e.rtoken(/^(\d\d?\d?\d?)/),i.year));g.yyyy=e.cache(e.process(e.rtoken(/^(\d\d\d\d)/),i.year));m=function(){return e.each(e.any.apply(null,arguments),e.not(g.ctoken2("timeContext")))};g.day=m(g.d,g.dd);g.month=m(g.M,g.MMM);g.year=m(g.yyyy,g.yy);g.orientation=e.process(g.ctoken("past future"), function(a){return function(){this.orient=a}});g.operator=e.process(g.ctoken("add subtract"),function(a){return function(){this.operator=a}});g.rday=e.process(g.ctoken("yesterday tomorrow today now"),i.rday);g.unit=e.process(g.ctoken("second minute hour day week month year"),function(a){return function(){this.unit=a}});g.value=e.process(e.rtoken(/^\d\d?(st|nd|rd|th)?/),function(a){return function(){this.value=a.replace(/\D/g,"")}});g.expression=e.set([g.rday,g.operator,g.value,g.unit,g.orientation, g.ddd,g.MMM]);m=function(){return e.set(arguments,g.datePartDelimiter)};g.mdy=m(g.ddd,g.month,g.day,g.year);g.ymd=m(g.ddd,g.year,g.month,g.day);g.dmy=m(g.ddd,g.day,g.month,g.year);g.date=function(a){return(g[b.dateElementOrder]||g.mdy).call(this,a)};g.format=e.process(e.many(e.any(e.process(e.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(b){if(g[b])return g[b];else throw a.Parsing.Exception(b);}),e.process(e.rtoken(/^[^dMyhHmstz]+/),function(a){return e.ignore(e.stoken(a))}))), function(a){return e.process(e.each.apply(null,a),i.finishExact)});var o={};g.formats=function(a){if(a instanceof Array){for(var b=[],c=0;c<a.length;c++)b.push(o[a[c]]=o[a[c]]||g.format(a[c])[0]);return e.any.apply(null,b)}else return o[a]=o[a]||g.format(a)[0]};g._formats=g.formats('"yyyy-MM-ddTHH:mm:ssZ";yyyy-MM-ddTHH:mm:ssZ;yyyy-MM-ddTHH:mm:ssz;yyyy-MM-ddTHH:mm:ss;yyyy-MM-ddTHH:mmZ;yyyy-MM-ddTHH:mmz;yyyy-MM-ddTHH:mm;ddd, MMM dd, yyyy H:mm:ss tt;ddd MMM d yyyy HH:mm:ss zzz;MMddyyyy;ddMMyyyy;Mddyyyy;ddMyyyy;Mdyyyy;dMyyyy;yyyy;Mdyy;dMyy;d'.split(";")); g._start=e.process(e.set([g.date,g.time,g.expression],g.generalDelimiter,g.whiteSpace),i.finish);g.start=function(a){try{var b=g._formats.call({},a);if(b[1].length===0)return b}catch(c){}return g._start.call({},a)};a._parse=a.parse;a.parse=function(b){var c=null;if(!b)return null;if(b instanceof Date)return b;try{c=a.Grammar.start.call({},b.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(e){return null}return c[1].length===0?c[0]:null};a.getParseFunction=function(b){var c=a.Grammar.formats(b);return function(a){var b= null;try{b=c.call({},a)}catch(e){return null}return b[1].length===0?b[0]:null}};a.parseExact=function(b,c){return a.getParseFunction(c)(b)}})(); (function(a){function b(b){function c(){var b=i.getBoundaryDatesFromData(j.data,Math.floor(j.slideWidth/j.cellWidth+5));j.start=b[0];j.end=b[1];o.each(function(){var b=a(this),c=a("<div>",{"class":"ganttview"});(new e(c,j)).render();b.append(c);c=a("div.ganttview-vtheader",b).outerWidth()+a("div.ganttview-slide-container",b).outerWidth();b.css("width",c+2+"px");(new g(b,j)).apply()})}var o=this,j=a.extend(!0,{showWeekends:!0,cellWidth:21,cellHeight:31,slideWidth:400,vHeaderWidth:100,behavior:{clickable:!0, draggable:!0,resizable:!0}},b);j.data?c():j.dataUrl&&a.getJSON(j.dataUrl,function(a){j.data=a;c()})}function c(a,c){if(a=="setSlideWidth"){var e=$("div.ganttview",this);$("div#ganttChart",this);e.each(function(){var a=$("div.ganttview-vtheader",e).outerWidth();$(e).width(c+1);$("div.ganttview-slide-container",this).width(c-a);b()})}$("#ganttChart").width(c)}a.fn.ganttView=function(){var a=Array.prototype.slice.call(arguments);a.length==1&&typeof a[0]=="object"&&b.call(this,a[0]);a.length==2&&typeof a[0]== "string"&&c.call(this,a[0],a[1])};$(window).resize(function(){$("#ganttChart").ganttView("setSlideWidth",$("div.module-block").width()-$("td.module-sidebar").width()-60)});var e=function(b,c){function e(b,c,g){c={id:c.id,name:c.name};a.extend(c,g);b.data("block-data",c)}var g="Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(",");return{render:function(){for(var n=c.data,l=c.cellHeight,t=a("<div>",{"class":"ganttview-vtheader"}),q=0;q<n.length;q++){var w=a("<div>",{"class":"ganttview-vtheader-item"}); w.append(a("<div>",{"class":"ganttview-vtheader-item-name",css:{height:n[q].series.length*l+"px"}}).append(n[q].name));var aa=a("<div>",{"class":"ganttview-vtheader-series"}),E=n[q].start,Ma=n[q].end;typeof E!=="undefined"&&E!==!1&&typeof Ma!=="undefined"&&Ma!==!1&&(aa.append(a("<div>",{"class":"ganttview-vtheader-series-name"}).append("")),w.append(aa));for(E=0;E<n[q].series.length;E++)aa.append(a("<div>",{"class":"ganttview-vtheader-series-name"}).append(n[q].series[E].name));w.append(aa);t.append(w)}b.append(t); n=a("<div>",{"class":"ganttview-slide-container",css:{width:c.slideWidth+"px"}});q=c.start;l=c.end;t=[];t[q.getFullYear()]=[];for(t[q.getFullYear()][q.getMonth()]=[q];q.compareTo(l)==-1;)q=q.clone().addDays(1),t[q.getFullYear()]||(t[q.getFullYear()]=[]),t[q.getFullYear()][q.getMonth()]||(t[q.getFullYear()][q.getMonth()]=[]),t[q.getFullYear()][q.getMonth()].push(q);var l=dates=t,t=c.cellWidth,q=a("<div>",{"class":"ganttview-hzheader"}),w=a("<div>",{"class":"ganttview-hzheader-months"}),aa=a("<div>", {"class":"ganttview-hzheader-days"}),E=0,M;for(M in l)for(var Q in l[M]){Ma=l[M][Q].length*t;E+=Ma;w.append(a("<div>",{"class":"ganttview-hzheader-month",css:{width:Ma-1+"px"}}).append(g[Q]+"/"+M));for(var A in l[M][Q])aa.append(a("<div>",{"class":"ganttview-hzheader-day"}).append(l[M][Q][A].getDate()))}w.css("width",E+"px");aa.css("width",E+"px");q.append(w).append(aa);n.append(q);M=c.data;l=dates;t=c.cellWidth;q=c.showWeekends;Q=a("<div>",{"class":"ganttview-grid"});A=a("<div>",{"class":"ganttview-grid-row"}); for(var x in l)for(var N in l[x])for(var v in l[x][N])w=a("<div>",{"class":"ganttview-grid-row-cell"}),i.isWeekend(l[x][N][v])&&q&&w.addClass("ganttview-weekend"),A.append(w);x=a("div.ganttview-grid-row-cell",A).length*t;A.css("width",x+"px");Q.css("width",x+"px");for(x=0;x<M.length;x++){N=M[x].start;v=M[x].end;typeof N!=="undefined"&&N!==!1&&typeof v!=="undefined"&&v!==!1&&Q.append(A.clone());for(N=0;N<M[x].series.length;N++)Q.append(A.clone())}n.append(Q);x=c.data;N=a("<div>",{"class":"ganttview-blocks"}); for(v=0;v<x.length;v++){M=x[v].start;Q=x[v].end;typeof M!=="undefined"&&M!==!1&&typeof Q!=="undefined"&&Q!==!1&&N.append(a("<div>",{"class":"ganttview-block-container"}));for(M=0;M<x[v].series.length;M++)N.append(a("<div>",{"class":"ganttview-block-container"}))}n.append(N);x=c.data;N=c.cellWidth;v=c.start;M=a("div.ganttview-blocks div.ganttview-block-container",n);for(A=Q=0;A<x.length;A++){t=x[A].start;l=x[A].end;typeof t!=="undefined"&&t!==!1&&typeof l!=="undefined"&&l!==!1&&(l=i.daysBetween(t, l)+1,w=i.daysBetween(v,t),w=a("<div>",{"class":"ganttview-block",title:x[A].label+", "+l+" days",css:{width:l*N-9+"px","margin-left":w*N+3+"px"}}),e(w,x[A],[""]),x[A].color&&w.css("background-color",x[A].color),w.append(a("<div>",{"class":"ganttview-block-text"}).text(l)),a(M[Q]).append(w),Q+=1);for(t=0;t<x[A].series.length;t++)q=x[A].series[t],l=i.daysBetween(q.start,q.end)+1,w=i.daysBetween(v,q.start),w=a("<div>",{"class":"ganttview-block",title:q.label+", "+l+" days",css:{width:l*N-9+"px","margin-left":w* N+3+"px"}}),e(w,x[A],q),x[A].series[t].color&&w.css("background-color",x[A].series[t].color),w.append(a("<div>",{"class":"ganttview-block-text"}).text(l)),a(M[Q]).append(w),Q+=1}b.append(n);n=b.parent();a("div.ganttview-grid-row div.ganttview-grid-row-cell:last-child",n).addClass("last");a("div.ganttview-hzheader-days div.ganttview-hzheader-day:last-child",n).addClass("last");a("div.ganttview-hzheader-months div.ganttview-hzheader-month:last-child",n).addClass("last")}}},g=function(b,c){function e(b, c){a("div.ganttview-block",b).live("click",function(){c&&c(a(this).data("block-data"))})}function g(b,c,e,h){a("div.ganttview-block",b).resizable({grid:c,handles:"e,w",stop:function(){var g=a(this);l(b,g,c,e);h&&h(g.data("block-data"))}})}function i(b,c,e,g){a("div.ganttview-block",b).draggable({axis:"x",grid:[c,c],stop:function(){var h=a(this);l(b,h,c,e);g&&g(h.data("block-data"))}})}function l(b,c,e,g){var b=a("div.ganttview-slide-container",b),h=b.scrollLeft(),b=c.offset().left-b.offset().left- 1+h,h=Math.round(b/e),g=g.clone().addDays(h);c.data("block-data").start=g;h=c.outerWidth();e=Math.round(h/e)-1;c.data("block-data").end=g.clone().addDays(e);a("div.ganttview-block-text",c).text(e+1);c.css("top","").css("left","").css("position","relative").css("margin-left",b+"px")}return{apply:function(){c.behavior.clickable&&e(b,c.behavior.onClick);c.behavior.resizable&&g(b,c.cellWidth,c.start,c.behavior.onResize);c.behavior.draggable&&i(b,c.cellWidth,c.start,c.behavior.onDrag)}}},i={daysBetween:function(a, b){if(!a||!b)return 0;a=Date.parse(a);b=Date.parse(b);if(a.getYear()==1901||b.getYear()==8099)return 0;for(var c=0,e=a.clone();e.compareTo(b)==-1;)c+=1,e.addDays(1);return c},isWeekend:function(a){return a.getDay()%6==0},getBoundaryDatesFromData:function(a,b){var c=new Date;maxEnd=new Date;for(var e=0;e<a.length;e++)for(var g=0;g<a[e].series.length;g++){var l=Date.parse(a[e].series[g].start),t=Date.parse(a[e].series[g].end);e==0&&g==0&&(c=l,maxEnd=t);c.compareTo(l)==1&&(c=l);maxEnd.compareTo(t)== -1&&(maxEnd=t)}i.daysBetween(c,maxEnd)<b&&(maxEnd=c.clone().addDays(b));return[c,maxEnd]}}})(jQuery);var qq=qq||{};qq.extend=function(a,b){for(var c in b)a[c]=b[c]};qq.indexOf=function(a,b,c){if(a.indexOf)return a.indexOf(b,c);var c=c||0,e=a.length;for(c<0&&(c+=e);c<e;c++)if(c in a&&a[c]===b)return c;return-1};qq.getUniqueId=function(){var a=0;return function(){return a++}}();qq.attach=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}; qq.detach=function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.attachEvent&&a.detachEvent("on"+b,c)};qq.preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1};qq.insertBefore=function(a,b){b.parentNode.insertBefore(a,b)};qq.remove=function(a){a.parentNode.removeChild(a)};qq.contains=function(a,b){return a==b?!0:a.contains?a.contains(b):!!(b.compareDocumentPosition(a)&8)}; qq.toElement=function(){var a=document.createElement("div");return function(b){a.innerHTML=b;b=a.firstChild;a.removeChild(b);return b}}();qq.css=function(a,b){if(b.opacity!=null&&typeof a.style.opacity!="string"&&typeof a.filters!="undefined")b.filter="alpha(opacity="+Math.round(100*b.opacity)+")";qq.extend(a.style,b)};qq.hasClass=function(a,b){return RegExp("(^| )"+b+"( |$)").test(a.className)};qq.addClass=function(a,b){qq.hasClass(a,b)||(a.className+=" "+b)}; qq.removeClass=function(a,b){a.className=a.className.replace(RegExp("(^| )"+b+"( |$)")," ").replace(/^\s+|\s+$/g,"")};qq.setText=function(a,b){a.innerText=b;a.textContent=b};qq.children=function(a){for(var b=[],a=a.firstChild;a;)a.nodeType==1&&b.push(a),a=a.nextSibling;return b};qq.getByClass=function(a,b){if(a.querySelectorAll)return a.querySelectorAll("."+b);for(var c=[],e=a.getElementsByTagName("*"),g=e.length,i=0;i<g;i++)qq.hasClass(e[i],b)&&c.push(e[i]);return c}; qq.obj2url=function(a,b,c){var e=[],g="&",i=function(a,c){var g=b?/\[\]$/.test(b)?b:b+"["+c+"]":c;g!="undefined"&&c!="undefined"&&e.push(typeof a==="object"?qq.obj2url(a,g,!0):Object.prototype.toString.call(a)==="[object Function]"?encodeURIComponent(g)+"="+encodeURIComponent(a()):encodeURIComponent(g)+"="+encodeURIComponent(a))};if(!c&&b)g=/\?/.test(b)?/\?$/.test(b)?"":"&":"?",e.push(b),e.push(qq.obj2url(a));else if(Object.prototype.toString.call(a)==="[object Array]"&&typeof a!="undefined")for(var m= 0,c=a.length;m<c;++m)i(a[m],m);else if(typeof a!="undefined"&&a!==null&&typeof a==="object")for(m in a)i(a[m],m);else e.push(encodeURIComponent(b)+"="+encodeURIComponent(a));return e.join(g).replace(/^&/,"").replace(/%20/g,"+")};qq=qq||{}; qq.FileUploaderBasic=function(a){this._options={debug:!1,action:"/server/upload",params:{},button:null,multiple:!0,maxConnections:3,allowedExtensions:[],sizeLimit:0,minSizeLimit:0,onSubmit:function(){},onProgress:function(){},onComplete:function(){},onAllComplete:function(){},onCancel:function(){},messages:{typeError:"{file} has invalid extension. Only {extensions} are allowed.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.", emptyError:"{file} is empty, please select files again without it.",onLeave:"The files are being uploaded, if you leave now the upload will be cancelled."},showMessage:function(a){alert(a)}};qq.extend(this._options,a);this._filesInProgress=0;this._handler=this._createUploadHandler();if(this._options.button)this._button=this._createUploadButton(this._options.button);this._preventLeaveInProgress()}; qq.FileUploaderBasic.prototype={setParams:function(a){this._options.params=a},getInProgress:function(){return this._filesInProgress},_createUploadButton:function(a){var b=this;return new qq.UploadButton({element:a,multiple:this._options.multiple&&qq.UploadHandlerXhr.isSupported(),onChange:function(a){b._onInputChange(a)}})},_createUploadHandler:function(){var a=this,b;b=qq.UploadHandlerXhr.isSupported()?"UploadHandlerXhr":"UploadHandlerForm";return new qq[b]({debug:this._options.debug,action:this._options.action, maxConnections:this._options.maxConnections,onProgress:function(b,e,g,i){a._onProgress(b,e,g,i);a._options.onProgress(b,e,g,i)},onComplete:function(b,e,g){a._onComplete(b,e,g);a._options.onComplete(b,e,g)},onAllComplete:function(b){a._options.onAllComplete(b)},onCancel:function(b,e){a._onCancel(b,e);a._options.onCancel(b,e)}})},_preventLeaveInProgress:function(){},_onSubmit:function(){this._filesInProgress++},_onProgress:function(){},_onComplete:function(a,b,c){this._filesInProgress--;c.error&&this._options.showMessage(c.error)}, _onCancel:function(){this._filesInProgress--},_onInputChange:function(a){this._handler instanceof qq.UploadHandlerXhr?this._uploadFileList(a.files):this._validateFile(a)&&this._uploadFile(a);this._button.reset()},_uploadFileList:function(a){for(var b=0;b<a.length;b++)if(!this._validateFile(a[b]))return;for(b=0;b<a.length;b++)this._uploadFile(a[b])},_uploadFile:function(a){var a=this._handler.add(a),b=this._handler.getName(a);this._options.onSubmit(a,b)!==!1&&(this._onSubmit(a,b),this._handler.upload(a, this._options.params))},_validateFile:function(a){var b,c;a.value?b=a.value.replace(/.*(\/|\\)/,""):(b=a.fileName!=null?a.fileName:a.name,c=a.fileSize!=null?a.fileSize:a.size);if(this._isAllowedExtension(b))if(c===0)return this._error("emptyError",b),!1;else if(c&&this._options.sizeLimit&&c>this._options.sizeLimit)return this._error("sizeError",b),!1;else{if(c&&c<this._options.minSizeLimit)return this._error("minSizeError",b),!1}else return this._error("typeError",b),!1;return!0},_error:function(a, b){function c(a,b){e=e.replace(a,b)}var e=this._options.messages[a];c("{file}",this._formatFileName(b));c("{extensions}",this._options.allowedExtensions.join(", "));c("{sizeLimit}",this._formatSize(this._options.sizeLimit));c("{minSizeLimit}",this._formatSize(this._options.minSizeLimit));this._options.showMessage(e)},_formatFileName:function(a){a.length>33&&(a=a.slice(0,19)+"..."+a.slice(-13));return a},_isAllowedExtension:function(a){var a=-1!==a.indexOf(".")?a.replace(/.*[.]/,"").toLowerCase(): "",b=this._options.allowedExtensions;if(!b.length)return!0;for(var c=0;c<b.length;c++)if(b[c].toLowerCase()==a)return!0;return!1},_formatSize:function(a){var b=-1;do a/=1024,b++;while(a>99);return Math.max(a,0.1).toFixed(1)+"kB,MB,GB,TB,PB,EB".split(",")[b]}}; qq.FileUploader=function(a){qq.FileUploaderBasic.apply(this,arguments);qq.extend(this._options,{element:null,listElement:null,template:'<span class="qq-uploader"><span class="qq-upload-button">'+a.text.attach+'</span><ul class="qq-upload-list"></ul></span>',fileTemplate:'<li><span class="qq-upload-file"></span><span class="qq-upload-spinner"></span><span class="qq-upload-size"></span><a class="qq-upload-cancel" href="#">'+a.text.cancel+'</a><span class="qq-upload-failed-text">'+a.text.failed+"</span></li>", classes:{button:"qq-upload-button",list:"qq-upload-list",file:"qq-upload-file",spinner:"qq-upload-spinner",size:"qq-upload-size",cancel:"qq-upload-cancel",success:"qq-upload-success",fail:"qq-upload-fail"}});qq.extend(this._options,a);this._element=this._options.element;this._element.innerHTML=this._options.template;this._listElement=this._options.listElement||this._find(this._element,"list");this._classes=this._options.classes;this._button=this._createUploadButton(this._find(this._element,"button")); this._bindCancelEvent();this._setupDragDrop()};qq.extend(qq.FileUploader.prototype,qq.FileUploaderBasic.prototype); qq.extend(qq.FileUploader.prototype,{_find:function(a,b){var c=qq.getByClass(a,this._options.classes[b])[0];if(!c)throw Error("element not found "+b);return c},_setupDragDrop:function(){},_onSubmit:function(a,b){qq.FileUploaderBasic.prototype._onSubmit.apply(this,arguments);this._addToList(a,b)},_onProgress:function(a,b,c,e){qq.FileUploaderBasic.prototype._onProgress.apply(this,arguments);var g=this._find(this._getItemByFileId(a),"size");g.style.display="inline";var i;i=c!=e?Math.round(c/e*100)+"% from "+ this._formatSize(e):this._formatSize(e);qq.setText(g,i)},_onComplete:function(a,b,c){qq.FileUploaderBasic.prototype._onComplete.apply(this,arguments);var e=this._getItemByFileId(a);qq.remove(this._find(e,"cancel"));qq.remove(this._find(e,"spinner"));c.success?$(e).slideUp(300):qq.innerHTML=""},_addToList:function(a,b){var c=qq.toElement(this._options.fileTemplate);c.qqFileId=a;var e=this._find(c,"file");qq.setText(e,this._formatFileName(b));qq.setText(e,this._formatFileName(b));this._find(c,"size").style.display= "none";this._listElement.appendChild(c)},_getItemByFileId:function(a){for(var b=this._listElement.firstChild;b;){if(b.qqFileId==a)return b;b=b.nextSibling}},_bindCancelEvent:function(){var a=this;qq.attach(this._listElement,"click",function(b){var b=b||window.event,c=b.target||b.srcElement;if(qq.hasClass(c,a._classes.cancel))qq.preventDefault(b),b=c.parentNode,a._handler.cancel(b.qqFileId),qq.remove(b)})}});qq.UploadDropZone=function(){}; qq.UploadButton=function(a){this._options={element:null,multiple:!1,name:"file",onChange:function(){},hoverClass:"qq-upload-button-hover",focusClass:"qq-upload-button-focus"};qq.extend(this._options,a);this._element=this._options.element;qq.css(this._element,{position:"relative",overflow:"hidden",direction:"ltr"});this._input=this._createInput()}; qq.UploadButton.prototype={getInput:function(){return this._input},reset:function(){this._input.parentNode&&qq.remove(this._input);qq.removeClass(this._element,this._options.focusClass);this._input=this._createInput()},_createInput:function(){var a=document.createElement("input");this._options.multiple&&a.setAttribute("multiple","multiple");a.setAttribute("type","file");a.setAttribute("name",this._options.name);qq.css(a,{position:"absolute",right:0,top:"6px",fontFamily:"Arial",fontSize:"2px",margin:0, padding:0,cursor:"pointer",opacity:0});this._element.appendChild(a);var b=this;qq.attach(a,"change",function(){b._options.onChange(a)});qq.attach(a,"mouseover",function(){qq.addClass(b._element,b._options.hoverClass)});qq.attach(a,"mouseout",function(){qq.removeClass(b._element,b._options.hoverClass)});qq.attach(a,"focus",function(){qq.addClass(b._element,b._options.focusClass)});qq.attach(a,"blur",function(){qq.removeClass(b._element,b._options.focusClass)});window.attachEvent&&a.setAttribute("tabIndex", "-1");return a}};qq.UploadHandlerAbstract=function(a){this._options={debug:!1,action:"/upload.php",maxConnections:999,onProgress:function(){},onComplete:function(){},onAllComplete:function(){},onCancel:function(){}};qq.extend(this._options,a);this._queue=[];this._params=[];this._completed_files=[]}; qq.UploadHandlerAbstract.prototype={log:function(a){this._options.debug&&window.console&&console.log("[uploader] "+a)},add:function(){},upload:function(a,b){var c=this._queue.push(a),e={};qq.extend(e,b);this._params[a]=e;c<=this._options.maxConnections&&this._upload(a,this._params[a])},cancel:function(a){this._cancel(a);this._dequeue(a)},cancelAll:function(){for(var a=0;a<this._queue.length;a++)this._cancel(this._queue[a]);this._queue=[]},getName:function(){},getSize:function(){},getQueue:function(){return this._queue}, _upload:function(){},_cancel:function(){},_dequeue:function(a){this._queue.splice(qq.indexOf(this._queue,a),1);a=this._options.maxConnections;this._queue.length>=a&&(a=this._queue[a-1],this._upload(a,this._params[a]));this._queue.length==0&&this._onAllComplete()},_onAllComplete:function(){this._options.onAllComplete(this._completed_files)}};qq.UploadHandlerForm=function(a){qq.UploadHandlerAbstract.apply(this,arguments);this._inputs={}};qq.extend(qq.UploadHandlerForm.prototype,qq.UploadHandlerAbstract.prototype); qq.extend(qq.UploadHandlerForm.prototype,{add:function(a){a.setAttribute("name","qqfile");var b="qq-upload-handler-iframe"+qq.getUniqueId();this._inputs[b]=a;a.parentNode&&qq.remove(a);return b},getName:function(a){return this._inputs[a].value.replace(/.*(\/|\\)/,"")},_cancel:function(a){this._options.onCancel(a,this.getName(a));delete this._inputs[a];if(a=document.getElementById(a))a.setAttribute("src","javascript:false;"),qq.remove(a)},_upload:function(a,b){var c=this._inputs[a];if(!c)throw Error("file with passed id was not added, or already uploaded or cancelled"); var e=this.getName(a),g=this._createIframe(a),i=this._createForm(g,b);i.appendChild(c);var m=this;this._attachLoadEvent(g,function(){m.log("iframe loaded");var b=m._getIframeContentJSON(g);m._options.onComplete(a,e,b);m._dequeue(a);delete m._inputs[a];setTimeout(function(){qq.remove(g)},1)});i.submit();qq.remove(i);return a},_attachLoadEvent:function(a,b){qq.attach(a,"load",function(){a.parentNode&&(!a.contentDocument||!(a.contentDocument.body&&a.contentDocument.body.innerHTML=="false"))&&b()})}, _getIframeContentJSON:function(a){var a=a.contentDocument?a.contentDocument:a.contentWindow.document,b;this.log("converting iframe's innerHTML to JSON");this.log("innerHTML = "+a.body.innerHTML);var c=document.createElement("div");c.innerHTML=a.body.innerHTML;a=c.textContent;try{b=eval("("+a+")")}catch(e){b=$.parseJSON(a)}return b},_createIframe:function(a){var b=qq.toElement('<iframe src="javascript:false;" name="'+a+'" />');b.setAttribute("id",a);b.style.display="none";document.body.appendChild(b); return b},_createForm:function(a,b){var c=null,c=b.csrf_token&&b.csrf_name?qq.toElement('<form method="post" enctype="multipart/form-data">'+('<input type="hidden" name="'+b.csrf_name+'" value="'+b.csrf_token+'" />')+"</form>"):qq.toElement('<form method="post" enctype="multipart/form-data"></form>');delete b.csrf_token;delete b.csrf_name;delete b.csrf_xname;var e=qq.obj2url(b,this._options.action);c.setAttribute("action",e);c.setAttribute("target",a.name);c.style.display="none";document.body.appendChild(c); return c}});qq.UploadHandlerXhr=function(a){qq.UploadHandlerAbstract.apply(this,arguments);this._files=[];this._xhrs=[];this._loaded=[]};qq.UploadHandlerXhr.isSupported=function(){var a=document.createElement("input");a.type="file";return"multiple"in a&&typeof File!="undefined"&&typeof(new XMLHttpRequest).upload!="undefined"};qq.extend(qq.UploadHandlerXhr.prototype,qq.UploadHandlerAbstract.prototype); qq.extend(qq.UploadHandlerXhr.prototype,{add:function(a){if(!(a instanceof File))throw Error("Passed obj is not a File (in qq.UploadHandlerXhr)");return this._files.push(a)-1},getName:function(a){a=this._files[a];return a.fileName!=null?a.fileName:a.name},getSize:function(a){a=this._files[a];return a.fileSize!=null?a.fileSize:a.size},getLoaded:function(a){return this._loaded[a]||0},_upload:function(a,b){var c=this._files[a],e=this.getName(a);this.getSize(a);this._loaded[a]=0;var g=this._xhrs[a]=new XMLHttpRequest, i=this;g.upload.onprogress=function(b){if(b.lengthComputable)i._loaded[a]=b.loaded,i._options.onProgress(a,e,b.loaded,b.total)};g.onreadystatechange=function(){g.readyState==4&&i._onComplete(a,g)};var b=b||{},m=!1,h=!1;if(b.csrf_token&&b.csrf_xname)m=b.csrf_token,h=b.csrf_xname,delete b.csrf_token,delete b.csrf_xname,delete b.csrf_name;b.qqfile=e;var o=qq.obj2url(b,this._options.action);g.open("POST",o,!0);g.setRequestHeader("X-Requested-With","XMLHttpRequest");g.setRequestHeader("X-File-Name",encodeURIComponent(e)); g.setRequestHeader("Content-Type","application/octet-stream");m&&g.setRequestHeader(h,m);g.send(c)},_onComplete:function(a,b){if(this._files[a]){var c=this.getName(a),e=this.getSize(a);this._options.onProgress(a,c,e,e);if(b.status==200||b.status==201){this.log("xhr - server response received");this.log("responseText = "+b.responseText);var g;try{g=eval("("+b.responseText+")")}catch(i){g={}}this._completed_files.push({file:this._files[a],response:g});this._options.onComplete(a,c,g)}else this._completed_files.push({file:this._files[a], response:{}}),this._options.onComplete(a,c,{});this._files[a]=null;this._xhrs[a]=null;this._dequeue(a)}},_cancel:function(a){this._options.onCancel(a,this.getName(a));this._files[a]=null;this._xhrs[a]&&(this._xhrs[a].abort(),this._xhrs[a]=null)}});
